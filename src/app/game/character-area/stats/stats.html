<div class="container">
  <!-- ATTRIBUTES -->
  <div class="category">
    <div class="grid-header" [class.grid-header--expanded]="statsState.AttributesExpanded()">
      <h3>ATTRIBUTES</h3>
      <div class="respec">
        <button
          class="ih-button-icon button-cancel"
          [class.button-cancel--hidden]="!IsRespecMode()"
          [disabled]="!IsRespecMode()"
          (click)="CancelRespecMode()"
          title="Cancel Respec">
          <app-icon ui="cancel" size="sm"></app-icon>
        </button>
        <button
          class="ih-button-quaternary button-respec"
          [class.button-respec--hidden]="HideRespecButton()"
          [disabled]="RespecButtonDisabled()"
          [title]="RespecButtonTooltip()"
          (click)="IsRespecMode() ? ConfirmRespec() : StartRespecMode()">
          @if (IsRespecMode()) {
            CONFIRM
          } @else {
            RESPEC
          }
        </button>
        <div class="respec-cost" [class.respec-cost--hidden]="!IsRespecMode()" title="Respec Cost">
          <app-gold [amount]="RespecCost()"></app-gold>
        </div>
        <div
          class="skill-points"
          [class.skill-points--hidden]="IsRespecMode() || !ShowAttributePoints()">
          {{ AttributePoints() }}
          <app-icon class="skill-points__icon" symbol="orb" size="sm"></app-icon>
        </div>
      </div>
      <button class="ih-button-icon grid-header__toggle" (click)="ToggleAttributesExpanded()">
        <app-toggle-icon
          [direction]="statsState.AttributesExpanded() ? 'up' : 'down'"></app-toggle-icon>
      </button>
    </div>
    @if (statsState.AttributesExpanded()) {
      <div class="grid">
        @for (attribute of Attributes(); track attribute.label) {
          <div class="grid__label">{{ attribute.label }}</div>
          <div class="grid__value">
            <button
              class="attribute-modifier-button"
              (click)="DecreaseAttribute(attribute.label)"
              [disabled]="!CanDecreaseAttribute(attribute.label)">
              -
            </button>
            <div class="attribute-value">{{ attribute.value }}</div>
            <button
              class="attribute-modifier-button"
              (click)="IncreaseAttribute(attribute.label)"
              [disabled]="!CanIncreaseAttributes()">
              +
            </button>
          </div>
        }
      </div>
    }
  </div>

  @for (statGrid of AllStats(); track statGrid.title) {
    <div class="category">
      <div class="grid-header" [class.grid-header--expanded]="statGrid.expanded">
        <h3>{{ statGrid.title }}</h3>
        <button
          class="ih-button-icon grid-header__toggle"
          (click)="statGrid.expanded = !statGrid.expanded">
          <app-toggle-icon [direction]="statGrid.expanded ? 'up' : 'down'"></app-toggle-icon>
        </button>
      </div>
      @if (statGrid.expanded) {
        <div class="grid">
          @for (stat of statGrid.items; track stat.label) {
            <div class="grid__label">{{ stat.label }}</div>
            <div class="grid__value">{{ stat.value }}</div>
          }
        </div>
      }
    </div>
  }
</div>
