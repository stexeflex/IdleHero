<div class="loadout">
  <!-- GEAR SLOTS -->
  <div class="gear-slots">
    @for (itemSlot of ItemSlots; track itemSlot.slot) {
      @let itemSlotInfo = ItemInfo(itemSlot.slot);
      <button
        class="gear-slot"
        [class]="itemSlot.class"
        (click)="SelectItemSlot($event, itemSlot.slot)"
        [class.selected]="itemSlotInfo.IsSelected"
        [class.empty]="!itemSlotInfo.IsEquipped"
        [class.equipped]="itemSlotInfo.IsEquipped"
        [class.common--border]="itemSlotInfo.IsCommon"
        [class.magic--border]="itemSlotInfo.IsMagic"
        [class.rare--border]="itemSlotInfo.IsRare"
        [class.epic--border]="itemSlotInfo.IsEpic"
        [class.legendary--border]="itemSlotInfo.IsLegendary">
        <app-icon class="gear-slot__icon" [gear]="itemSlotInfo.Icon" size="2x"></app-icon>

        <div class="item-tier-info">
          <span class="item-tier">{{ itemSlotInfo.Tier }}</span>
        </div>

        @let affixes = AffixInfo(itemSlot.slot);
        <app-affix-slot-icon [affixes]="affixes" size="12"></app-affix-slot-icon>
      </button>
    }
  </div>

  <!-- SELECTED ITEM -->
  @if (SelectedItem() && SelectedVariant()) {
    <separator class="ih-separator"></separator>
    <div class="selected-item">
      <app-item-preview [Item]="SelectedItem()!" [Variant]="SelectedVariant()!"></app-item-preview>
    </div>
  }
</div>
