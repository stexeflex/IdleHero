import{$b as ye,Aa as m,Ab as de,Ba as N,Ca as le,Cb as re,Da as M,Db as me,Ea as y,Fa as g,Ga as a,Ha as r,Hb as ge,Ia as c,Ib as pe,Jb as ue,Jc as h,Kb as K,Lb as L,Lc as H,Ma as E,Mb as fe,Na as I,Nb as _e,Nc as Pe,Oa as s,Ob as $,Oc as U,Pb as Ce,Qc as j,Rc as Oe,S as f,Sa as se,Ta as v,Ua as P,Ub as be,Va as l,Vb as xe,Vc as Se,W as T,Wa as C,Wc as Te,X as k,Xa as u,Xc as q,Ya as ie,Yb as Me,Yc as Y,_b as V,a as oe,ab as w,ba as D,bb as S,cb as b,fb as z,gb as F,ha as i,lb as _,mc as he,oa as x,ob as ae,qc as De,sc as ve,tb as ce,wc as A,za as d,zb as G}from"./chunk-SPZ3F7E3.js";var Ie=(n,t)=>t.Type,Ee=(n,t)=>t.Id,we=(n,t)=>t.Quality;function Ae(n,t){if(n&1&&(a(0,"div",11),c(1,"app-icon",15),a(2,"div",16),l(3),r()()),n&2){let e=t.$implicit,o=s(3);g("title",e.Quality),i(),P(o.GetRuneQualityClass(e.Quality)),i(),P(o.GetRuneQualityClass(e.Quality)),i(),u(" ",e.Quality," ")}}function Re(n,t){if(n&1&&(a(0,"div",13),c(1,"app-icon",17),a(2,"div"),l(3),r()()),n&2){s();let e=b(18),o=s(2);i(),P(o.GetDungeonKeyColorClass(e)),i(),P(o.GetDungeonKeyColorClass(e)),i(),u(" ",e," ")}}function Be(n,t){if(n&1&&(a(0,"div",13),c(1,"app-level",18),r()),n&2){s();let e=b(17);i(),g("level",e)}}function Le(n,t){if(n&1){let e=E();a(0,"button",19),I("click",function(){T(e);let p=s().$implicit,O=s(2);return k(O.EnterDungeon(p.Id))}),l(1," ENTER "),r()}if(n&2){let e=s().$implicit,o=s(2);g("disabled",!o.CanEnter(e.Id))}}function He(n,t){if(n&1&&(a(0,"div",4),c(1,"app-icon",5),a(2,"div",6)(3,"h3",7),l(4),r(),a(5,"div",8),l(6),r(),a(7,"div",9)(8,"span"),l(9),r()(),a(10,"div",9)(11,"span"),l(12),r()(),a(13,"div",10),M(14,Ae,4,6,"div",11,we),r()(),a(16,"div",12),w(17)(18),d(19,Re,4,5,"div",13)(20,Be,2,1,"div",13)(21,Le,2,1,"button",14),r()()),n&2){let e=t.$implicit,o=s().$implicit,p=s();i(),g("creatures",e.Icon),i(3),ie("",e.Id," \u2022 ",e.Title.toUpperCase()),i(2),C(e.Description),i(3),ie("Stages: ",e.StagesBase," - ",e.StagesMax),i(3),u("Elites: ",e.MidStages.join(" | ")),i(2),y(p.GetRuneDrops(e)),i(3);let O=S(p.GetDungeonPrerequisiteLevel(e));i();let ne=S(p.GetDungeonPrerequisiteKey(e));i(),m(o.Type==="Capstone"&&ne&&!p.HasDungeonPrerequisiteKey(e)?19:o.Type==="Normal"&&O&&!p.FulfillsDungeonLevelPrerequisite(e)?20:21)}}function Ne(n,t){if(n&1&&(a(0,"div",2)(1,"h3",3),l(2),r(),M(3,He,22,10,"div",4,Ee),r()),n&2){let e=t.$implicit;i(2),C(e.Title),i(),y(e.Dungeons)}}var Q=class n{dungeonRoom=f(A);dungeonKey=f(be);level=f(Me);Dungeons=de();DungeonGroups=_(()=>[{Title:"DUNGEONS",Type:"Normal",Dungeons:this.Dungeons.filter(t=>t.Type==="Normal")},{Title:"CAPSTONE DUNGEONS",Type:"Capstone",Dungeons:this.Dungeons.filter(t=>t.Type==="Capstone")}]);UnlocksByDungeonId=_(()=>this.Dungeons.reduce((t,e)=>{let o=e.Rewards.Key;return o&&(t[e.Id]=[{Label:`${o}`,Key:o,Symbol:"skeletonkey",ColorClass:this.GetDungeonKeyColorClass(o)}]),t},{}));EnterDungeon(t){this.dungeonRoom.EnterDungeon(t)}CanEnter(t){return this.dungeonRoom.CanEnter(t)}GetUnlocks(t){return this.UnlocksByDungeonId()[t]??[]}GetRuneDrops(t){return ge.map(e=>({Quality:e,Chance:t.Rewards.RuneDropChances[e]??0})).filter(e=>e.Chance>0)}GetRuneDropChanceLabel(t){return`${Math.round(t*100)}%`}GetRuneQualityClass(t){switch(t){case"Common":return"common--font";case"Magic":return"magic--font";case"Rare":return"rare--font";case"Epic":return"epic--font";case"Legendary":return"legendary--font";default:return""}}GetDungeonKeyColorClass(t){switch(t){case"Silver Key":return"common--font";case"Magic Key":return"magic--font";case"Golden Key":return"rare--font";case"Epic Key":return"epic--font";case"Legendary Key":return"legendary--font";default:return""}}HasPrerequisiteKey(t){return this.dungeonKey.HasKey(t.Prerequisites.Key)}GetDungeonPrerequisiteKey(t){return this.IsCapstoneDungeon(t)?t.Prerequisites.Key:null}HasDungeonPrerequisiteKey(t){let e=this.GetDungeonPrerequisiteKey(t);return e?this.dungeonKey.HasKey(e):!0}HasUnlockKey(t){return this.dungeonKey.HasKey(t.Key)}IsCapstoneDungeon(t){return t.Type==="Capstone"}IsNormalDungeon(t){return t.Type==="Normal"}GetDungeonPrerequisiteLevel(t){return this.IsNormalDungeon(t)?t.Prerequisites.Level:null}FulfillsDungeonLevelPrerequisite(t){let e=this.level.Level(),o=this.GetDungeonPrerequisiteLevel(t);return o?e>=o:!0}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-dungeon-rooms"]],decls:5,vars:1,consts:[[3,"title"],[1,"dungeon-list"],[1,"dungeon-group"],[1,"group-title"],[1,"dungeon-card"],["size","lg",3,"creatures"],[1,"dungeon-info"],[1,"dungeon-title"],[1,"dungeon-desc"],[1,"dungeon-meta"],[1,"dungeon-rewards","runes"],[1,"rewards-icon-item","rune-drop-item",3,"title"],[1,"entry-button-area"],[1,"rewards-icon-item","prerequisite-item"],[1,"ih-button",3,"disabled"],["symbol","runestone","size","mini",1,"rune-drop-icon"],[1,"rune-drop-quality"],["symbol","skeletonkey","size","mini"],["size","mini","fontSize","1rem",3,"level"],[1,"ih-button",3,"click","disabled"]],template:function(e,o){e&1&&(a(0,"section"),c(1,"app-panel-header",0),a(2,"div",1),M(3,Ne,5,1,"div",2,Ie),r()()),e&2&&(i(),g("title","DUNGEONS"),i(2),y(o.DungeonGroups()))},dependencies:[q,h,Se],styles:["@-webkit-keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.common--border[_ngcontent-%COMP%]{border-color:#a0a0a0}.magic--border[_ngcontent-%COMP%]{border-color:#3b82f6}.rare--border[_ngcontent-%COMP%]{border-color:#eee000}.epic--border[_ngcontent-%COMP%]{border-color:#8b5cf6}.legendary--border[_ngcontent-%COMP%]{border-color:#f80}.common--font[_ngcontent-%COMP%]{color:#e5e5e5}.magic--font[_ngcontent-%COMP%]{color:#3b82f6}.rare--font[_ngcontent-%COMP%]{color:#eee000}.epic--font[_ngcontent-%COMP%]{color:#8b5cf6}.legendary--font[_ngcontent-%COMP%]{color:#f80}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}.dungeon-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.dungeon-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.group-title[_ngcontent-%COMP%]{color:#e5e5e5;margin:8px 0;text-align:center}.dungeon-card[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:grid;grid-template-columns:auto 1fr auto;align-items:center;gap:12px;padding:12px;border:1px solid #e5e5e5;border-radius:8px;background:#181f2b}.dungeon-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.dungeon-title[_ngcontent-%COMP%]{color:#d70000;text-shadow:-1px -1px 0 rgba(0,0,0,.5),1px -1px 0 rgba(0,0,0,.5),-1px 1px 0 rgba(0,0,0,.5),1px 1px 0 rgba(0,0,0,.5)}.dungeon-desc[_ngcontent-%COMP%]{font-size:1rem;color:#e5e5e5;font-family:MedievalSharp,cursive}.dungeon-meta[_ngcontent-%COMP%]{font-size:.8rem;color:#888}.dungeon-rewards[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;gap:6px}.rewards-icon-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.rewards-icon-item.unlock-item[_ngcontent-%COMP%]{border:1px solid rgba(229,229,229,.6);border-radius:1000px;padding:6px 12px}.rewards-icon-item.unlock-item.met[_ngcontent-%COMP%]{border-color:#d4af37a6}.rewards-icon-item.unlock-item[_ngcontent-%COMP%]   .unlock-state[_ngcontent-%COMP%]{border:1px solid rgba(229,229,229,.6);border-radius:1000px;font-size:.7rem;font-weight:700;padding:6px 12px}.rewards-icon-item.unlock-item[_ngcontent-%COMP%]   .unlock-state.met[_ngcontent-%COMP%]{border-color:#d4af37a6;color:#d4af37}.rewards-icon-item.rune-drop-item[_ngcontent-%COMP%]{border:1px solid rgba(229,229,229,.6);border-radius:1000px;gap:6px;padding:6px 12px}.rewards-icon-item.rune-drop-item[_ngcontent-%COMP%]   .rune-drop-quality[_ngcontent-%COMP%]{font-size:.8rem}.rewards-icon-item.rune-drop-item[_ngcontent-%COMP%]   .rune-drop-chance[_ngcontent-%COMP%]{border-left:1px solid rgba(229,229,229,.6);color:#e5e5e5;font-size:.7rem;font-weight:700;padding-left:6px}.rewards-icon-item.prerequisite-item[_ngcontent-%COMP%]{border:1px solid rgba(229,229,229,.65);border-radius:1000px;display:flex;gap:6px;justify-items:center;text-align:center;padding:6px 12px}"]})};function Ge(n,t){if(n&1&&c(0,"app-icon",0),n&2){let e=s();g("character",e.HeroIcon)("size",e.Size())}}function ze(n,t){if(n&1&&c(0,"app-icon",1),n&2){let e=s();g("creatures",e.BossIcon)("size",e.Size())("rotate",e.Rotate)}}var W=class n{Actor=ae.required();Size=ae("sm");get ActorIsHero(){return this.Actor().HeroIcon!==void 0}get HeroIcon(){return this.Actor().HeroIcon||void 0}get ActorIsBoss(){return this.Actor().BossIcon!==void 0}get BossIcon(){return this.Actor().BossIcon.Icon||void 0}get Rotate(){return this.Actor()?.BossIcon?.Rotate||!1}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-combat-actor-icon"]],inputs:{Actor:[1,"Actor"],Size:[1,"Size"]},decls:2,vars:1,consts:[[3,"character","size"],[3,"creatures","size","rotate"]],template:function(e,o){e&1&&d(0,Ge,1,2,"app-icon",0)(1,ze,1,3,"app-icon",1),e&2&&m(o.ActorIsHero?0:o.ActorIsBoss?1:-1)},dependencies:[h],encapsulation:2})};function Fe(n,t){n&1&&c(0,"separator",1),n&2&&g("margin",!1)}function Ke(n,t){if(n&1&&(a(0,"span",3),l(1),r()),n&2){let e=s().$implicit;i(),C(e.Message)}}function $e(n,t){if(n&1&&(a(0,"span",10),l(1,"\u2022"),r(),c(2,"app-rune",12)),n&2){let e=s(2).$implicit;i(2),g("rune",e.Rewards.Rune)}}function Ve(n,t){if(n&1&&(a(0,"span",10),l(1,"\u2022"),r(),c(2,"app-icon",13)),n&2){let e=s(2).$implicit;i(2),v("common--font",e.Rewards.Key==="Silver Key")("magic--font",e.Rewards.Key==="Magic Key")("rare--font",e.Rewards.Key==="Golden Key")("epic--font",e.Rewards.Key==="Epic Key")("legendary--font",e.Rewards.Key==="Legendary Key")}}function Ue(n,t){if(n&1&&(c(0,"app-icon",5),a(1,"div",6)(2,"div",7)(3,"span"),l(4),r()(),a(5,"div",8),c(6,"app-gold",9),a(7,"span",10),l(8,"\u2022"),r(),c(9,"app-exp",11),d(10,$e,3,1),d(11,Ve,3,10),r()()),n&2){let e=s().$implicit;i(4),u("Completed Stage ",e.Stage),i(2),g("amount",e.Rewards.Gold),i(3),g("exp",e.Rewards.Experience),i(),m(e.Rewards.Rune?10:-1),i(),m(e.Rewards.Key?11:-1)}}function je(n,t){n&1&&(a(0,"span",10),l(1,"\u2022"),r())}function qe(n,t){if(n&1&&(a(0,"span",20),l(1),r(),d(2,je,2,0,"span",10)),n&2){s();let e=b(0);P(e.ActorClass),i(),u(" ",e.DamageDetails," "),i(),m(e.AdditionalDetails.length>0?2:-1)}}function Ye(n,t){n&1&&(a(0,"span",10),l(1,"\u2022"),r())}function Qe(n,t){if(n&1&&(a(0,"span",20),l(1),d(2,Ye,2,0,"span",10),r()),n&2){let e=t.$implicit,o=t.$index;s(2);let p=b(0);P(e.class),i(),u(" ",e.value," "),i(),m(o<p.AdditionalDetails.length-1?2:-1)}}function We(n,t){if(n&1&&M(0,Qe,3,4,"span",21,N),n&2){s();let e=b(0);y(e.AdditionalDetails)}}function Xe(n,t){n&1&&(a(0,"span",10),l(1,"\u2022"),r())}function Je(n,t){if(n&1&&(a(0,"span",20),l(1),z(2,"number"),d(3,Xe,2,0,"span",10),r()),n&2){let e=t.$implicit,o=t.$index,p=t.$count,O=s(3).$implicit;v("log-multi",O.IsMultiHit&&!e.IsCritical&&!e.IsBleeding&&!e.IsSplash)("log-critical",e.IsCritical)("log-bleed",e.IsBleeding)("log-splash",e.IsSplash),i(),u(" ",F(2,10,e.Amount,"1.0-0")," "),i(2),m(o!==p-1?3:-1)}}function Ze(n,t){if(n&1&&(a(0,"div",19),l(1," [ "),M(2,Je,4,13,"span",22,N),l(4," ] "),r()),n&2){let e=s(2).$implicit;i(2),y(e.Damage)}}function et(n,t){if(n&1&&(w(0),a(1,"div",4)(2,"div",14),c(3,"app-combat-actor-icon",15),a(4,"span"),l(5),r(),c(6,"app-combat-actor-icon",16),a(7,"span",10),l(8,"\u2022"),r(),a(9,"span",17),l(10),z(11,"number"),r()(),a(12,"div",18),d(13,qe,3,4),d(14,We,2,0),r(),d(15,Ze,5,0,"div",19),r()),n&2){let e=s().$implicit,o=S(s().DamageLogEntryExtended(e));i(3),P(o.ActorClass),g("Actor",e.Actor),i(2),C(o.ActionContent),i(),g("Actor",e.Target),i(3),P(o.ActorClass),i(),u(" ",F(11,12,o.TotalDamage,"1.0-0")," "),i(3),m(o.DamageDetails.length>0?13:-1),i(),m(o.AdditionalDetails.length>0?14:-1),i(),m(e.Damage.length>1?15:-1)}}function tt(n,t){if(n&1&&(c(0,"app-combat-actor-icon",23),a(1,"span",24),l(2,"MISS"),r()),n&2){let e=s().$implicit;g("Actor",e.Actor)}}function nt(n,t){if(n&1&&(c(0,"app-icon",25)(1,"app-combat-actor-icon",26),a(2,"span",27),l(3),z(4,"number"),r()),n&2){let e=s().$implicit;i(),g("Actor",e.Target),i(2),u("+",F(4,2,e.Amount,"1.0-0")," LIFE")}}function ot(n,t){if(n&1&&c(0,"app-icon",28)(1,"app-combat-actor-icon",29),n&2){let e=s().$implicit;i(),g("Actor",e.Actor)}}function it(n,t){if(n&1&&(c(0,"separator",1),d(1,Fe,1,1,"separator",1),a(2,"div",2),d(3,Ke,2,1,"span",3)(4,Ue,12,5)(5,et,16,15,"div",4)(6,tt,3,1)(7,nt,5,5)(8,ot,2,1),r()),n&2){let e,o=t.$implicit;g("margin",!1),i(),m(o.Type=="Rewards"?1:-1),i(2),m((e=o.Type)==="Info"?3:e==="Rewards"?4:e==="Damage"?5:e==="Miss"?6:e==="Heal"?7:e==="Death"?8:-1)}}var X=class n{Log=f(De);Entries=this.Log.Entries;VisibleEntries=_(()=>this.Entries());DamageLogEntryExtended(t){let e=t.Damage.reduce((o,p)=>o+p.Amount,0);return{ActorClass:this.DamageActorClass(t),ActionContent:this.ActionContent(t),TotalDamage:e,DamageDetails:this.DamageDetails(t),AdditionalDetails:this.AdditionalDetails(t)}}DamageActorClass(t){let e=L(t.Damage);return e&&t.IsMultiHit?"log-critical-multi":t.IsMultiHit?"log-multi":e?"log-critical":""}ActionContent(t){let e=L(t.Damage);return e&&t.IsMultiHit?"\u26A1\u2694\uFE0F":t.IsMultiHit?"\u2694\uFE0F":e?"\u26A1":"\u{1F5E1}\uFE0F"}DamageDetails(t){let e="HIT";if(t.IsMultiHit){let o=ue(t.Damage);e="MULTI "+e+" [x"+o+"]"}return L(t.Damage)&&(e="CRITICAL "+e),e==="HIT"?"":e}AdditionalDetails(t){let e=[];return K(t.Damage)&&e.push({value:"BLEEDING",class:"log-bleed"}),_e(t.Damage)&&e.push({value:"CHARGED",class:"log-charged"}),$(t.Damage)&&e.push({value:"SPLASH",class:"log-splash"}),e}FormatTimestamp(t){return me.FormatTimestamp(t)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-combat-log"]],decls:3,vars:0,consts:[[1,"log-list"],[1,"ih-separator",3,"margin"],[1,"log-entry"],[1,"log-info"],[1,"log-damage-entry"],["symbol","lockedchest","size","md",1,"log-rewards"],[1,"log-rewards-entry"],[1,"log-rewards-header"],[1,"log-rewards-values"],["size","sm","fontSize","1.2rem",3,"amount"],[1,"dot"],["size","sm","fontSize","1.2rem",3,"exp"],["size","sm","fontSize","1.2rem",3,"rune"],["symbol","skeletonkey","size","sm","fontSize","1.2rem"],[1,"log-damage-header"],["Size","md",3,"Actor"],["Size","md",1,"log-damage",3,"Actor"],[1,"log-damage","total-damage"],[1,"log-damage-details"],[1,"log-damage-values"],[1,"log-damage"],[1,"log-damage",3,"class"],[1,"log-damage",3,"log-multi","log-critical","log-bleed","log-splash"],["Size","md",1,"log-miss",3,"Actor"],[1,"log-miss"],["combat","heartplus","size","sm",1,"log-heal"],["Size","md",1,"log-heal",3,"Actor"],[1,"log-heal"],["combat","hastygrave","size","sm",1,"log-death"],["Size","md",1,"log-death",3,"Actor"]],template:function(e,o){e&1&&(a(0,"div",0),M(1,it,9,3,null,null,le),r()),e&2&&(i(),y(o.VisibleEntries()))},dependencies:[W,h,H,j,U,Y,ce],styles:["@-webkit-keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.common--border[_ngcontent-%COMP%]{border-color:#a0a0a0}.magic--border[_ngcontent-%COMP%]{border-color:#3b82f6}.rare--border[_ngcontent-%COMP%]{border-color:#eee000}.epic--border[_ngcontent-%COMP%]{border-color:#8b5cf6}.legendary--border[_ngcontent-%COMP%]{border-color:#f80}.common--font[_ngcontent-%COMP%]{color:#e5e5e5}.magic--font[_ngcontent-%COMP%]{color:#3b82f6}.rare--font[_ngcontent-%COMP%]{color:#eee000}.epic--font[_ngcontent-%COMP%]{color:#8b5cf6}.legendary--font[_ngcontent-%COMP%]{color:#f80}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}.log-list[_ngcontent-%COMP%]{background:linear-gradient(315deg,#181f2b,#202939);border-radius:8px;border:2px solid #e5e5e5;box-shadow:0 8px 20px #02020699;max-height:78vh;overflow-y:auto;scroll-behavior:smooth;display:flex;flex-direction:column;gap:6px;padding:6px;min-width:575px}.log-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:25px;height:25px;background:#181f2b;border-radius:1rem}.log-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:1rem;box-shadow:inset 0 0 5px #181f2b}.log-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(270deg,#9a0000,#5c0000);border-radius:1rem}.log-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(90deg,#9a0000,#e10000)}@media (max-width: 1920px){.log-list[_ngcontent-%COMP%]{display:flex;max-height:44vh;overflow-y:auto}}.log-entry[_ngcontent-%COMP%]{margin-left:12px}.log-entry[_ngcontent-%COMP%], .log-damage-entry[_ngcontent-%COMP%], .log-rewards-entry[_ngcontent-%COMP%], .log-damage-header[_ngcontent-%COMP%], .log-rewards-header[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-wrap:wrap;gap:6px;align-items:center;justify-items:center;font-size:1.2rem}.log-damage-entry[_ngcontent-%COMP%], .log-rewards-entry[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;justify-items:flex-end}.log-damage-values[_ngcontent-%COMP%], .log-rewards-values[_ngcontent-%COMP%], .log-damage-details[_ngcontent-%COMP%]{display:flex;gap:6px}.total-damage[_ngcontent-%COMP%]{font-size:1.3rem}.log-damage-details[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap}.log-damage-values[_ngcontent-%COMP%]{flex-wrap:wrap;font-size:1rem}.log-time[_ngcontent-%COMP%]{color:#e5e5e5;min-width:65px}.log-info[_ngcontent-%COMP%]{color:#6fc072;font-weight:700}.log-rewards[_ngcontent-%COMP%], .log-rewards-header[_ngcontent-%COMP%]{color:#d4af37;font-weight:700}.log-damage[_ngcontent-%COMP%]{color:#ddd;font-weight:700}.log-bleed[_ngcontent-%COMP%]{color:#e44;font-weight:700}.log-charged[_ngcontent-%COMP%]{color:#fbbf24;font-weight:700}.log-splash[_ngcontent-%COMP%]{color:#128aaf;font-weight:700}.log-miss[_ngcontent-%COMP%]{color:#888}.log-heal[_ngcontent-%COMP%]{color:#22c55e;font-weight:700}.log-death[_ngcontent-%COMP%]{color:#ff2929;font-weight:700}.log-critical[_ngcontent-%COMP%]{color:#eee000;font-weight:700}.log-multi[_ngcontent-%COMP%]{color:#8b5cf6;font-weight:700}.log-critical-multi[_ngcontent-%COMP%]{color:#f80;font-weight:700}.level-up[_ngcontent-%COMP%], .log-dungeon-cleared[_ngcontent-%COMP%]{color:#0af;font-weight:700}.dot[_ngcontent-%COMP%]{color:#ddd}"],changeDetection:0})};var at=(n,t)=>t.Tick;function rt(n,t){if(n&1&&(a(0,"h2",5),l(1),r()),n&2){s(3);let e=b(0);i(),u("ELITE ",e.Name)}}function lt(n,t){if(n&1&&(a(0,"h2",5),l(1),r()),n&2){s(3);let e=b(0);i(),u("END BOSS ",e.Name)}}function st(n,t){if(n&1&&(a(0,"h2",5),l(1),r()),n&2){s(3);let e=b(0);i(),C(e.Name)}}function ct(n,t){if(n&1&&c(0,"div",14),n&2){let e=t.$implicit;v("active",e.IsActive)}}function dt(n,t){if(n&1&&(a(0,"div",7)(1,"div",10),c(2,"app-icon",11),r(),a(3,"div",12),M(4,ct,1,2,"div",13,at),r()()),n&2){let e=s(3);i(4),y(e.BleedingTicks())}}function mt(n,t){if(n&1&&(a(0,"div",4),d(1,rt,2,1,"h2",5)(2,lt,2,1,"h2",5)(3,st,2,1,"h2",5),c(4,"app-health-bar",6),d(5,dt,6,0,"div",7),r(),a(6,"div",8),c(7,"app-icon",9),r()),n&2){let e=s(2),o=b(0);i(),m(o.IsElite?1:o.IsEndboss?2:3),i(3),g("currentHealth",o.Life.Hp)("maxHealth",o.Life.MaxHp)("showHealthValues",!0),i(),m(o.State.IsBleeding?5:-1),i(),v("taking-hit",e.isBossTakingHit())("defeated",e.isBossDefeated()),i(),g("creatures",o.BossIcon.Icon)("rotate",o.BossIcon.Rotate)}}function gt(n,t){n&1&&(a(0,"div",2)(1,"div",15),l(2,"VS"),r()())}function pt(n,t){if(n&1&&(a(0,"div",16),c(1,"app-icon",17),r(),a(2,"div",18)(3,"h2",19),l(4),r(),c(5,"app-charge-bar",20),r()),n&2){let e=s(2),o=b(1);v("attack",e.isAttacking())("crit",e.isCrit())("multi",e.isMulti())("crit-multi",e.isCritMulti())("bleed",e.isBleed())("splash",e.isSplash()),i(),g("character",o.HeroIcon),i(3),C(o.Name),i(),g("current",o.Charge.Current)("max",o.Charge.Max)("charged",o.Charge.Charged)("chargeDurationSeconds",o.Stats.ChargeDuration)("showValues",!0)}}function ut(n,t){if(n&1&&(a(0,"section",0)(1,"div",1),d(2,mt,8,11),r(),d(3,gt,3,0,"div",2),a(4,"div",3),d(5,pt,6,19),r()()),n&2){s();let e=b(0),o=b(1);i(2),m(e?2:-1),i(),m(e?3:-1),i(2),m(o?5:-1)}}var J=class n{eventSub;heroSub;bossSub;combat=f(V);Hero=D(void 0);Boss=D(void 0);BleedingTicks=_(()=>{let t=this.Boss();if(!t)return[];if(!t.State.IsBleeding||!t.State.BleedingState)return[];let e=[];for(let o=1;o<=t.State.BleedingState.TotalTicks;o++)e.push({Tick:o,IsActive:o>t.State.BleedingState.Tick});return e.reverse()});RotateBossIcon=_(()=>this.Boss()?.BossIcon?.Rotate??!1);isAttacking=D(!1);isCrit=D(!1);isMulti=D(!1);isCritMulti=D(!1);isBleed=D(!1);isSplash=D(!1);isBossTakingHit=D(!1);isBossDefeated=D(!1);HeroAttackAnimationDurationCss=_(()=>`${this.GetHeroAttackAnimationDurationMs()}ms`);HeroMultiAnimationDurationCss=_(()=>`${this.GetHeroMultiAnimationDurationMs()}ms`);BossHitAnimationDurationCss=_(()=>`${this.GetBossHitAnimationDurationMs()}ms`);BossDefeatAnimationDurationCss=_(()=>`${this.GetBossDefeatedAnimationDurationMs()}ms`);attackTimer=null;critTimer=null;multiTimer=null;critMultiTimer=null;bleedTimer=null;splashTimer=null;isBossTakingHitTimer=null;bossDefeatedTimer=null;constructor(){this.heroSub=this.combat.Hero$.subscribe(t=>{if(!t){this.Hero.set(void 0);return}this.Hero.set(oe({},t))}),this.bossSub=this.combat.Boss$.subscribe(t=>{if(!t){this.Boss.set(void 0);return}this.Boss.set(oe({},t))}),this.eventSub=this.combat.Events$.subscribe(t=>{if(t.Type==="Attack"&&(this.isAttacking.set(!0),this.attackTimer&&clearTimeout(this.attackTimer),this.attackTimer=setTimeout(()=>this.isAttacking.set(!1),this.GetHeroAttackAnimationDurationMs())),t.Type==="Damage"){let e=t;this.isBossTakingHit.set(!0),this.isBossTakingHitTimer&&clearTimeout(this.isBossTakingHitTimer),this.isBossTakingHitTimer=setTimeout(()=>this.isBossTakingHit.set(!1),this.GetBossHitAnimationDurationMs()),$(e.Damage)?(this.isSplash.set(!0),this.splashTimer&&clearTimeout(this.splashTimer),this.splashTimer=setTimeout(()=>this.isSplash.set(!1),this.GetHeroEffectAnimationDurationMs())):Ce(e.Damage)?(this.isCritMulti.set(!0),this.critMultiTimer&&clearTimeout(this.critMultiTimer),this.critMultiTimer=setTimeout(()=>this.isCritMulti.set(!1),this.GetHeroEffectAnimationDurationMs())):fe(e.Damage)?(this.isMulti.set(!0),this.multiTimer&&clearTimeout(this.multiTimer),this.multiTimer=setTimeout(()=>this.isMulti.set(!1),this.GetHeroEffectAnimationDurationMs())):L(e.Damage)?(this.isCrit.set(!0),this.critTimer&&clearTimeout(this.critTimer),this.critTimer=setTimeout(()=>this.isCrit.set(!1),this.GetHeroEffectAnimationDurationMs())):K(e.Damage)&&(this.isBleed.set(!0),this.bleedTimer&&clearTimeout(this.bleedTimer),this.bleedTimer=setTimeout(()=>this.isBleed.set(!1),this.GetHeroEffectAnimationDurationMs()))}t.Type==="Death"&&t.Actor&&(this.isBossDefeated.set(!0),this.bossDefeatedTimer&&clearTimeout(this.bossDefeatedTimer),this.bossDefeatedTimer=setTimeout(()=>this.isBossDefeated.set(!1),this.GetBossDefeatedAnimationDurationMs()))})}GetBossDefeatedAnimationDurationMs(){let t=this.GetBossRespawnDelayMs(),e=Math.round(t);return re.clamp(e,G.BOSS_RESPAWN_ANIMATION_MIN_MS,G.BOSS_RESPAWN_ANIMATION_MAX_MS)}GetBossHitAnimationDurationMs(){return this.GetScaledDurationByAttackInterval(300,140,420)}GetHeroAttackAnimationDurationMs(){return this.GetScaledDurationByAttackInterval(240,120,360)}GetHeroMultiAnimationDurationMs(){return this.GetScaledDurationByAttackInterval(300,140,420)}GetHeroEffectAnimationDurationMs(){return this.GetScaledDurationByAttackInterval(500,180,700)}GetBossRespawnDelayMs(){let t=this.Hero();return pe(t?.AttackInterval)}GetScaledDurationByAttackInterval(t,e,o){let O=this.Hero()?.AttackInterval.AttackIntervalMs??1e3,ne=Math.round(t*O/1e3);return re.clamp(ne,e,o)}ngOnDestroy(){this.heroSub?.unsubscribe(),this.bossSub?.unsubscribe(),this.eventSub?.unsubscribe(),this.attackTimer&&clearTimeout(this.attackTimer),this.critTimer&&clearTimeout(this.critTimer),this.multiTimer&&clearTimeout(this.multiTimer),this.critMultiTimer&&clearTimeout(this.critMultiTimer),this.bleedTimer&&clearTimeout(this.bleedTimer),this.splashTimer&&clearTimeout(this.splashTimer),this.isBossTakingHitTimer&&clearTimeout(this.isBossTakingHitTimer),this.bossDefeatedTimer&&clearTimeout(this.bossDefeatedTimer)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-dungeon-arena"]],hostVars:8,hostBindings:function(e,o){e&2&&se("--hero-attack-animation-ms",o.HeroAttackAnimationDurationCss())("--hero-multi-animation-ms",o.HeroMultiAnimationDurationCss())("--boss-hit-animation-ms",o.BossHitAnimationDurationCss())("--boss-defeat-animation-ms",o.BossDefeatAnimationDurationCss())},decls:3,vars:3,consts:[[1,"combat"],[1,"boss"],[1,"arena"],[1,"hero"],[1,"actor-info"],[1,"actor-name"],[3,"currentHealth","maxHealth","showHealthValues"],[1,"bleed-info"],[1,"boss-icon"],["size","5x",1,"icon",3,"creatures","rotate"],["title","Bleeding",1,"bleeding-icon"],["combat","bleedingwound","size","md"],[1,"bleeding-ticks"],[1,"bleed-tick",3,"active"],[1,"bleed-tick"],[1,"vs"],[1,"hero-icon"],["size","4x",1,"icon",3,"character"],[1,"actor-info","bottom"],[1,"actor-name","right"],[3,"current","max","charged","chargeDurationSeconds","showValues"]],template:function(e,o){if(e&1&&(w(0)(1),d(2,ut,6,3,"section",0)),e&2){let p=S(o.Boss());i();let O=S(o.Hero());i(),m(O||p?2:-1)}},dependencies:[Oe,h,Pe],styles:["@-webkit-keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.common--border[_ngcontent-%COMP%]{border-color:#a0a0a0}.magic--border[_ngcontent-%COMP%]{border-color:#3b82f6}.rare--border[_ngcontent-%COMP%]{border-color:#eee000}.epic--border[_ngcontent-%COMP%]{border-color:#8b5cf6}.legendary--border[_ngcontent-%COMP%]{border-color:#f80}.common--font[_ngcontent-%COMP%]{color:#e5e5e5}.magic--font[_ngcontent-%COMP%]{color:#3b82f6}.rare--font[_ngcontent-%COMP%]{color:#eee000}.epic--font[_ngcontent-%COMP%]{color:#8b5cf6}.legendary--font[_ngcontent-%COMP%]{color:#f80}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}.combat[_ngcontent-%COMP%]{background:linear-gradient(315deg,#181f2b,#202939);padding:12px;border-radius:8px;border:2px solid #e5e5e5;box-shadow:0 8px 20px #02020699;display:flex;flex-direction:column;gap:12px}.actor-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;padding:0 6px}.actor-name[_ngcontent-%COMP%]{color:#d4af37}.right[_ngcontent-%COMP%]{margin:0 0 0 auto;padding-right:6px}.bottom[_ngcontent-%COMP%]{margin:auto 0 0}.boss[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr;gap:6px}.hero[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr;gap:6px}.hero-icon[_ngcontent-%COMP%], .boss-icon[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:6px}.arena[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center}.vs[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:#d4af37;font-family:Cinzel Decorative,serif;font-size:2rem;font-weight:900}.bleed-info[_ngcontent-%COMP%]{display:inline-flex;gap:12px}.bleed-info[_ngcontent-%COMP%]   .bleeding-icon[_ngcontent-%COMP%]{color:#8a0303;border-radius:50%;border-style:solid;border-color:#8a0303;padding:4px;background-color:#e5e5e5}.bleed-info[_ngcontent-%COMP%]   .bleeding-ticks[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:3px}.bleed-info[_ngcontent-%COMP%]   .bleeding-ticks[_ngcontent-%COMP%]   .bleed-tick[_ngcontent-%COMP%]{width:50px;height:25px;border-radius:12px;border-style:solid;border-color:#0f0f0f;background-color:#8a0303;opacity:.5}.bleed-info[_ngcontent-%COMP%]   .bleeding-ticks[_ngcontent-%COMP%]   .bleed-tick.active[_ngcontent-%COMP%]{opacity:1}.icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_idle-bob 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_idle-bob{0%{transform:translateY(0)}50%{transform:translateY(-6px)}to{transform:translateY(0)}}.hero-icon.attack[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_hero-attack var(--hero-attack-animation-ms, .24s) ease-out}.hero-icon.crit[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{filter:drop-shadow(0 0 10px #eee000)}.hero-icon.multi[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_hero-multi-attack var(--hero-multi-animation-ms, .3s) ease-out;filter:drop-shadow(0 0 15px #8b5cf6)}.hero-icon.crit-multi[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_hero-multi-attack var(--hero-multi-animation-ms, .3s) ease-out;filter:drop-shadow(0 0 20px #ff8800)}.hero-icon.bleed[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{filter:drop-shadow(0 0 20px #ee4444)}.hero-icon.splash[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_hero-multi-attack var(--hero-multi-animation-ms, .3s) ease-out;filter:drop-shadow(0 0 30px #128aaf)}@keyframes _ngcontent-%COMP%_hero-attack{0%{transform:translate(0) scale(1)}40%{transform:translate(10px) scale(1.05)}to{transform:translate(0) scale(1)}}@keyframes _ngcontent-%COMP%_hero-multi-attack{0%{transform:translate(0) scale(1)}25%{transform:translate(20px) scale(1.2)}70%{transform:translate(-10px) scale(1.2)}to{transform:translate(0) scale(1)}}.boss-icon.taking-hit[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_boss-hit var(--boss-hit-animation-ms, .3s) ease-out;filter:drop-shadow(0 0 5px rgb(255,41.4,41.4))}.boss-icon.defeated[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_boss-defeat var(--boss-defeat-animation-ms, .6s) ease-in forwards;filter:grayscale(100%) brightness(50%)}@keyframes _ngcontent-%COMP%_boss-hit{0%{transform:translate(0) scale(1)}50%{transform:translate(10px) scale(.95)}to{transform:translate(0) scale(1)}}@keyframes _ngcontent-%COMP%_boss-defeat{0%{transform:translateY(0) rotate(0) scale(1);opacity:1}to{transform:translateY(50%) rotate(360deg) scale(0);opacity:0}}"]})};function ft(n,t){if(n&1&&(a(0,"div",8),l(1,"\u2022"),r(),a(2,"div",10),c(3,"app-icon",11),a(4,"span",12),l(5),r()()),n&2){let e=s();i(3),g("rotate",!0),i(2),u(" [x",e.MimicsDefeated(),"] ")}}function _t(n,t){if(n&1&&(a(0,"div",8),l(1,"\u2022"),r(),a(2,"div",13),c(3,"app-icon",14),a(4,"span",15),l(5),r()()),n&2){let e=s();i(3),g("rotate",!1),i(2),u(" [x",e.DjinnsEncountered(),"] ")}}function Ct(n,t){n&1&&(a(0,"div",8),l(1,"\u2022"),r())}function bt(n,t){if(n&1&&(a(0,"div",6),c(1,"app-rune",19),r(),d(2,Ct,2,0,"div",8)),n&2){let e=t.$implicit,o=t.$index,p=t.$count;i(),g("rune",e)("fontSize","1.2rem"),i(),m(o!==p-1?2:-1)}}function xt(n,t){if(n&1&&(a(0,"div",16)(1,"h3"),l(2,"Runes"),r(),a(3,"p",17),l(4),r()(),a(5,"div",18),M(6,bt,3,3,null,null,N),r()),n&2){let e=s();i(4),u("[",e.RuneCount(),"]"),i(2),y(e.Runes())}}var Z=class n{dungeonRoom=f(A);dungeonRun=f(xe);CurrentDungeonId=this.dungeonRoom.CurrentDungeonId;DungeonId=this.dungeonRun.DungeonId;StageReached=this.dungeonRun.StageReached;MimicsDefeated=this.dungeonRun.MimicsDefeated;DjinnsEncountered=this.dungeonRun.DjinnsEncountered;Gold=this.dungeonRun.Gold;Experience=this.dungeonRun.Experience;Runes=this.dungeonRun.Runes;RuneCount=this.dungeonRun.RuneCount;IsRunning=this.dungeonRun.IsRunning;ElapsedTime=this.dungeonRun.ElapsedFormatted;Show(){return this.CurrentDungeonId()===this.DungeonId()&&(this.IsRunning()||this.StageReached()>0)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-dungeon-rewards"]],decls:23,vars:14,consts:[[1,"rewards-panel"],[1,"header"],[1,"title"],["title","Elapsed Time",1,"elapsed-time"],[1,"ih-separator"],[1,"rewards"],[1,"reward-item"],["size","sm","title","Gold Rewards",3,"amount","fontSize"],[1,"dot"],["size","sm","title","Gained Experience",3,"exp","fontSize"],["title","Mimics Defeated",1,"mimics"],["creatures","mimicchest","size","sm",3,"rotate"],[1,"mimics-count"],["title","Djinns Encountered",1,"djinns"],["creatures","djinn","size","sm",3,"rotate"],[1,"djinns-count"],[1,"runes-header"],[1,"rune-count"],["title","Rune Rewards",1,"rewards-runes"],["size","sm",3,"rune","fontSize"]],template:function(e,o){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),l(4),r(),a(5,"div")(6,"h4"),l(7),r()(),a(8,"div",3),l(9),r()(),c(10,"separator",4),r(),a(11,"div",5)(12,"h3"),l(13,"Rewards"),r(),a(14,"div",6),c(15,"app-gold",7),r(),a(16,"div",8),l(17,"\u2022"),r(),a(18,"div",6),c(19,"app-exp",9),r(),d(20,ft,6,2),d(21,_t,6,2),r(),d(22,xt,8,1),r()),e&2&&(v("hidden",!o.Show()),i(4),u("",o.IsRunning()?"":"COMPLETED ","DUNGEON RUN"),i(),v("hidden",o.IsRunning()||o.StageReached()===0),i(2),u("Reached Stage ",o.StageReached()),i(2),C(o.ElapsedTime()),i(6),g("amount",o.Gold())("fontSize","1.2rem"),i(4),g("exp",o.Experience())("fontSize","1.2rem"),i(),m(o.MimicsDefeated()>0?20:-1),i(),m(o.DjinnsEncountered()>0?21:-1),i(),m(o.RuneCount()>0?22:-1))},dependencies:[j,U,Y,H,h],styles:["@-webkit-keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.common--border[_ngcontent-%COMP%]{border-color:#a0a0a0}.magic--border[_ngcontent-%COMP%]{border-color:#3b82f6}.rare--border[_ngcontent-%COMP%]{border-color:#eee000}.epic--border[_ngcontent-%COMP%]{border-color:#8b5cf6}.legendary--border[_ngcontent-%COMP%]{border-color:#f80}.common--font[_ngcontent-%COMP%]{color:#e5e5e5}.magic--font[_ngcontent-%COMP%]{color:#3b82f6}.rare--font[_ngcontent-%COMP%]{color:#eee000}.epic--font[_ngcontent-%COMP%]{color:#8b5cf6}.legendary--font[_ngcontent-%COMP%]{color:#f80}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}.rewards-panel[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background:linear-gradient(315deg,#181f2b,#202939);padding:12px;border-radius:8px;border:2px solid #e5e5e5;box-shadow:0 8px 20px #02020699;display:flex;flex-direction:column;gap:12px 0}.hidden[_ngcontent-%COMP%]{display:none}.header[_ngcontent-%COMP%]{display:flex;flex-direction:column}.header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:12px;justify-content:space-between}.header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#d4af37}.header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .elapsed-time[_ngcontent-%COMP%]{font-size:1rem;color:#888}.rewards[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:12px;align-items:center}.rewards-runes[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;gap:12px}.runes-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:6px}.runes-header[_ngcontent-%COMP%]   .rune-count[_ngcontent-%COMP%]{font-size:1rem;color:#888}.mimics[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:6px;color:#d4af37}.mimics[_ngcontent-%COMP%]   .mimics-count[_ngcontent-%COMP%]{font-size:1rem;color:#888}.djinns[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:6px;color:#2196f3}.djinns[_ngcontent-%COMP%]   .djinns-count[_ngcontent-%COMP%]{font-size:1rem;color:#888}.dot[_ngcontent-%COMP%]{align-self:center}"],changeDetection:0})};var Mt=(n,t)=>t.Definition.Id;function yt(n,t){n&1&&(a(0,"p",1),l(1,"Unlock Buffs or Effects in the Skill Tree to use them in combat."),r())}function ht(n,t){if(n&1&&(a(0,"span",12),l(1),r()),n&2){let e=s().$implicit;i(),u("ACTIVE \xB7 ",e.RemainingDurationSeconds,"s")}}function Dt(n,t){if(n&1&&(a(0,"span",13),l(1),r()),n&2){let e=s().$implicit;i(),u(" COOLDOWN \xB7 ",e.RemainingCooldownSeconds,"s ")}}function vt(n,t){n&1&&(a(0,"span",14),l(1,"READY"),r())}function Pt(n,t){if(n&1){let e=E();a(0,"button",4),I("click",function(){let p=T(e).$implicit,O=s(2);return k(O.ActivateSkill(p.Definition.Id))}),a(1,"div",5),c(2,"app-icon",6)(3,"separator",7),r(),a(4,"div",8)(5,"span",9),l(6),r(),a(7,"span",10),l(8),r()(),a(9,"div",11),d(10,ht,2,1,"span",12)(11,Dt,2,1,"span",13)(12,vt,2,0,"span",14),r()()}if(n&2){let e=t.$implicit,o=s(2);v("skill-button-active",e.IsActive)("skill-button-cooldown",!e.IsActive&&!e.CanActivate),g("title",e.Definition.Description)("disabled",!e.CanActivate),i(),P(o.IconClass(e.Definition)),i(),g("skills",e.Definition.Icon),i(),g("vertical",!0),i(3),C(e.Definition.Name.toUpperCase()),i(2),C(o.SkillTypeText(e.Definition)),i(2),m(e.IsActive?10:e.CanActivate?12:11)}}function Ot(n,t){if(n&1&&(a(0,"div",2),M(1,Pt,13,13,"button",3,Mt),r()),n&2){let e=s();i(),y(e.Buffs())}}var ee=class n{CombatSkills=f(ve);Buffs=_(()=>this.CombatSkills.SkillBarSkills());ActivateSkill(t){this.CombatSkills.ActivateSkill(t)}SkillTypeText(t){return he(t)}IconClass(t){switch(t.Id){case"BUFF_ATTACK_SPEED":return"skill-icon-haste";case"BUFF_BLEED_CHANCE":return"skill-icon-bleed";case"BUFF_CRIT_CHANCE":return"skill-icon-crit";case"BUFF_MULTI_HIT_CHANCE":return"skill-icon-multi";default:return""}}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-skill-bar"]],decls:5,vars:1,consts:[[1,"skill-bar"],[1,"empty-state"],[1,"skills"],[1,"skill-button",3,"title","skill-button-active","skill-button-cooldown","disabled"],[1,"skill-button",3,"click","title","disabled"],[1,"skill-icon"],["size","lg",3,"skills"],[3,"vertical"],[1,"skill-title-row"],[1,"skill-name"],[1,"skill-type"],[1,"skill-state"],[1,"state","active"],[1,"state","cooldown"],[1,"state","ready"]],template:function(e,o){e&1&&(a(0,"section",0)(1,"h3"),l(2,"COMBAT SKILLS"),r(),d(3,yt,2,0,"p",1)(4,Ot,3,0,"div",2),r()),e&2&&(i(3),m(o.Buffs().length===0?3:4))},dependencies:[h,H],styles:['@-webkit-keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.common--border[_ngcontent-%COMP%]{border-color:#a0a0a0}.magic--border[_ngcontent-%COMP%]{border-color:#3b82f6}.rare--border[_ngcontent-%COMP%]{border-color:#eee000}.epic--border[_ngcontent-%COMP%]{border-color:#8b5cf6}.legendary--border[_ngcontent-%COMP%]{border-color:#f80}.common--font[_ngcontent-%COMP%]{color:#e5e5e5}.magic--font[_ngcontent-%COMP%]{color:#3b82f6}.rare--font[_ngcontent-%COMP%]{color:#eee000}.epic--font[_ngcontent-%COMP%]{color:#8b5cf6}.legendary--font[_ngcontent-%COMP%]{color:#f80}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}.skill-bar[_ngcontent-%COMP%]{background:linear-gradient(315deg,#181f2b,#202939);padding:12px;border-radius:8px;border:2px solid #e5e5e5;box-shadow:0 8px 20px #02020699;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-direction:column;gap:6px}.skill-bar[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#d4af37}.empty-state[_ngcontent-%COMP%]{color:#888;font-size:1.1rem}.skills[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:6px 12px}@media (max-width: 1920px){.skills[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(200px,1fr))}}@media (max-width: 640px){.skills[_ngcontent-%COMP%]{grid-template-columns:1fr}}.skill-button[_ngcontent-%COMP%]{cursor:pointer;background:linear-gradient(315deg,#181f2b,#202939);padding:6px;border-radius:8px;border:1px solid unset;box-shadow:0 8px 20px #02020699;display:grid;grid:"icon title" auto "icon state" auto/auto 1fr;gap:12px;text-align:left}.skill-button[_ngcontent-%COMP%]:hover{transform:scale(1.01);transition:transform .2s}.skill-button[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.7}.skill-button.skill-button-active[_ngcontent-%COMP%]{border-color:#d4af37}.skill-button.skill-button-cooldown[_ngcontent-%COMP%]{border-color:#888}.skill-icon[_ngcontent-%COMP%]{grid-area:icon;display:flex;align-items:center;gap:6px}.skill-title-row[_ngcontent-%COMP%]{grid-area:title;display:flex;justify-content:space-between;gap:6px}.skill-title-row[_ngcontent-%COMP%]   .skill-name[_ngcontent-%COMP%]{font-family:MedievalSharp,cursive;font-weight:700;color:#d4af37;font-size:1.1rem}.skill-title-row[_ngcontent-%COMP%]   .skill-type[_ngcontent-%COMP%]{font-family:MedievalSharp,cursive;color:#888;font-size:.9rem}.skill-state[_ngcontent-%COMP%]{grid-area:state}.skill-state[_ngcontent-%COMP%]   .state[_ngcontent-%COMP%]{font-size:.95rem;font-weight:700}.skill-state[_ngcontent-%COMP%]   .state.active[_ngcontent-%COMP%]{color:#d4af37}.skill-state[_ngcontent-%COMP%]   .state.cooldown[_ngcontent-%COMP%]{color:#888}.skill-state[_ngcontent-%COMP%]   .state.ready[_ngcontent-%COMP%]{color:#0af}.skill-icon-haste[_ngcontent-%COMP%]{color:#999}.skill-icon-bleed[_ngcontent-%COMP%]{color:#8a0303}.skill-icon-crit[_ngcontent-%COMP%]{color:#eee000}.skill-icon-multi[_ngcontent-%COMP%]{color:#8b5cf6}'],changeDetection:0})};function St(n,t){if(n&1&&(a(0,"div",6),l(1,"STAGE"),r(),a(2,"div",7),l(3),r()),n&2){let e=s(2);i(3),C(e.CurrentStage())}}function Tt(n,t){if(n&1){let e=E();a(0,"button",12),I("click",function(){T(e);let p=s(3);return k(p.ExitDungeon())}),l(1,"LEAVE"),r()}}function kt(n,t){if(n&1){let e=E();a(0,"button",13),I("click",function(){T(e);let p=s(3);return k(p.Prestige())}),l(1,"PRESTIGE"),r()}}function It(n,t){if(n&1&&d(0,Tt,2,0,"button",10)(1,kt,2,0,"button",11),n&2){let e=s(2);m(e.ShowCompletion()?0:1)}}function Et(n,t){n&1&&(a(0,"button",9),c(1,"app-loading-spinner"),a(2,"h3"),l(3,"LEAVING..."),r()())}function wt(n,t){if(n&1){let e=E();a(0,"button",13),I("click",function(){T(e);let p=s(2);return k(p.StartBattle())}),l(1,"BATTLE"),r(),a(2,"button",12),I("click",function(){T(e);let p=s(2);return k(p.ExitDungeon())}),l(3,"LEAVE"),r()}}function At(n,t){if(n&1&&(a(0,"div",2),c(1,"app-icon",4),a(2,"div",5)(3,"div",6),l(4,"DUNGEON ROOM"),r(),a(5,"div",7),l(6),r()(),a(7,"div",5),d(8,St,4,1),r(),a(9,"div",8),d(10,It,2,1)(11,Et,4,0,"button",9)(12,wt,4,0),r()()),n&2){let e=s(),o=b(2);i(),g("creatures",o.Icon),i(5),C(o.Title),i(2),m(e.IsInArena()?8:-1),i(2),m(e.IsInArena()?10:e.RestartDelay()?11:12)}}function Rt(n,t){n&1&&(a(0,"div",14),c(1,"app-dungeon-rewards"),r(),c(2,"app-combat-log"))}function Bt(n,t){n&1&&(a(0,"div",15),c(1,"app-dungeon-arena")(2,"app-skill-bar")(3,"app-dungeon-rewards"),r(),c(4,"app-combat-log"))}function Lt(n,t){if(n&1&&(a(0,"div",3),d(1,Rt,3,0)(2,Bt,5,0),r()),n&2){let e=s();i(),m(e.ShowCompletion()?1:2)}}function Ht(n,t){n&1&&c(0,"app-dungeon-rewards")}var te=class n{restartTimer;combat=f(V);engine=f(ye);dungeonRoom=f(A);RestartDelay=D(!1);CurrentDungeon=this.dungeonRoom.CurrentDungeon;CurrentStage=this.dungeonRoom.CurrentStage;InCombat=this.combat.InProgress;CompletedDungeon=this.combat.Completed;IsInArena=_(()=>this.InCombat());ShowCompletion=_(()=>this.CompletedDungeon());ngOnDestroy(){this.restartTimer&&clearTimeout(this.restartTimer),this.engine.Stop()}StartBattle(){this.combat.SetupCombat(),this.engine.Start()}Prestige(){this.DelayRestart(),this.engine.Stop(),this.combat.Prestige()}ExitDungeon(){this.engine.Stop(),this.combat.Leave()}DelayRestart(){this.RestartDelay.set(!0),this.restartTimer&&clearTimeout(this.restartTimer),this.restartTimer=setTimeout(()=>{this.RestartDelay.set(!1)},G.BATTLE_RESTART_MS)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-inner-dungeon"]],decls:6,vars:4,consts:[[3,"title"],[1,"dungeon"],[1,"top-bar"],[1,"inner-dungeon"],["size","lg",3,"creatures"],[1,"room-info"],[1,"room-label"],[1,"room-value"],[1,"dungeon-actions"],["disabled","",1,"ih-button-secondary","button-leaving"],[1,"ih-button-secondary"],[1,"ih-button"],[1,"ih-button-secondary",3,"click"],[1,"ih-button",3,"click"],[1,"dungeon-completion"],[1,"dungeon-arena"]],template:function(e,o){if(e&1&&(c(0,"app-panel-header",0),a(1,"main",1),w(2),d(3,At,13,4,"div",2),d(4,Lt,3,1,"div",3)(5,Ht,1,0,"app-dungeon-rewards"),r()),e&2){g("title",o.IsInArena()?"DUNGEON ARENA":"DUNGEON ENTRANCE"),i(2);let p=S(o.CurrentDungeon());i(),m(p?3:-1),i(),m(o.IsInArena()?4:5)}},dependencies:[q,h,J,X,Te,Z,ee],styles:["@-webkit-keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.common--border[_ngcontent-%COMP%]{border-color:#a0a0a0}.magic--border[_ngcontent-%COMP%]{border-color:#3b82f6}.rare--border[_ngcontent-%COMP%]{border-color:#eee000}.epic--border[_ngcontent-%COMP%]{border-color:#8b5cf6}.legendary--border[_ngcontent-%COMP%]{border-color:#f80}.common--font[_ngcontent-%COMP%]{color:#e5e5e5}.magic--font[_ngcontent-%COMP%]{color:#3b82f6}.rare--font[_ngcontent-%COMP%]{color:#eee000}.epic--font[_ngcontent-%COMP%]{color:#8b5cf6}.legendary--font[_ngcontent-%COMP%]{color:#f80}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}.dungeon[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.inner-dungeon[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr;gap:12px}@media (max-width: 1920px){.inner-dungeon[_ngcontent-%COMP%]{grid-template-columns:1fr}}.top-bar[_ngcontent-%COMP%]{background:linear-gradient(315deg,#181f2b,#202939);padding:12px;border-radius:8px;border:2px solid #e5e5e5;box-shadow:0 8px 20px #02020699;display:flex;flex-direction:row;justify-content:flex-start;align-items:center;gap:12px}.room-info[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-weight:800;font-size:1.3rem;min-width:175px}.room-label[_ngcontent-%COMP%], .room-value[_ngcontent-%COMP%]{font-family:MedievalSharp,cursive}.room-label[_ngcontent-%COMP%]{color:#e1c773;text-align:center}.room-value[_ngcontent-%COMP%]{text-align:center}.dungeon-actions[_ngcontent-%COMP%]{display:flex;gap:12px;flex:1;justify-content:flex-end}.button-leaving[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:1rem}.dungeon-completion[_ngcontent-%COMP%], .dungeon-arena[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}"]})};function Nt(n,t){n&1&&c(0,"app-inner-dungeon")}function Gt(n,t){n&1&&c(0,"app-dungeon-rooms")}var ke=class n{dungeonRoom=f(A);CurrentDungeon=this.dungeonRoom.CurrentDungeon;IsInDungeon=_(()=>this.CurrentDungeon()!==null);EnterDungeon(t){this.dungeonRoom.EnterDungeon(t)}CanEnter(t){return this.dungeonRoom.CanEnter(t)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-game-dungeon"]],decls:2,vars:1,template:function(e,o){e&1&&d(0,Nt,1,0,"app-inner-dungeon")(1,Gt,1,0,"app-dungeon-rooms"),e&2&&m(o.IsInDungeon()?0:1)},dependencies:[Q,te],styles:["@-webkit-keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.common--border[_ngcontent-%COMP%]{border-color:#a0a0a0}.magic--border[_ngcontent-%COMP%]{border-color:#3b82f6}.rare--border[_ngcontent-%COMP%]{border-color:#eee000}.epic--border[_ngcontent-%COMP%]{border-color:#8b5cf6}.legendary--border[_ngcontent-%COMP%]{border-color:#f80}.common--font[_ngcontent-%COMP%]{color:#e5e5e5}.magic--font[_ngcontent-%COMP%]{color:#3b82f6}.rare--font[_ngcontent-%COMP%]{color:#eee000}.epic--font[_ngcontent-%COMP%]{color:#8b5cf6}.legendary--font[_ngcontent-%COMP%]{color:#f80}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}"]})};export{ke as GameDungeon};
