import{$b as ce,Aa as m,Ac as G,Ba as N,Bb as ae,Ca as ne,Cc as $,Da as y,Dc as pe,Ea as M,Fa as g,Ga as a,Ha as r,Ia as s,Ic as ue,Jc as V,Kc as U,Ma as E,Na as T,Oa as c,S as _,Ta as k,Tb as re,Ua as v,Va as l,W as O,Wa as f,X as S,Xa as u,Ya as ee,Yb as le,a as Z,ab as w,ba as h,bb as I,cb as b,dc as se,ec as de,fb as H,gb as z,gc as K,ha as i,hc as me,ic as B,lb as x,nb as te,oa as C,sb as oe,vc as P,xc as L,yb as F,za as d,zb as ie,zc as ge}from"./chunk-4JWPBNUP.js";var fe=(n,t)=>t.Type,Ce=(n,t)=>t.Id,be=(n,t)=>t.Quality;function xe(n,t){if(n&1&&(a(0,"div",11),s(1,"app-icon",15),a(2,"div",16),l(3),r()()),n&2){let e=t.$implicit,o=c(3);g("title",e.Quality),i(),v(o.GetRuneQualityClass(e.Quality)),i(),v(o.GetRuneQualityClass(e.Quality)),i(),u(" ",e.Quality," ")}}function ye(n,t){if(n&1&&(a(0,"div",13),s(1,"app-icon",17),a(2,"div"),l(3),r()()),n&2){c();let e=b(0),o=c(2);i(),v(o.GetDungeonKeyColorClass(e)),i(),v(o.GetDungeonKeyColorClass(e)),i(),u(" ",e," ")}}function Me(n,t){if(n&1){let e=E();a(0,"button",18),T("click",function(){O(e);let p=c().$implicit,D=c(2);return S(D.EnterDungeon(p.Id))}),l(1," ENTER "),r()}if(n&2){let e=c().$implicit,o=c(2);g("disabled",!o.CanEnter(e.Id))}}function he(n,t){if(n&1&&(w(0),a(1,"div",4),s(2,"app-icon",5),a(3,"div",6)(4,"h3",7),l(5),r(),a(6,"div",8),l(7),r(),a(8,"div",9)(9,"span"),l(10),r()(),a(11,"div",9)(12,"span"),l(13),r()(),a(14,"div",10),y(15,xe,4,6,"div",11,be),r()(),a(17,"div",12),d(18,ye,4,5,"div",13)(19,Me,2,1,"button",14),r()()),n&2){let e=t.$implicit,o=c().$implicit,p=c(),D=I(p.GetDungeonPrerequisiteKey(e));i(2),g("creatures",e.Icon),i(3),ee("",e.Id," \u2022 ",e.Title.toUpperCase()),i(2),f(e.Description),i(3),ee("Stages: ",e.StagesBase," - ",e.StagesMax),i(3),u("Elites: ",e.MidStages.join(" | ")),i(2),M(p.GetRuneDrops(e)),i(3),m(o.Type==="Capstone"&&D&&!p.HasDungeonPrerequisiteKey(e)?18:19)}}function De(n,t){if(n&1&&(a(0,"div",2)(1,"h3",3),l(2),r(),y(3,he,20,9,"div",4,Ce),r()),n&2){let e=t.$implicit;i(2),f(e.Title),i(),M(e.Dungeons)}}var j=class n{dungeonRoom=_(B);dungeonKey=_(se);RuneQualityOrder=["Common","Magic","Rare","Epic","Legendary"];Dungeons=ie();DungeonGroups=x(()=>[{Title:"DUNGEONS",Type:"Normal",Dungeons:this.Dungeons.filter(t=>t.Type==="Normal")},{Title:"CAPSTONE DUNGEONS",Type:"Capstone",Dungeons:this.Dungeons.filter(t=>t.Type==="Capstone")}]);UnlocksByDungeonId=x(()=>this.Dungeons.reduce((t,e)=>{let o=e.Rewards.Key;return o&&(t[e.Id]=[{Label:`${o}`,Key:o,Symbol:"skeletonkey",ColorClass:this.GetDungeonKeyColorClass(o)}]),t},{}));EnterDungeon(t){this.dungeonRoom.EnterDungeon(t)}CanEnter(t){return this.dungeonRoom.CanEnter(t)}GetUnlocks(t){return this.UnlocksByDungeonId()[t]??[]}GetRuneDrops(t){return this.RuneQualityOrder.map(e=>({Quality:e,Chance:t.Rewards.RuneDropChances[e]??0})).filter(e=>e.Chance>0)}GetRuneDropChanceLabel(t){return`${Math.round(t*100)}%`}GetRuneQualityClass(t){switch(t){case"Common":return"common--font";case"Magic":return"magic--font";case"Rare":return"rare--font";case"Epic":return"epic--font";case"Legendary":return"legendary--font";default:return""}}GetDungeonKeyColorClass(t){switch(t){case"Silver Key":return"common--font";case"Magic Key":return"magic--font";case"Golden Key":return"rare--font";case"Epic Key":return"epic--font";case"Legendary Key":return"legendary--font";default:return""}}HasPrerequisiteKey(t){return this.dungeonKey.HasKey(t.Prerequisites.Key)}GetDungeonPrerequisiteKey(t){return this.IsCapstoneDungeon(t)?t.Prerequisites.Key:null}HasDungeonPrerequisiteKey(t){let e=this.GetDungeonPrerequisiteKey(t);return e?this.dungeonKey.HasKey(e):!0}HasUnlockKey(t){return this.dungeonKey.HasKey(t.Key)}IsCapstoneDungeon(t){return t.Type==="Capstone"}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=C({type:n,selectors:[["app-dungeon-rooms"]],decls:5,vars:1,consts:[[3,"title"],[1,"dungeon-list"],[1,"dungeon-group"],[1,"group-title"],[1,"dungeon-card"],["size","lg",3,"creatures"],[1,"dungeon-info"],[1,"dungeon-title"],[1,"dungeon-desc"],[1,"dungeon-meta"],[1,"dungeon-rewards","runes"],[1,"rewards-icon-item","rune-drop-item",3,"title"],[1,"entry-button-area"],[1,"rewards-icon-item","prerequisite-item"],[1,"ih-button",3,"disabled"],["symbol","runestone","size","mini",1,"rune-drop-icon"],[1,"rune-drop-quality"],["symbol","skeletonkey","size","mini"],[1,"ih-button",3,"click","disabled"]],template:function(e,o){e&1&&(a(0,"section"),s(1,"app-panel-header",0),a(2,"div",1),y(3,De,5,1,"div",2,fe),r()()),e&2&&(i(),g("title","DUNGEONS"),i(2),M(o.DungeonGroups()))},dependencies:[V,P],styles:["@-webkit-keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.common--border[_ngcontent-%COMP%]{border-color:#a0a0a0}.magic--border[_ngcontent-%COMP%]{border-color:#3b82f6}.rare--border[_ngcontent-%COMP%]{border-color:#eee000}.epic--border[_ngcontent-%COMP%]{border-color:#8b5cf6}.legendary--border[_ngcontent-%COMP%]{border-color:#f80}.common--font[_ngcontent-%COMP%]{color:#e5e5e5}.magic--font[_ngcontent-%COMP%]{color:#3b82f6}.rare--font[_ngcontent-%COMP%]{color:#eee000}.epic--font[_ngcontent-%COMP%]{color:#8b5cf6}.legendary--font[_ngcontent-%COMP%]{color:#f80}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}.dungeon-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.dungeon-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.group-title[_ngcontent-%COMP%]{color:#e5e5e5;margin:8px 0;text-align:center}.dungeon-card[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:grid;grid-template-columns:auto 1fr auto;align-items:center;gap:12px;padding:12px;border:1px solid #e5e5e5;border-radius:8px;background:#181f2b}.dungeon-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.dungeon-title[_ngcontent-%COMP%]{color:#d70000;text-shadow:-1px -1px 0 rgba(0,0,0,.5),1px -1px 0 rgba(0,0,0,.5),-1px 1px 0 rgba(0,0,0,.5),1px 1px 0 rgba(0,0,0,.5)}.dungeon-desc[_ngcontent-%COMP%]{font-size:1rem;color:#e5e5e5;font-family:MedievalSharp,cursive}.dungeon-meta[_ngcontent-%COMP%]{font-size:.8rem;color:#888}.dungeon-rewards[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;gap:6px}.rewards-icon-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.rewards-icon-item.unlock-item[_ngcontent-%COMP%]{border:1px solid rgba(229,229,229,.6);border-radius:1000px;padding:6px 12px}.rewards-icon-item.unlock-item.met[_ngcontent-%COMP%]{border-color:#d4af37a6}.rewards-icon-item.unlock-item[_ngcontent-%COMP%]   .unlock-state[_ngcontent-%COMP%]{border:1px solid rgba(229,229,229,.6);border-radius:1000px;font-size:.7rem;font-weight:700;padding:6px 12px}.rewards-icon-item.unlock-item[_ngcontent-%COMP%]   .unlock-state.met[_ngcontent-%COMP%]{border-color:#d4af37a6;color:#d4af37}.rewards-icon-item.rune-drop-item[_ngcontent-%COMP%]{border:1px solid rgba(229,229,229,.6);border-radius:1000px;gap:6px;padding:6px 12px}.rewards-icon-item.rune-drop-item[_ngcontent-%COMP%]   .rune-drop-quality[_ngcontent-%COMP%]{font-size:.8rem}.rewards-icon-item.rune-drop-item[_ngcontent-%COMP%]   .rune-drop-chance[_ngcontent-%COMP%]{border-left:1px solid rgba(229,229,229,.6);color:#e5e5e5;font-size:.7rem;font-weight:700;padding-left:6px}.rewards-icon-item.prerequisite-item[_ngcontent-%COMP%]{border:1px solid rgba(229,229,229,.65);border-radius:1000px;display:flex;gap:6px;justify-items:center;text-align:center;padding:6px 12px}"]})};function ve(n,t){if(n&1&&s(0,"app-icon",0),n&2){let e=c();g("character",e.HeroIcon)("size",e.Size())}}function Pe(n,t){if(n&1&&s(0,"app-icon",1),n&2){let e=c();g("creatures",e.BossIcon)("size",e.Size())("rotate",e.Rotate)}}var Q=class n{Actor=te.required();Size=te("sm");get ActorIsHero(){return this.Actor().HeroIcon!==void 0}get HeroIcon(){return this.Actor().HeroIcon||void 0}get ActorIsBoss(){return this.Actor().BossIcon!==void 0}get BossIcon(){return this.Actor().BossIcon.Icon||void 0}get Rotate(){return this.Actor()?.BossIcon?.Rotate||!1}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=C({type:n,selectors:[["app-combat-actor-icon"]],inputs:{Actor:[1,"Actor"],Size:[1,"Size"]},decls:2,vars:1,consts:[[3,"character","size"],[3,"creatures","size","rotate"]],template:function(e,o){e&1&&d(0,ve,1,2,"app-icon",0)(1,Pe,1,3,"app-icon",1),e&2&&m(o.ActorIsHero?0:o.ActorIsBoss?1:-1)},dependencies:[P],encapsulation:2})};function Oe(n,t){n&1&&s(0,"separator",1),n&2&&g("margin",!1)}function Se(n,t){if(n&1&&(a(0,"span",3),l(1),r()),n&2){let e=c().$implicit;i(),f(e.Message)}}function Te(n,t){if(n&1&&(a(0,"span",10),l(1,"\u2022"),r(),s(2,"app-rune",12)),n&2){let e=c(2).$implicit;i(2),g("rune",e.Rewards.Rune)}}function ke(n,t){if(n&1&&(a(0,"span",10),l(1,"\u2022"),r(),s(2,"app-icon",13)),n&2){let e=c(2).$implicit;i(2),k("common--font",e.Rewards.Key==="Silver Key")("magic--font",e.Rewards.Key==="Magic Key")("rare--font",e.Rewards.Key==="Golden Key")("epic--font",e.Rewards.Key==="Epic Key")("legendary--font",e.Rewards.Key==="Legendary Key")}}function Ie(n,t){if(n&1&&(s(0,"app-icon",5),a(1,"div",6)(2,"div",7)(3,"span"),l(4),r()(),a(5,"div",8),s(6,"app-gold",9),a(7,"span",10),l(8,"\u2022"),r(),s(9,"app-exp",11),d(10,Te,3,1),d(11,ke,3,10),r()()),n&2){let e=c().$implicit;i(4),u("Completed Stage ",e.Stage),i(2),g("amount",e.Rewards.Gold),i(3),g("exp",e.Rewards.Experience),i(),m(e.Rewards.Rune?10:-1),i(),m(e.Rewards.Key?11:-1)}}function Ee(n,t){n&1&&(a(0,"span",10),l(1,"\u2022"),r())}function we(n,t){if(n&1&&(a(0,"span",20),l(1),r(),d(2,Ee,2,0,"span",10)),n&2){c();let e=b(0);v(e.ActorClass),i(),u(" ",e.DamageDetails," "),i(),m(e.AdditionalDetails.length>0?2:-1)}}function Re(n,t){n&1&&(a(0,"span",10),l(1,"\u2022"),r())}function Ae(n,t){if(n&1&&(a(0,"span",20),l(1),d(2,Re,2,0,"span",10),r()),n&2){let e=t.$implicit,o=t.$index;c(2);let p=b(0);v(e.class),i(),u(" ",e.value," "),i(),m(o<p.AdditionalDetails.length-1?2:-1)}}function Be(n,t){if(n&1&&y(0,Ae,3,4,"span",21,N),n&2){c();let e=b(0);M(e.AdditionalDetails)}}function Le(n,t){n&1&&(a(0,"span",10),l(1,"\u2022"),r())}function Ne(n,t){if(n&1&&(a(0,"span",20),l(1),H(2,"number"),d(3,Le,2,0,"span",10),r()),n&2){let e=t.$implicit,o=t.$index,p=t.$count,D=c(3).$implicit;k("log-multi",D.IsMultiHit&&!e.IsCritical&&!e.IsBleeding&&!e.IsSplash)("log-critical",e.IsCritical)("log-bleed",e.IsBleeding)("log-splash",e.IsSplash),i(),u(" ",z(2,10,e.Amount,"1.0-0")," "),i(2),m(o!==p-1?3:-1)}}function He(n,t){if(n&1&&(a(0,"div",19),l(1," [ "),y(2,Ne,4,13,"span",22,N),l(4," ] "),r()),n&2){let e=c(2).$implicit;i(2),M(e.Damage)}}function ze(n,t){if(n&1&&(w(0),a(1,"div",4)(2,"div",14),s(3,"app-combat-actor-icon",15),a(4,"span"),l(5),r(),s(6,"app-combat-actor-icon",16),a(7,"span",10),l(8,"\u2022"),r(),a(9,"span",17),l(10),H(11,"number"),r()(),a(12,"div",18),d(13,we,3,4),d(14,Be,2,0),r(),d(15,He,5,0,"div",19),r()),n&2){let e=c().$implicit,o=I(c().DamageLogEntryExtended(e));i(3),v(o.ActorClass),g("Actor",e.Actor),i(2),f(o.ActionContent),i(),g("Actor",e.Target),i(3),v(o.ActorClass),i(),u(" ",z(11,12,o.TotalDamage,"1.0-0")," "),i(3),m(o.DamageDetails.length>0?13:-1),i(),m(o.AdditionalDetails.length>0?14:-1),i(),m(e.Damage.length>1?15:-1)}}function Fe(n,t){if(n&1&&(s(0,"app-combat-actor-icon",23),a(1,"span",24),l(2,"MISS"),r()),n&2){let e=c().$implicit;g("Actor",e.Actor)}}function Ke(n,t){if(n&1&&(s(0,"app-icon",25)(1,"app-combat-actor-icon",26),a(2,"span",27),l(3),H(4,"number"),r()),n&2){let e=c().$implicit;i(),g("Actor",e.Target),i(2),u("+",z(4,2,e.Amount,"1.0-0")," LIFE")}}function Ge(n,t){if(n&1&&s(0,"app-icon",28)(1,"app-combat-actor-icon",29),n&2){let e=c().$implicit;i(),g("Actor",e.Actor)}}function $e(n,t){if(n&1&&(s(0,"separator",1),d(1,Oe,1,1,"separator",1),a(2,"div",2),d(3,Se,2,1,"span",3)(4,Ie,12,5)(5,ze,16,15,"div",4)(6,Fe,3,1)(7,Ke,5,5)(8,Ge,2,1),r()),n&2){let e,o=t.$implicit;g("margin",!1),i(),m(o.Type=="Rewards"?1:-1),i(2),m((e=o.Type)==="Info"?3:e==="Rewards"?4:e==="Damage"?5:e==="Miss"?6:e==="Heal"?7:e==="Death"?8:-1)}}var q=class n{Log=_(le);Entries=this.Log.Entries;VisibleEntries=x(()=>this.Entries());DamageLogEntryExtended(t){let e=t.Damage.reduce((o,p)=>o+p.Amount,0);return{ActorClass:this.DamageActorClass(t),ActionContent:this.ActionContent(t),TotalDamage:e,DamageDetails:this.DamageDetails(t),AdditionalDetails:this.AdditionalDetails(t)}}DamageActorClass(t){let e=t.Damage.some(o=>o.IsCritical);return e&&t.IsMultiHit?"log-critical-multi":t.IsMultiHit?"log-multi":e?"log-critical":""}ActionContent(t){let e=t.Damage.some(o=>o.IsCritical);return e&&t.IsMultiHit?"\u26A1\u2694\uFE0F":t.IsMultiHit?"\u2694\uFE0F":e?"\u26A1":"\u{1F5E1}\uFE0F"}DamageDetails(t){let e="HIT";if(t.IsMultiHit){let p=t.Damage.filter(D=>!D.IsBleeding&&!D.IsSplash).length??0;e="MULTI "+e+" [x"+p+"]"}return t.Damage.some(o=>o.IsCritical)&&(e="CRITICAL "+e),e==="HIT"?"":e}AdditionalDetails(t){let e=[];return t.Damage.some(o=>o.IsBleeding)&&e.push({value:"BLEEDING",class:"log-bleed"}),t.Damage.some(o=>o.IsCharged)&&e.push({value:"CHARGED",class:"log-charged"}),t.Damage.some(o=>o.IsSplash)&&e.push({value:"SPLASH",class:"log-splash"}),e}FormatTimestamp(t){return ae.FormatTimestamp(t)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=C({type:n,selectors:[["app-combat-log"]],decls:3,vars:0,consts:[[1,"log-list"],[1,"ih-separator",3,"margin"],[1,"log-entry"],[1,"log-info"],[1,"log-damage-entry"],["symbol","lockedchest","size","md",1,"log-rewards"],[1,"log-rewards-entry"],[1,"log-rewards-header"],[1,"log-rewards-values"],["size","sm","fontSize","1.2rem",3,"amount"],[1,"dot"],["size","sm","fontSize","1.2rem",3,"exp"],["size","sm","fontSize","1.2rem",3,"rune"],["symbol","skeletonkey","size","sm","fontSize","1.2rem"],[1,"log-damage-header"],["Size","md",3,"Actor"],["Size","md",1,"log-damage",3,"Actor"],[1,"log-damage","total-damage"],[1,"log-damage-details"],[1,"log-damage-values"],[1,"log-damage"],[1,"log-damage",3,"class"],[1,"log-damage",3,"log-multi","log-critical","log-bleed","log-splash"],["Size","md",1,"log-miss",3,"Actor"],[1,"log-miss"],["combat","heartplus","size","sm",1,"log-heal"],["Size","md",1,"log-heal",3,"Actor"],[1,"log-heal"],["combat","hastygrave","size","sm",1,"log-death"],["Size","md",1,"log-death",3,"Actor"]],template:function(e,o){e&1&&(a(0,"div",0),y(1,$e,9,3,null,null,ne),r()),e&2&&(i(),M(o.VisibleEntries()))},dependencies:[Q,P,L,$,G,U,oe],styles:["@-webkit-keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.common--border[_ngcontent-%COMP%]{border-color:#a0a0a0}.magic--border[_ngcontent-%COMP%]{border-color:#3b82f6}.rare--border[_ngcontent-%COMP%]{border-color:#eee000}.epic--border[_ngcontent-%COMP%]{border-color:#8b5cf6}.legendary--border[_ngcontent-%COMP%]{border-color:#f80}.common--font[_ngcontent-%COMP%]{color:#e5e5e5}.magic--font[_ngcontent-%COMP%]{color:#3b82f6}.rare--font[_ngcontent-%COMP%]{color:#eee000}.epic--font[_ngcontent-%COMP%]{color:#8b5cf6}.legendary--font[_ngcontent-%COMP%]{color:#f80}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}.log-list[_ngcontent-%COMP%]{background:linear-gradient(315deg,#181f2b,#202939);border-radius:8px;border:2px solid #e5e5e5;box-shadow:0 8px 20px #02020699;max-height:78vh;overflow-y:auto;scroll-behavior:smooth;display:flex;flex-direction:column;gap:6px;padding:6px;min-width:575px}.log-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:25px;height:25px;background:#181f2b;border-radius:1rem}.log-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:1rem;box-shadow:inset 0 0 5px #181f2b}.log-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(270deg,#9a0000,#5c0000);border-radius:1rem}.log-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(90deg,#9a0000,#e10000)}@media (max-width: 1920px){.log-list[_ngcontent-%COMP%]{display:flex;max-height:44vh;overflow-y:auto}}.log-entry[_ngcontent-%COMP%]{margin-left:12px}.log-entry[_ngcontent-%COMP%], .log-damage-entry[_ngcontent-%COMP%], .log-rewards-entry[_ngcontent-%COMP%], .log-damage-header[_ngcontent-%COMP%], .log-rewards-header[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-wrap:wrap;gap:6px;align-items:center;justify-items:center;font-size:1.2rem}.log-damage-entry[_ngcontent-%COMP%], .log-rewards-entry[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;justify-items:flex-end}.log-damage-values[_ngcontent-%COMP%], .log-rewards-values[_ngcontent-%COMP%], .log-damage-details[_ngcontent-%COMP%]{display:flex;gap:6px}.total-damage[_ngcontent-%COMP%]{font-size:1.3rem}.log-damage-details[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap}.log-damage-values[_ngcontent-%COMP%]{flex-wrap:wrap;font-size:1rem}.log-time[_ngcontent-%COMP%]{color:#e5e5e5;min-width:65px}.log-info[_ngcontent-%COMP%]{color:#6fc072;font-weight:700}.log-rewards[_ngcontent-%COMP%], .log-rewards-header[_ngcontent-%COMP%]{color:#d4af37;font-weight:700}.log-damage[_ngcontent-%COMP%]{color:#ddd;font-weight:700}.log-bleed[_ngcontent-%COMP%]{color:#e44;font-weight:700}.log-charged[_ngcontent-%COMP%]{color:#fbbf24;font-weight:700}.log-splash[_ngcontent-%COMP%]{color:#128aaf;font-weight:700}.log-miss[_ngcontent-%COMP%]{color:#888}.log-heal[_ngcontent-%COMP%]{color:#22c55e;font-weight:700}.log-death[_ngcontent-%COMP%]{color:#ff2929;font-weight:700}.log-critical[_ngcontent-%COMP%]{color:#eee000;font-weight:700}.log-multi[_ngcontent-%COMP%]{color:#8b5cf6;font-weight:700}.log-critical-multi[_ngcontent-%COMP%]{color:#f80;font-weight:700}.level-up[_ngcontent-%COMP%], .log-dungeon-cleared[_ngcontent-%COMP%]{color:#0af;font-weight:700}.dot[_ngcontent-%COMP%]{color:#ddd}"],changeDetection:0})};var Ve=(n,t)=>t.Tick;function Ue(n,t){if(n&1&&(a(0,"h2",5),l(1),r()),n&2){c(3);let e=b(0);i(),u("ELITE ",e.Name)}}function je(n,t){if(n&1&&(a(0,"h2",5),l(1),r()),n&2){c(3);let e=b(0);i(),u("END BOSS ",e.Name)}}function Qe(n,t){if(n&1&&(a(0,"h2",5),l(1),r()),n&2){c(3);let e=b(0);i(),f(e.Name)}}function qe(n,t){if(n&1&&s(0,"div",14),n&2){let e=t.$implicit;k("active",e.IsActive)}}function Ye(n,t){if(n&1&&(a(0,"div",7)(1,"div",10),s(2,"app-icon",11),r(),a(3,"div",12),y(4,qe,1,2,"div",13,Ve),r()()),n&2){let e=c(3);i(4),M(e.BleedingTicks())}}function We(n,t){if(n&1&&(a(0,"div",4),d(1,Ue,2,1,"h2",5)(2,je,2,1,"h2",5)(3,Qe,2,1,"h2",5),s(4,"app-health-bar",6),d(5,Ye,6,0,"div",7),r(),a(6,"div",8),s(7,"app-icon",9),r()),n&2){let e=c(2),o=b(0);i(),m(o.IsElite?1:o.IsEndboss?2:3),i(3),g("currentHealth",o.Life.Hp)("maxHealth",o.Life.MaxHp)("showHealthValues",!0),i(),m(o.State.IsBleeding?5:-1),i(),k("taking-hit",e.isBossTakingHit())("defeated",e.isBossDefeated()),i(),g("creatures",o.BossIcon.Icon)("rotate",o.BossIcon.Rotate)}}function Je(n,t){n&1&&(a(0,"div",2)(1,"div",15),l(2,"VS"),r()())}function Xe(n,t){if(n&1&&(a(0,"div",16),s(1,"app-icon",17),r(),a(2,"div",18)(3,"h2",19),l(4),r(),s(5,"app-charge-bar",20),r()),n&2){let e=c(2),o=b(1);k("attack",e.isAttacking())("crit",e.isCrit())("multi",e.isMulti())("crit-multi",e.isCritMulti())("bleed",e.isBleed())("splash",e.isSplash()),i(),g("character",o.HeroIcon),i(3),f(o.Name),i(),g("current",o.Charge.Current)("max",o.Charge.Max)("charged",o.Charge.Charged)("showValues",!0)}}function Ze(n,t){if(n&1&&(a(0,"section",0)(1,"div",1),d(2,We,8,11),r(),d(3,Je,3,0,"div",2),a(4,"div",3),d(5,Xe,6,18),r()()),n&2){c();let e=b(0),o=b(1);i(2),m(e?2:-1),i(),m(e?3:-1),i(2),m(o?5:-1)}}var Y=class n{eventSub;heroSub;bossSub;combat=_(K);Hero=h(void 0);Boss=h(void 0);BleedingTicks=x(()=>{let t=this.Boss();if(!t)return[];if(!t.State.IsBleeding||!t.State.BleedingState)return[];let e=[];for(let o=1;o<=t.State.BleedingState.TotalTicks;o++)e.push({Tick:o,IsActive:o>t.State.BleedingState.Tick});return e.reverse()});RotateBossIcon=x(()=>this.Boss()?.BossIcon?.Rotate??!1);isAttacking=h(!1);isCrit=h(!1);isMulti=h(!1);isCritMulti=h(!1);isBleed=h(!1);isSplash=h(!1);isBossTakingHit=h(!1);isBossDefeated=h(!1);attackTimer=null;critTimer=null;multiTimer=null;critMultiTimer=null;bleedTimer=null;splashTimer=null;isBossTakingHitTimer=null;bossDefeatedTimer=null;constructor(){this.heroSub=this.combat.Hero$.subscribe(t=>{if(!t){this.Hero.set(void 0);return}this.Hero.set(Z({},t))}),this.bossSub=this.combat.Boss$.subscribe(t=>{if(!t){this.Boss.set(void 0);return}this.Boss.set(Z({},t))}),this.eventSub=this.combat.Events$.subscribe(t=>{if(t.Type==="Attack"&&(this.isAttacking.set(!0),this.attackTimer&&clearTimeout(this.attackTimer),this.attackTimer=setTimeout(()=>this.isAttacking.set(!1),300)),t.Type==="Damage"){let e=t;this.isBossTakingHit.set(!0),this.isBossTakingHitTimer&&clearTimeout(this.isBossTakingHitTimer),this.isBossTakingHitTimer=setTimeout(()=>this.isBossTakingHit.set(!1),500),this.DamageIsSplash(e)?(this.isSplash.set(!0),this.splashTimer&&clearTimeout(this.splashTimer),this.splashTimer=setTimeout(()=>this.isSplash.set(!1),500)):this.DamageIsCritMultiHit(e)?(this.isCritMulti.set(!0),this.critMultiTimer&&clearTimeout(this.critMultiTimer),this.critMultiTimer=setTimeout(()=>this.isCritMulti.set(!1),500)):this.DamageIsMultiHit(e)?(this.isMulti.set(!0),this.multiTimer&&clearTimeout(this.multiTimer),this.multiTimer=setTimeout(()=>this.isMulti.set(!1),500)):this.DamageIsCrit(e)?(this.isCrit.set(!0),this.critTimer&&clearTimeout(this.critTimer),this.critTimer=setTimeout(()=>this.isCrit.set(!1),500)):this.DamageIsBleed(e)&&(this.isBleed.set(!0),this.bleedTimer&&clearTimeout(this.bleedTimer),this.bleedTimer=setTimeout(()=>this.isBleed.set(!1),500))}t.Type==="Death"&&t.Actor&&(this.isBossDefeated.set(!0),this.bossDefeatedTimer&&clearTimeout(this.bossDefeatedTimer),this.bossDefeatedTimer=setTimeout(()=>this.isBossDefeated.set(!1),F.BOSS_RESPAWN_ANIMATION_MS*1.5))})}ngOnDestroy(){this.heroSub?.unsubscribe(),this.bossSub?.unsubscribe(),this.eventSub?.unsubscribe(),this.attackTimer&&clearTimeout(this.attackTimer),this.critTimer&&clearTimeout(this.critTimer),this.multiTimer&&clearTimeout(this.multiTimer),this.critMultiTimer&&clearTimeout(this.critMultiTimer),this.bleedTimer&&clearTimeout(this.bleedTimer),this.splashTimer&&clearTimeout(this.splashTimer),this.isBossTakingHitTimer&&clearTimeout(this.isBossTakingHitTimer),this.bossDefeatedTimer&&clearTimeout(this.bossDefeatedTimer)}DamageIsBleed(t){return t.Damage.some(e=>e.IsBleeding)&&!t.Damage.some(e=>e.IsCritical)&&!t.IsMultiHit&&!t.Damage.some(e=>e.IsSplash)}DamageIsSplash(t){return t.Damage.some(e=>e.IsSplash)}DamageIsCrit(t){return t.Damage.some(e=>e.IsCritical)&&!t.IsMultiHit}DamageIsMultiHit(t){return t.IsMultiHit&&!t.Damage.some(e=>e.IsCritical)}DamageIsCritMultiHit(t){return t.IsMultiHit&&t.Damage.some(e=>e.IsCritical)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=C({type:n,selectors:[["app-dungeon-arena"]],decls:3,vars:3,consts:[[1,"combat"],[1,"boss"],[1,"arena"],[1,"hero"],[1,"actor-info"],[1,"actor-name"],[3,"currentHealth","maxHealth","showHealthValues"],[1,"bleed-info"],[1,"boss-icon"],["size","5x",1,"icon",3,"creatures","rotate"],["title","Bleeding",1,"bleeding-icon"],["combat","bleedingwound","size","md"],[1,"bleeding-ticks"],[1,"bleed-tick",3,"active"],[1,"bleed-tick"],[1,"vs"],[1,"hero-icon"],["size","4x",1,"icon",3,"character"],[1,"actor-info","bottom"],[1,"actor-name","right"],[3,"current","max","charged","showValues"]],template:function(e,o){if(e&1&&(w(0)(1),d(2,Ze,6,3,"section",0)),e&2){let p=I(o.Boss());i();let D=I(o.Hero());i(),m(D||p?2:-1)}},dependencies:[pe,P,ge],styles:["@-webkit-keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.common--border[_ngcontent-%COMP%]{border-color:#a0a0a0}.magic--border[_ngcontent-%COMP%]{border-color:#3b82f6}.rare--border[_ngcontent-%COMP%]{border-color:#eee000}.epic--border[_ngcontent-%COMP%]{border-color:#8b5cf6}.legendary--border[_ngcontent-%COMP%]{border-color:#f80}.common--font[_ngcontent-%COMP%]{color:#e5e5e5}.magic--font[_ngcontent-%COMP%]{color:#3b82f6}.rare--font[_ngcontent-%COMP%]{color:#eee000}.epic--font[_ngcontent-%COMP%]{color:#8b5cf6}.legendary--font[_ngcontent-%COMP%]{color:#f80}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}.combat[_ngcontent-%COMP%]{background:linear-gradient(315deg,#181f2b,#202939);padding:12px;border-radius:8px;border:2px solid #e5e5e5;box-shadow:0 8px 20px #02020699;display:flex;flex-direction:column;gap:12px}.actor-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;padding:0 6px}.actor-name[_ngcontent-%COMP%]{color:#d4af37}.right[_ngcontent-%COMP%]{margin:0 0 0 auto;padding-right:6px}.bottom[_ngcontent-%COMP%]{margin:auto 0 0}.boss[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr;gap:6px}.hero[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr;gap:6px}.hero-icon[_ngcontent-%COMP%], .boss-icon[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:6px}.arena[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center}.vs[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:#d4af37;font-family:Cinzel Decorative,serif;font-size:2rem;font-weight:900}.bleed-info[_ngcontent-%COMP%]{display:inline-flex;gap:12px}.bleed-info[_ngcontent-%COMP%]   .bleeding-icon[_ngcontent-%COMP%]{color:#8a0303;border-radius:50%;border-style:solid;border-color:#8a0303;padding:4px;background-color:#e5e5e5}.bleed-info[_ngcontent-%COMP%]   .bleeding-ticks[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:3px}.bleed-info[_ngcontent-%COMP%]   .bleeding-ticks[_ngcontent-%COMP%]   .bleed-tick[_ngcontent-%COMP%]{width:50px;height:25px;border-radius:12px;border-style:solid;border-color:#0f0f0f;background-color:#8a0303;opacity:.5}.bleed-info[_ngcontent-%COMP%]   .bleeding-ticks[_ngcontent-%COMP%]   .bleed-tick.active[_ngcontent-%COMP%]{opacity:1}.icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_idle-bob 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_idle-bob{0%{transform:translateY(0)}50%{transform:translateY(-6px)}to{transform:translateY(0)}}.hero-icon.attack[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_hero-attack .24s ease-out}.hero-icon.crit[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{filter:drop-shadow(0 0 10px #eee000)}.hero-icon.multi[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_hero-multi-attack .3s ease-out;filter:drop-shadow(0 0 15px #8b5cf6)}.hero-icon.crit-multi[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_hero-multi-attack .3s ease-out;filter:drop-shadow(0 0 20px #ff8800)}.hero-icon.bleed[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{filter:drop-shadow(0 0 20px #ee4444)}.hero-icon.splash[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_hero-multi-attack .3s ease-out;filter:drop-shadow(0 0 30px #128aaf)}@keyframes _ngcontent-%COMP%_hero-attack{0%{transform:translate(0) scale(1)}40%{transform:translate(10px) scale(1.05)}to{transform:translate(0) scale(1)}}@keyframes _ngcontent-%COMP%_hero-multi-attack{0%{transform:translate(0) scale(1)}25%{transform:translate(20px) scale(1.2)}70%{transform:translate(-10px) scale(1.2)}to{transform:translate(0) scale(1)}}.boss-icon.taking-hit[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_boss-hit .3s ease-out;filter:drop-shadow(0 0 5px rgb(255,41.4,41.4))}.boss-icon.defeated[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_boss-defeat .6s ease-in forwards;filter:grayscale(100%) brightness(50%)}@keyframes _ngcontent-%COMP%_boss-hit{0%{transform:translate(0) scale(1)}50%{transform:translate(10px) scale(.95)}to{transform:translate(0) scale(1)}}@keyframes _ngcontent-%COMP%_boss-defeat{0%{transform:translateY(0) rotate(0) scale(1);opacity:1}to{transform:translateY(50%) rotate(360deg) scale(0);opacity:0}}"]})};function et(n,t){n&1&&(a(0,"div",8),l(1,"\u2022"),r())}function tt(n,t){if(n&1&&(a(0,"div",6),s(1,"app-rune",13),r(),d(2,et,2,0,"div",8)),n&2){let e=t.$implicit,o=t.$index,p=t.$count;i(),g("rune",e)("fontSize","1.2rem"),i(),m(o!==p-1?2:-1)}}function nt(n,t){if(n&1&&(a(0,"div",10)(1,"h3"),l(2,"Runes"),r(),a(3,"p",11),l(4),r()(),a(5,"div",12),y(6,tt,3,3,null,null,N),r()),n&2){let e=c();i(4),u("[",e.RuneCount(),"]"),i(2),M(e.Runes())}}var W=class n{dungeonRun=_(de);Gold=this.dungeonRun.Gold;Experience=this.dungeonRun.Experience;Runes=this.dungeonRun.Runes;RuneCount=this.dungeonRun.RuneCount;IsRunning=this.dungeonRun.IsRunning;ElapsedTime=this.dungeonRun.ElapsedFormatted;static \u0275fac=function(e){return new(e||n)};static \u0275cmp=C({type:n,selectors:[["app-dungeon-rewards"]],decls:18,vars:7,consts:[[1,"rewards-panel"],[1,"header"],[1,"title"],["title","Elapsed Time",1,"elapsed-time"],[1,"ih-separator"],[1,"rewards"],[1,"reward-item"],["size","sm","title","Gold Rewards",3,"amount","fontSize"],[1,"dot"],["size","sm","title","Gained Experience",3,"exp","fontSize"],[1,"runes-header"],[1,"rune-count"],["title","Rune Rewards",1,"rewards-runes"],["size","sm",3,"rune","fontSize"]],template:function(e,o){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),l(4),r(),a(5,"div",3),l(6),r()(),s(7,"separator",4),r(),a(8,"div",5)(9,"h3"),l(10,"Rewards"),r(),a(11,"div",6),s(12,"app-gold",7),r(),a(13,"div",8),l(14,"\u2022"),r(),a(15,"div",6),s(16,"app-exp",9),r()(),d(17,nt,8,1),r()),e&2&&(i(4),u("DUNGEON RUN ",o.IsRunning()?"":"COMPLETED"),i(2),f(o.ElapsedTime()),i(6),g("amount",o.Gold())("fontSize","1.2rem"),i(4),g("exp",o.Experience())("fontSize","1.2rem"),i(),m(o.RuneCount()>0?17:-1))},dependencies:[$,G,U,L],styles:["@-webkit-keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.common--border[_ngcontent-%COMP%]{border-color:#a0a0a0}.magic--border[_ngcontent-%COMP%]{border-color:#3b82f6}.rare--border[_ngcontent-%COMP%]{border-color:#eee000}.epic--border[_ngcontent-%COMP%]{border-color:#8b5cf6}.legendary--border[_ngcontent-%COMP%]{border-color:#f80}.common--font[_ngcontent-%COMP%]{color:#e5e5e5}.magic--font[_ngcontent-%COMP%]{color:#3b82f6}.rare--font[_ngcontent-%COMP%]{color:#eee000}.epic--font[_ngcontent-%COMP%]{color:#8b5cf6}.legendary--font[_ngcontent-%COMP%]{color:#f80}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}.rewards-panel[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background:linear-gradient(315deg,#181f2b,#202939);padding:12px;border-radius:8px;border:2px solid #e5e5e5;box-shadow:0 8px 20px #02020699;display:flex;flex-direction:column;gap:12px 0}.header[_ngcontent-%COMP%]{display:flex;flex-direction:column}.header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:12px;justify-content:space-between}.header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#d4af37}.header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .elapsed-time[_ngcontent-%COMP%]{font-size:1rem;color:#888}.rewards[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:12px}.rewards-runes[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;gap:12px}.runes-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:6px}.runes-header[_ngcontent-%COMP%]   .rune-count[_ngcontent-%COMP%]{font-size:1rem;color:#888}.dot[_ngcontent-%COMP%]{align-self:center}"],changeDetection:0})};var ot=(n,t)=>t.Definition.Id;function it(n,t){n&1&&(a(0,"p",1),l(1,"Unlock Buffs or Effects in the Skill Tree to use them in combat."),r())}function at(n,t){if(n&1&&(a(0,"span",12),l(1),r()),n&2){let e=c().$implicit;i(),u("ACTIVE \xB7 ",e.RemainingDurationSeconds,"s")}}function rt(n,t){if(n&1&&(a(0,"span",13),l(1),r()),n&2){let e=c().$implicit;i(),u(" COOLDOWN \xB7 ",e.RemainingCooldownSeconds,"s ")}}function lt(n,t){n&1&&(a(0,"span",14),l(1,"READY"),r())}function ct(n,t){if(n&1){let e=E();a(0,"button",4),T("click",function(){let p=O(e).$implicit,D=c(2);return S(D.ActivateSkill(p.Definition.Id))}),a(1,"div",5),s(2,"app-icon",6)(3,"separator",7),r(),a(4,"div",8)(5,"span",9),l(6),r(),a(7,"span",10),l(8),r()(),a(9,"div",11),d(10,at,2,1,"span",12)(11,rt,2,1,"span",13)(12,lt,2,0,"span",14),r()()}if(n&2){let e=t.$implicit,o=c(2);k("skill-button-active",e.IsActive)("skill-button-cooldown",!e.IsActive&&!e.CanActivate),g("title",e.Definition.Description)("disabled",!e.CanActivate),i(),v(o.IconClass(e.Definition)),i(),g("skills",e.Definition.Icon),i(),g("vertical",!0),i(3),f(e.Definition.Name.toUpperCase()),i(2),f(o.SkillTypeText(e.Definition)),i(2),m(e.IsActive?10:e.CanActivate?12:11)}}function st(n,t){if(n&1&&(a(0,"div",2),y(1,ct,13,13,"button",3,ot),r()),n&2){let e=c();i(),M(e.Buffs())}}var J=class n{CombatSkills=_(ce);Buffs=x(()=>this.CombatSkills.SkillBarSkills());ActivateSkill(t){this.CombatSkills.ActivateSkill(t)}SkillTypeText(t){return re(t)}IconClass(t){switch(t.Id){case"BUFF_ATTACK_SPEED":return"skill-icon-haste";case"BUFF_BLEED_CHANCE":return"skill-icon-bleed";case"BUFF_CRIT_CHANCE":return"skill-icon-crit";case"BUFF_MULTI_HIT_CHANCE":return"skill-icon-multi";default:return""}}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=C({type:n,selectors:[["app-skill-bar"]],decls:5,vars:1,consts:[[1,"skill-bar"],[1,"empty-state"],[1,"skills"],[1,"skill-button",3,"title","skill-button-active","skill-button-cooldown","disabled"],[1,"skill-button",3,"click","title","disabled"],[1,"skill-icon"],["size","lg",3,"skills"],[3,"vertical"],[1,"skill-title-row"],[1,"skill-name"],[1,"skill-type"],[1,"skill-state"],[1,"state","active"],[1,"state","cooldown"],[1,"state","ready"]],template:function(e,o){e&1&&(a(0,"section",0)(1,"h3"),l(2,"COMBAT SKILLS"),r(),d(3,it,2,0,"p",1)(4,st,3,0,"div",2),r()),e&2&&(i(3),m(o.Buffs().length===0?3:4))},dependencies:[P,L],styles:['@-webkit-keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.common--border[_ngcontent-%COMP%]{border-color:#a0a0a0}.magic--border[_ngcontent-%COMP%]{border-color:#3b82f6}.rare--border[_ngcontent-%COMP%]{border-color:#eee000}.epic--border[_ngcontent-%COMP%]{border-color:#8b5cf6}.legendary--border[_ngcontent-%COMP%]{border-color:#f80}.common--font[_ngcontent-%COMP%]{color:#e5e5e5}.magic--font[_ngcontent-%COMP%]{color:#3b82f6}.rare--font[_ngcontent-%COMP%]{color:#eee000}.epic--font[_ngcontent-%COMP%]{color:#8b5cf6}.legendary--font[_ngcontent-%COMP%]{color:#f80}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}.skill-bar[_ngcontent-%COMP%]{background:linear-gradient(315deg,#181f2b,#202939);padding:12px;border-radius:8px;border:2px solid #e5e5e5;box-shadow:0 8px 20px #02020699;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-direction:column;gap:6px}.skill-bar[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#d4af37}.empty-state[_ngcontent-%COMP%]{color:#888;font-size:1.1rem}.skills[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:6px 12px}@media (max-width: 1920px){.skills[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(200px,1fr))}}@media (max-width: 640px){.skills[_ngcontent-%COMP%]{grid-template-columns:1fr}}.skill-button[_ngcontent-%COMP%]{cursor:pointer;background:linear-gradient(315deg,#181f2b,#202939);padding:6px;border-radius:8px;border:1px solid unset;box-shadow:0 8px 20px #02020699;display:grid;grid:"icon title" auto "icon state" auto/auto 1fr;gap:12px;text-align:left}.skill-button[_ngcontent-%COMP%]:hover{transform:scale(1.01);transition:transform .2s}.skill-button[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.7}.skill-button.skill-button-active[_ngcontent-%COMP%]{border-color:#d4af37}.skill-button.skill-button-cooldown[_ngcontent-%COMP%]{border-color:#888}.skill-icon[_ngcontent-%COMP%]{grid-area:icon;display:flex;align-items:center;gap:6px}.skill-title-row[_ngcontent-%COMP%]{grid-area:title;display:flex;justify-content:space-between;gap:6px}.skill-title-row[_ngcontent-%COMP%]   .skill-name[_ngcontent-%COMP%]{font-family:MedievalSharp,cursive;font-weight:700;color:#d4af37;font-size:1.1rem}.skill-title-row[_ngcontent-%COMP%]   .skill-type[_ngcontent-%COMP%]{font-family:MedievalSharp,cursive;color:#888;font-size:.9rem}.skill-state[_ngcontent-%COMP%]{grid-area:state}.skill-state[_ngcontent-%COMP%]   .state[_ngcontent-%COMP%]{font-size:.95rem;font-weight:700}.skill-state[_ngcontent-%COMP%]   .state.active[_ngcontent-%COMP%]{color:#d4af37}.skill-state[_ngcontent-%COMP%]   .state.cooldown[_ngcontent-%COMP%]{color:#888}.skill-state[_ngcontent-%COMP%]   .state.ready[_ngcontent-%COMP%]{color:#0af}.skill-icon-haste[_ngcontent-%COMP%]{color:#999}.skill-icon-bleed[_ngcontent-%COMP%]{color:#8a0303}.skill-icon-crit[_ngcontent-%COMP%]{color:#eee000}.skill-icon-multi[_ngcontent-%COMP%]{color:#8b5cf6}'],changeDetection:0})};function dt(n,t){if(n&1&&(a(0,"div",6),l(1,"STAGE"),r(),a(2,"div",7),l(3),r()),n&2){let e=c(2);i(3),f(e.CurrentStage())}}function mt(n,t){if(n&1){let e=E();a(0,"button",12),T("click",function(){O(e);let p=c(3);return S(p.ExitDungeon())}),l(1,"LEAVE"),r()}}function gt(n,t){if(n&1){let e=E();a(0,"button",13),T("click",function(){O(e);let p=c(3);return S(p.Prestige())}),l(1,"PRESTIGE"),r()}}function pt(n,t){if(n&1&&d(0,mt,2,0,"button",10)(1,gt,2,0,"button",11),n&2){let e=c(2);m(e.ShowCompletion()?0:1)}}function ut(n,t){n&1&&(a(0,"button",9),s(1,"app-loading-spinner"),a(2,"h3"),l(3,"LEAVING..."),r()())}function _t(n,t){if(n&1){let e=E();a(0,"button",13),T("click",function(){O(e);let p=c(2);return S(p.StartBattle())}),l(1,"BATTLE"),r(),a(2,"button",12),T("click",function(){O(e);let p=c(2);return S(p.ExitDungeon())}),l(3,"LEAVE"),r()}}function ft(n,t){if(n&1&&(a(0,"div",2),s(1,"app-icon",4),a(2,"div",5)(3,"div",6),l(4,"DUNGEON ROOM"),r(),a(5,"div",7),l(6),r()(),a(7,"div",5),d(8,dt,4,1),r(),a(9,"div",8),d(10,pt,2,1)(11,ut,4,0,"button",9)(12,_t,4,0),r()()),n&2){let e=c(),o=b(2);i(),g("creatures",o.Icon),i(5),f(o.Title),i(2),m(e.IsInArena()?8:-1),i(2),m(e.IsInArena()?10:e.RestartDelay()?11:12)}}function Ct(n,t){n&1&&(a(0,"div",14),s(1,"app-dungeon-rewards"),r(),s(2,"app-combat-log"))}function bt(n,t){n&1&&(a(0,"div",15),s(1,"app-dungeon-arena")(2,"app-skill-bar")(3,"app-dungeon-rewards"),r(),s(4,"app-combat-log"))}function xt(n,t){if(n&1&&(a(0,"div",3),d(1,Ct,3,0)(2,bt,5,0),r()),n&2){let e=c();i(),m(e.ShowCompletion()?1:2)}}var X=class n{restartTimer;combat=_(K);engine=_(me);dungeonRoom=_(B);RestartDelay=h(!1);CurrentDungeon=this.dungeonRoom.CurrentDungeon;CurrentStage=this.dungeonRoom.CurrentStage;InCombat=this.combat.InProgress;CompletedDungeon=this.combat.Completed;IsInArena=x(()=>this.InCombat());ShowCompletion=x(()=>this.CompletedDungeon());ngOnDestroy(){this.restartTimer&&clearTimeout(this.restartTimer),this.engine.Stop()}StartBattle(){this.combat.SetupCombat(),this.engine.Start()}Prestige(){this.DelayRestart(),this.engine.Stop(),this.combat.Prestige()}ExitDungeon(){this.engine.Stop(),this.combat.Leave()}DelayRestart(){this.RestartDelay.set(!0),this.restartTimer&&clearTimeout(this.restartTimer),this.restartTimer=setTimeout(()=>{this.RestartDelay.set(!1)},F.BATTLE_RESTART_MS)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=C({type:n,selectors:[["app-inner-dungeon"]],decls:5,vars:4,consts:[[3,"title"],[1,"dungeon"],[1,"top-bar"],[1,"inner-dungeon"],["size","lg",3,"creatures"],[1,"room-info"],[1,"room-label"],[1,"room-value"],[1,"dungeon-actions"],["disabled","",1,"ih-button-secondary","button-leaving"],[1,"ih-button-secondary"],[1,"ih-button"],[1,"ih-button-secondary",3,"click"],[1,"ih-button",3,"click"],[1,"dungeon-completion"],[1,"dungeon-arena"]],template:function(e,o){if(e&1&&(s(0,"app-panel-header",0),a(1,"main",1),w(2),d(3,ft,13,4,"div",2),d(4,xt,3,1,"div",3),r()),e&2){g("title",o.IsInArena()?"DUNGEON ARENA":"DUNGEON ENTRANCE"),i(2);let p=I(o.CurrentDungeon());i(),m(p?3:-1),i(),m(o.IsInArena()?4:-1)}},dependencies:[V,P,Y,q,ue,W,J],styles:["@-webkit-keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.common--border[_ngcontent-%COMP%]{border-color:#a0a0a0}.magic--border[_ngcontent-%COMP%]{border-color:#3b82f6}.rare--border[_ngcontent-%COMP%]{border-color:#eee000}.epic--border[_ngcontent-%COMP%]{border-color:#8b5cf6}.legendary--border[_ngcontent-%COMP%]{border-color:#f80}.common--font[_ngcontent-%COMP%]{color:#e5e5e5}.magic--font[_ngcontent-%COMP%]{color:#3b82f6}.rare--font[_ngcontent-%COMP%]{color:#eee000}.epic--font[_ngcontent-%COMP%]{color:#8b5cf6}.legendary--font[_ngcontent-%COMP%]{color:#f80}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}.dungeon[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.inner-dungeon[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr;gap:12px}@media (max-width: 1920px){.inner-dungeon[_ngcontent-%COMP%]{grid-template-columns:1fr}}.top-bar[_ngcontent-%COMP%]{background:linear-gradient(315deg,#181f2b,#202939);padding:12px;border-radius:8px;border:2px solid #e5e5e5;box-shadow:0 8px 20px #02020699;display:flex;flex-direction:row;justify-content:flex-start;align-items:center;gap:12px}.room-info[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-weight:800;font-size:1.3rem;min-width:175px}.room-label[_ngcontent-%COMP%], .room-value[_ngcontent-%COMP%]{font-family:MedievalSharp,cursive}.room-label[_ngcontent-%COMP%]{color:#e1c773;text-align:center}.room-value[_ngcontent-%COMP%]{text-align:center}.dungeon-actions[_ngcontent-%COMP%]{display:flex;gap:12px;flex:1;justify-content:flex-end}.button-leaving[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:1rem}.dungeon-completion[_ngcontent-%COMP%], .dungeon-arena[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}"]})};function yt(n,t){n&1&&s(0,"app-inner-dungeon")}function Mt(n,t){n&1&&s(0,"app-dungeon-rooms")}var _e=class n{dungeonRoom=_(B);CurrentDungeon=this.dungeonRoom.CurrentDungeon;IsInDungeon=x(()=>this.CurrentDungeon()!==null);EnterDungeon(t){this.dungeonRoom.EnterDungeon(t)}CanEnter(t){return this.dungeonRoom.CanEnter(t)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=C({type:n,selectors:[["app-game-dungeon"]],decls:2,vars:1,template:function(e,o){e&1&&d(0,yt,1,0,"app-inner-dungeon")(1,Mt,1,0,"app-dungeon-rooms"),e&2&&m(o.IsInDungeon()?0:1)},dependencies:[j,X],styles:["@-webkit-keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.common--border[_ngcontent-%COMP%]{border-color:#a0a0a0}.magic--border[_ngcontent-%COMP%]{border-color:#3b82f6}.rare--border[_ngcontent-%COMP%]{border-color:#eee000}.epic--border[_ngcontent-%COMP%]{border-color:#8b5cf6}.legendary--border[_ngcontent-%COMP%]{border-color:#f80}.common--font[_ngcontent-%COMP%]{color:#e5e5e5}.magic--font[_ngcontent-%COMP%]{color:#3b82f6}.rare--font[_ngcontent-%COMP%]{color:#eee000}.epic--font[_ngcontent-%COMP%]{color:#8b5cf6}.legendary--font[_ngcontent-%COMP%]{color:#f80}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}"]})};export{_e as GameDungeon};
