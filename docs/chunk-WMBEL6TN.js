import{Aa as C,Ab as P,Ba as A,Ca as k,Cb as de,Da as I,Ea as m,Fa as r,Ga as o,Gb as N,Ha as f,Hb as se,La as x,Lb as H,Ma as p,Mb as me,N as re,Na as c,Nb as pe,Oa as ae,Ob as $,Pa as le,Pb as fe,Qb as ge,Rb as ue,S as _,Sa as M,Sb as _e,Ua as d,Ub as be,Va as E,Vb as Ce,W as g,Wa as y,Wb as B,X as u,Xa as D,Yb as L,Zb as G,_b as xe,a as q,ba as v,bc as Y,ha as l,ib as ce,kb as S,kc as T,lb as V,lc as z,mb as O,nc as ve,oa as h,oc as Se,pc as W,qc as ye,rc as he,uc as K,za as b}from"./chunk-3B73B7Y6.js";var Me=(i,t)=>t.Id;function Pe(i,t){if(i&1){let e=x();r(0,"button",12),p("click",function(){let a=g(e).$implicit,s=c();return u(s.SelectSlot(a))}),f(1,"app-icon",13),d(2),o()}if(i&2){let e=t.$implicit,n=c();M("active",n.SelectedSlot()===e),l(),m("gear",n.SlotIcons[e]),l(),y(" ",e.toUpperCase()," ")}}function Oe(i,t){if(i&1){let e=x();r(0,"button",14),p("click",function(){let a=g(e).$implicit,s=c();return u(s.SelectedTier.set(a))}),d(1),o()}if(i&2){let e=t.$implicit,n=c();M("active",n.SelectedTier()===e),m("disabled",e==="III"),l(),y(" TIER ",e," ")}}function Te(i,t){if(i&1){let e=x();r(0,"div",11)(1,"app-item-variant-preview",15),p("OnSelectVariant",function(a){g(e);let s=c();return u(s.SelectVariant(a))}),o()()}if(i&2){let e=t.$implicit,n=c();l(),m("Variant",e)("Selected",n.SelectedVariantId()===e.Id)}}var X=class i{crafting=_(B);cost=_(L);gold=_(N);inventory=_(G);Slots=["Weapon","OffHand","Head","Chest","Legs","Feet"];Tiers=["I","II","III"];SlotIcons={Weapon:P.DEFAULT_WEAPON,OffHand:P.DEFAULT_OFFHAND,Head:P.DEFAULT_HEAD,Chest:P.DEFAULT_CHEST,Legs:P.DEFAULT_LEGS,Feet:P.DEFAULT_FEET};SelectedSlot=v("Weapon");SelectedTier=v("I");SelectedVariantId=v(null);SelectedVariant=S(()=>{let t=this.SelectedVariantId(),e=this.VariantsForSlot();return t?e.find(n=>n.Id===t)??null:null});GoldBalance=this.gold.Balance;VariantsForSlot=S(()=>de.filter(t=>t.Slot===this.SelectedSlot()&&t.Tier===this.SelectedTier()));CraftCost=S(()=>{let t=this.SelectedVariant();return t?this.cost.GetCraftItemCost(t,fe(t.Tier)):0});SelectSlot(t){this.SelectedSlot.set(t),this.SelectedVariantId.set(null)}SelectTier(t){this.SelectedTier.set(t),this.SelectedVariantId.set(null)}SelectVariant(t){this.SelectedVariantId.set(t)}Craft(){let t=this.SelectedVariant();if(!t)return;let e=this.crafting.CraftNewItem(t,this.cost);e.Success&&this.inventory.Add(e.Item)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=h({type:i,selectors:[["app-crafting"]],decls:19,vars:2,consts:[[1,"panel"],[1,"panel-header"],[1,"actions"],["size","sm","fontSize","1.3rem",3,"amount"],[1,"ih-button-secondary","action",3,"click","disabled"],[1,"panel-body"],[1,"slots"],[1,"slot",3,"active"],[1,"tiers"],[1,"tier",3,"active","disabled"],[1,"variants"],[1,"variant"],[1,"slot",3,"click"],["size","md",3,"gear"],[1,"tier",3,"click","disabled"],[3,"OnSelectVariant","Variant","Selected"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"div",1)(2,"div")(3,"h3"),d(4,"ITEM CRAFTING"),o()(),r(5,"div",2),f(6,"app-gold",3),r(7,"button",4),p("click",function(){return n.Craft()}),d(8," CRAFT "),o()()(),r(9,"div",5)(10,"div",6),k(11,Pe,3,4,"button",7,A),o(),r(13,"div",8),k(14,Oe,2,4,"button",9,A),o(),r(16,"div",10),k(17,Te,2,2,"div",11,Me),o()()()),e&2&&(l(6),m("amount",n.CraftCost()),l(),m("disabled",n.CraftCost()>n.GoldBalance()||!n.SelectedVariant()),l(4),I(n.Slots),l(3),I(n.Tiers),l(3),I(n.VariantsForSlot()))},dependencies:[z,T,ye],styles:['@-webkit-keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.common--border[_ngcontent-%COMP%]{border-color:#a0a0a0}.magic--border[_ngcontent-%COMP%]{border-color:#3b82f6}.rare--border[_ngcontent-%COMP%]{border-color:#eee000}.epic--border[_ngcontent-%COMP%]{border-color:#8b5cf6}.legendary--border[_ngcontent-%COMP%]{border-color:#f80}.common--font[_ngcontent-%COMP%]{color:#e5e5e5}.magic--font[_ngcontent-%COMP%]{color:#3b82f6}.rare--font[_ngcontent-%COMP%]{color:#eee000}.epic--font[_ngcontent-%COMP%]{color:#8b5cf6}.legendary--font[_ngcontent-%COMP%]{color:#f80}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}.panel[_ngcontent-%COMP%]{background:linear-gradient(315deg,#181f2b,#202939);padding:12px;border-radius:8px;border:2px solid #e5e5e5;box-shadow:0 8px 20px #02020699;display:flex;flex-direction:column;justify-content:center;align-items:stretch;gap:12px}.panel-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;border-bottom:1px solid #e5e5e5;padding:6px}.actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;gap:6px}.action[_ngcontent-%COMP%]{font-size:1.1rem;min-height:35px;min-width:80px}.panel-body[_ngcontent-%COMP%]{display:grid;grid:"slots tiers" auto "slots variants" 1fr/auto 1fr;gap:12px}.slot[_ngcontent-%COMP%], .tier[_ngcontent-%COMP%]{font-family:MedievalSharp,cursive;font-weight:700;letter-spacing:.1em;word-spacing:0em;text-shadow:1px 1px 2px rgba(0,0,0,.5);font-size:.9rem;min-width:auto;cursor:pointer;color:#e5e5e5;background:#00000040;border:1px solid #e5e5e5;display:flex;flex-direction:column;justify-content:center;align-items:center;background:#181f2b;padding:12px;border-radius:8px;box-shadow:0 8px 20px #02020699}.slot[_ngcontent-%COMP%]:focus-visible, .tier[_ngcontent-%COMP%]:focus-visible{outline:2px solid #d4af37;outline-offset:2px}.slot.active[_ngcontent-%COMP%], .tier.active[_ngcontent-%COMP%]{background:linear-gradient(315deg,#181f2b,#485c80)}.slots[_ngcontent-%COMP%]{grid-area:slots;display:grid;justify-content:start;align-content:start;gap:12px}.slot[_ngcontent-%COMP%]{gap:6px;height:80px;width:80px}.tiers[_ngcontent-%COMP%]{grid-area:tiers;display:inline-flex;align-items:center;gap:12px;height:44px}.tier[_ngcontent-%COMP%]{min-width:80px}.variants[_ngcontent-%COMP%]{grid-area:variants;display:flex;max-height:68vh;overflow-y:auto;scroll-behavior:smooth;flex-wrap:wrap;align-content:flex-start;gap:12px;padding:12px}.variants[_ngcontent-%COMP%]::-webkit-scrollbar{width:.8rem;height:.8rem;background:#181f2b;border-radius:1rem}.variants[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:1rem;box-shadow:inset 0 0 5px #181f2b}.variants[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(270deg,#9a0000,#5c0000);border-radius:1rem}.variants[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(90deg,#9a0000,#e10000)}']})};function we(i,t){if(i&1&&(r(0,"div",8)(1,"span"),d(2,"Upgrade Item"),o(),f(3,"app-gold",15),o()),i&2){let e=c();l(3),m("amount",e.UpgradeCost())("size","md")("fontSize","1rem")}}function Ae(i,t){if(i&1&&(r(0,"div",8)(1,"span"),d(2,"Enchant Affix"),o(),f(3,"app-gold",15),o()),i&2){let e=c(2);l(3),m("amount",e.EnchantCost(e.SelectedAffixIndex()))("size","md")("fontSize","1rem")}}function Ee(i,t){if(i&1&&(b(0,Ae,4,3,"div",8),r(1,"div",8)(2,"span"),d(3,"Reroll Affix"),o(),f(4,"app-gold",15),o()),i&2){let e=c();C(e.IsMaxedSlot(e.SelectedAffixIndex())?-1:0),l(4),m("amount",e.RerollCost(e.SelectedAffixIndex()))("size","md")("fontSize","1rem")}}function De(i,t){if(i&1){let e=x();r(0,"button",16),p("click",function(){g(e);let a=c();return u(a.UpgradeItem())}),d(1," UPGRADE ITEM "),o()}if(i&2){let e=c();m("disabled",!e.EnoughGoldForUpgrade())}}function Fe(i,t){i&1&&(r(0,"div",14)(1,"span",6),d(2,"This item rarity cannot have affixes."),o()())}function Ve(i,t){if(i&1){let e=x();r(0,"button",23),p("click",function(){g(e);let a=c().$implicit,s=c(2);return u(s.RerollSlot(a))}),f(1,"app-icon",24),o()}if(i&2){let e=c().$implicit,n=c(2);m("disabled",!n.EnoughGoldForReroll(e))}}function Ue(i,t){if(i&1&&(r(0,"div",25),f(1,"app-icon",26),r(2,"div",27),d(3),o()(),r(4,"div",28),d(5),r(6,"span",29),d(7," [ "),r(8,"span"),d(9),o(),d(10," - "),r(11,"span"),d(12),o(),d(13," ] "),o()()),i&2){let e=c().$implicit,n=c(2).GetAffixInfo(e);M("common--font",n.Tier==="Common")("magic--font",n.Tier==="Magic")("rare--font",n.Tier==="Rare")("epic--font",n.Tier==="Epic")("legendary--font",n.Tier==="Legendary"),l(3),y("",n.Tier.toUpperCase()," AFFIX"),l(2),y(" ",n.Label," "),l(4),E(n.MinRoll),l(3),E(n.MaxRoll)}}function Re(i,t){if(i&1){let e=x();r(0,"div",21),f(1,"app-gold",15),r(2,"button",16),p("click",function(){g(e);let a=c(3);return u(a.AddAffixSlot())}),d(3," ADD AFFIX "),o()()}if(i&2){let e=c(3);l(),m("amount",e.AddAffixCost())("size","md")("fontSize","1rem"),l(),m("disabled",!e.CanAddAffixSlot())}}function Ne(i,t){if(i&1){let e=x();r(0,"button",30),p("click",function(){g(e);let a=c().$implicit,s=c(2);return u(s.UpgradeSlot(a))}),f(1,"app-icon",31),o()}if(i&2){let e=c().$implicit,n=c(2);m("disabled",!n.CanUpgradeSlot(e))}}function Le(i,t){if(i&1){let e=x();r(0,"div",17),b(1,Ve,2,1,"button",18),o(),r(2,"div",19)(3,"button",20),p("click",function(){let a=g(e).$implicit,s=c(2);return u(s.SelectSlot(a))}),b(4,Ue,14,14)(5,Re,4,4,"div",21),o()(),r(6,"div",17),b(7,Ne,2,1,"button",22),o()}if(i&2){let e=t.$implicit,n=c(2);l(),C(n.SelectedAffixIndex()===e&&n.HasAffix(e)?1:-1),l(2),M("selected",n.SelectedAffixIndex()===e),l(),C(n.HasAffix(e)?4:5),l(3),C(n.SelectedAffixIndex()===e&&n.HasAffix(e)&&!n.IsMaxedSlot(e)?7:-1)}}function Ge(i,t){if(i&1&&k(0,Le,8,5,null,null,A),i&2){let e=c();I(e.VisibleSlotIndices())}}var Q=class i{locale=_(ce);craftingService=_(B);goldCostProvider=_(L);itemLevel=_(Ce);itemAffix=_(be);Item=O.required();ItemChange=V();Variant=S(()=>H(this.Item().DefinitionId));Rarity=S(()=>$(this.Item().Level));Rules=S(()=>me(this.Rarity()));EnchantedAffixes=S(()=>this.Item().Affixes.filter(t=>t.Improved).length);MaxEnchantedAffixes=S(()=>this.Rules().MaxEnchantableAffixes);MaxAffixSlots=S(()=>this.Rules().MaxAffixes);MaxAffixTier=S(()=>pe(this.Rarity()));VisibleSlotIndices=S(()=>{let t=this.Item(),e=this.MaxAffixSlots(),n=t.Affixes.length,a=Math.min(n+1,e);return Array.from({length:a},(s,w)=>w)});SelectedAffixIndex=v(null);SelectSlot(t){this.SelectedAffixIndex.set(t)}UpgradeCost(){return this.goldCostProvider.GetLevelUpCost(this.Item())}AddAffixCost(){return this.goldCostProvider.GetAddAffixCost(this.Item())}EnchantCost(t){return this.goldCostProvider.GetEnchantAffixCost(this.Item(),t)}RerollCost(t){return this.goldCostProvider.GetRerollAffixCost(this.Item(),t)}HasAffix(t){return t>=0&&t<this.Item().Affixes.length}GetAffixInfo(t){let e=this.Item().Affixes[t];return ge(e,this.locale)}CanUpgradeItem(){let t=this.Item();return this.itemLevel.CanLevelUp(t)}EnoughGoldForUpgrade(){let t=this.UpgradeCost();return this.goldCostProvider.CanAfford(t)}UpgradeItem(){let t=this.Item(),e=this.craftingService.LevelUp(t,this.goldCostProvider);e.Success&&this.ItemChange.emit(e.Item)}CanAddAffixSlot(){let t=this.Item();return this.itemAffix.CanAddAffix(t)&&this.EnoughGoldForAddingAffix()}EnoughGoldForAddingAffix(){let t=this.AddAffixCost();return this.goldCostProvider.CanAfford(t)}AddAffixSlot(){if(!this.CanAddAffixSlot())return;let t=this.Item(),e=this.craftingService.AddAffix(t,this.goldCostProvider);if(!e.Success)return;let n=e.Item;this.ItemChange.emit(q({},n))}IsMaxedSlot(t){if(!this.HasAffix(t))return!1;let e=this.Item();return ue(e,t)}EnoughGoldForEnchant(t){let e=this.EnchantCost(t);return this.goldCostProvider.CanAfford(e)}CanUpgradeSlot(t){return this.HasAffix(t)?this.itemAffix.CanEnchant(this.Item(),t)&&this.EnoughGoldForEnchant(t):!1}UpgradeSlot(t){if(!this.CanUpgradeSlot(t))return;let e=this.Item(),n=this.craftingService.EnchantAffix(e,t,this.goldCostProvider);if(!n.Success)return;let a=n.Item;this.ItemChange.emit(q({},a))}EnoughGoldForReroll(t){let e=this.RerollCost(t);return this.goldCostProvider.CanAfford(e)}RerollSlot(t){if(!this.HasAffix(t))return;let e=this.Item(),n=this.craftingService.RerollAffix(e,t,this.goldCostProvider);n.Success&&(e=n.Item,this.ItemChange.emit(q({},e)))}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=h({type:i,selectors:[["app-enchanting"]],inputs:{Item:[1,"Item"]},outputs:{ItemChange:"ItemChange"},decls:30,vars:12,consts:[[1,"panel"],[1,"panel-header"],[1,"title"],[1,"subtitle"],[1,"rarity"],[1,"dot"],[1,"muted"],[1,"actions"],[1,"action-info"],[1,"panel-body"],[1,"preview"],[3,"Item","Variant"],[1,"ih-button-tertiary",3,"disabled"],[1,"affixes"],[1,"empty-state"],[3,"amount","size","fontSize"],[1,"ih-button-tertiary",3,"click","disabled"],[1,"affix-actions"],["title","Reroll Affix",1,"ih-button-icon","ih-button-icon-border",3,"disabled"],[1,"affix-content"],[1,"affix",3,"click"],[1,"empty-slot"],["title","Enchant Affix",1,"ih-button-icon","ih-button-icon-border",3,"disabled"],["title","Reroll Affix",1,"ih-button-icon","ih-button-icon-border",3,"click","disabled"],["ui","cycle","size","sm"],[1,"affix-header"],["symbol","polarstar","size","sm"],[1,"affix-title"],[1,"affix-label"],[1,"affix-range"],["title","Enchant Affix",1,"ih-button-icon","ih-button-icon-border",3,"click","disabled"],["ui","arrow","size","sm",1,"rotate-180"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),d(4,"ITEM ENCHANTING"),o(),r(5,"div",3)(6,"span",4),d(7),o(),r(8,"span",5),d(9,"\u2022"),o(),r(10,"span",6),d(11),o(),r(12,"span",5),d(13,"\u2022"),o(),r(14,"span",6),d(15),o(),r(16,"span",5),d(17,"\u2022"),o(),r(18,"span",6),d(19),o()()(),r(20,"div",7),b(21,we,4,3,"div",8),b(22,Ee,5,4),o()(),r(23,"div",9)(24,"div",10),f(25,"app-item-preview",11),b(26,De,2,1,"button",12),o(),r(27,"div",13),b(28,Fe,3,0,"div",14)(29,Ge,2,0),o()()()),e&2&&(l(7),E(n.Rarity()),l(4),D("Affixes: ",n.Item().Affixes.length,"/",n.MaxAffixSlots()),l(4),D(" Enchanted Affixes: ",n.EnchantedAffixes(),"/",n.MaxEnchantedAffixes()," "),l(4),y("Max Affix Tier: ",n.MaxAffixTier()),l(2),C(n.CanUpgradeItem()?21:-1),l(),C(n.SelectedAffixIndex()!==null&&n.HasAffix(n.SelectedAffixIndex())?22:-1),l(3),m("Item",n.Item())("Variant",n.Variant()),l(),C(n.CanUpgradeItem()?26:-1),l(2),C(n.MaxAffixSlots()===0?28:29))},dependencies:[W,z,T],styles:["@-webkit-keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.common--border[_ngcontent-%COMP%]{border-color:#a0a0a0}.magic--border[_ngcontent-%COMP%]{border-color:#3b82f6}.rare--border[_ngcontent-%COMP%]{border-color:#eee000}.epic--border[_ngcontent-%COMP%]{border-color:#8b5cf6}.legendary--border[_ngcontent-%COMP%]{border-color:#f80}.common--font[_ngcontent-%COMP%]{color:#e5e5e5}.magic--font[_ngcontent-%COMP%]{color:#3b82f6}.rare--font[_ngcontent-%COMP%]{color:#eee000}.epic--font[_ngcontent-%COMP%]{color:#8b5cf6}.legendary--font[_ngcontent-%COMP%]{color:#f80}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}.panel[_ngcontent-%COMP%]{background:linear-gradient(315deg,#181f2b,#202939);padding:12px;border-radius:8px;border:2px solid #e5e5e5;box-shadow:0 8px 20px #02020699;display:flex;flex-direction:column;justify-content:center;align-items:stretch;gap:12px}.panel-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;border-bottom:1px solid #e5e5e5;gap:12px;padding:6px}.title[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:flex-start;gap:3px}.title[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-direction:row;justify-content:center;align-items:center;gap:6px;font-size:.9rem}.title[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{opacity:.6}.actions[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-direction:row;justify-content:center;align-items:flex-end;gap:12px;margin-right:50px}.actions[_ngcontent-%COMP%]   .action-info[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px}.actions[_ngcontent-%COMP%]   .action-info[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:1rem;color:#e5e5e5;font-family:MedievalSharp,cursive}.muted[_ngcontent-%COMP%]{color:#888}.panel-body[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr;gap:12px}.preview[_ngcontent-%COMP%]{align-self:start;display:grid;gap:12px}.affixes[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr auto;gap:12px;align-items:center}.affix-content[_ngcontent-%COMP%]{display:grid}.affix[_ngcontent-%COMP%]{transition:background-color .3s;background:#0003;padding:12px;border-radius:8px;border:1px solid #e5e5e5;box-shadow:0 8px 20px #02020699;display:grid;gap:4px;text-align:left;min-width:360px}.affix[_ngcontent-%COMP%]:hover{background:#283347;outline:none}.affix[_ngcontent-%COMP%]:active{background:#485c80;outline:none}.affix[_ngcontent-%COMP%]:focus-visible{outline:2px solid #d4af37;outline-offset:2px}.affix[_ngcontent-%COMP%]:hover{transform:scale(1.01);transition:transform .2s}.affix.selected[_ngcontent-%COMP%]{background:linear-gradient(135deg,#181f2b,#485c80)}.affix[_ngcontent-%COMP%]   .affix-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center;gap:12px}.affix[_ngcontent-%COMP%]   .affix-header[_ngcontent-%COMP%]   .affix-title[_ngcontent-%COMP%]{font-family:MedievalSharp,cursive;font-weight:700;font-size:1.2rem}.affix[_ngcontent-%COMP%]   .affix-label[_ngcontent-%COMP%]{color:#e5e5e5;font-size:1.1rem;font-weight:700}.affix[_ngcontent-%COMP%]   .affix-range[_ngcontent-%COMP%]{font-size:1rem;color:#888}.affix[_ngcontent-%COMP%]   .empty-slot[_ngcontent-%COMP%]{display:inline-flex;justify-content:center;gap:12px}.affix-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:flex-end;gap:12px;min-width:42px}.empty-state[_ngcontent-%COMP%]{background:#0003;border-radius:8px;border:2px solid #e5e5e5;box-shadow:0 8px 20px #02020699;padding:12px}"],changeDetection:0})};function ze(i,t){i&1&&f(0,"app-crafting")}function je(i,t){if(i&1){let e=x();r(0,"app-enchanting",7),p("ItemChange",function(a){g(e);let s=c(2);return u(s.OnEnchantingItemChange(a))}),o()}if(i&2){let e=c(2);m("Item",e.SelectedItem())}}function qe(i,t){i&1&&(r(0,"div",6)(1,"div",8),d(2,"Nothing to show"),o(),r(3,"div",9),d(4,"Select an item in your inventory to enchant."),o()())}function He(i,t){if(i&1&&b(0,je,1,1,"app-enchanting",5)(1,qe,5,0,"div",6),i&2){let e=c();C(e.SelectedItem()?0:1)}}function $e(i,t){i&1&&d(0," Coming Soon... ")}var J=class i{cost=_(L);inventory=_(G);gear=_(_e);gold=_(N);get Tabs(){return[{id:"crafting",label:"CRAFTING",disabled:!1},{id:"enchanting",label:"ENCHANTING",disabled:!1},{id:"socketing",label:"SOCKETING",disabled:!0}]}SelectedTab=v("crafting");onTabSelected(t){this.SelectedTab.set(t)}SelectedItemContext=v(null);onInventoryItemSelected(t){this.SelectedItemContext.set(t)}Slots=["Weapon","OffHand","Head","Chest","Legs","Feet"];Rarities=["Common","Magic","Rare","Epic","Legendary"];SelectedSlot=v("Weapon");SelectedRarity=v("Magic");SelectedVariantId=v(null);SelectedItem=S(()=>{let t=this.SelectedItemContext();return t?t.source==="Inventory"?this.InventoryItems().find(n=>n.Id===t.itemId)||null:this.EquippedItems().find(n=>n.Id===t.itemId)||null:null});SelectedAffixIndex=v(null);SelectedAffixDefinitionId=v(null);SelectedRuneIndex=v(null);GoldBalance=this.gold.Balance;InventoryItems=this.inventory.Items;InventoryRunes=this.inventory.Runes;EquippedItems=this.gear.EquippedItems;OnEnchantingItemChange(t){let e=this.SelectedItemContext();e&&(e.source==="Inventory"?(this.inventory.Update(t),this.SelectedItemContext.set({itemId:t.Id,source:"Inventory"})):(this.gear.Equip(t),this.SelectedItemContext.set({itemId:t.Id,source:"Equipped"})))}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=h({type:i,selectors:[["app-crafting-area"]],decls:9,vars:4,consts:[[1,"blacksmith-area"],[3,"selectedChange","tabs","selected"],[1,"area"],[1,"tab__area"],[3,"ItemSelected","ShowEquipped"],[3,"Item"],[1,"empty"],[3,"ItemChange","Item"],[1,"headline"],[1,"hint"]],template:function(e,n){if(e&1&&(r(0,"section",0)(1,"app-tab-strip",1),p("selectedChange",function(s){return n.onTabSelected(s)}),o(),r(2,"div",2)(3,"div",3),b(4,ze,1,0,"app-crafting")(5,He,2,1)(6,$e,1,0),o(),r(7,"div")(8,"app-inventory",4),p("ItemSelected",function(s){return n.onInventoryItemSelected(s)}),o()()()()),e&2){let a;l(),m("tabs",n.Tabs)("selected",n.SelectedTab()),l(3),C((a=n.SelectedTab())==="crafting"?4:a==="enchanting"?5:a==="socketing"?6:-1),l(4),m("ShowEquipped",!0)}},dependencies:[K,X,Q,ve],styles:["@-webkit-keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.common--border[_ngcontent-%COMP%]{border-color:#a0a0a0}.magic--border[_ngcontent-%COMP%]{border-color:#3b82f6}.rare--border[_ngcontent-%COMP%]{border-color:#eee000}.epic--border[_ngcontent-%COMP%]{border-color:#8b5cf6}.legendary--border[_ngcontent-%COMP%]{border-color:#f80}.common--font[_ngcontent-%COMP%]{color:#e5e5e5}.magic--font[_ngcontent-%COMP%]{color:#3b82f6}.rare--font[_ngcontent-%COMP%]{color:#eee000}.epic--font[_ngcontent-%COMP%]{color:#8b5cf6}.legendary--font[_ngcontent-%COMP%]{color:#f80}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}.area[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 500px;gap:12px}@media (max-width: 1920px){.area[_ngcontent-%COMP%]{grid-template-columns:1fr}}.panel[_ngcontent-%COMP%]{background:linear-gradient(315deg,#181f2b,#202939);padding:12px;border-radius:8px;border:2px solid #e5e5e5;box-shadow:0 8px 20px #02020699;display:flex;flex-direction:column;justify-content:flex-start;align-items:stretch;gap:12px}.panel-header[_ngcontent-%COMP%]{text-align:center;border-bottom:1px solid #e5e5e5;padding:6px}.panel-body[_ngcontent-%COMP%]{display:grid;gap:12px;display:block;max-height:75vh;overflow-y:auto;scroll-behavior:smooth}.panel-body[_ngcontent-%COMP%]::-webkit-scrollbar{width:1rem;height:1rem;background:#181f2b;border-radius:1rem}.panel-body[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:1rem;box-shadow:inset 0 0 5px #181f2b}.panel-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(270deg,#9a0000,#5c0000);border-radius:1rem}.panel-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(90deg,#9a0000,#e10000)}.list[_ngcontent-%COMP%]{display:grid;padding:4px 2px;gap:6px}.list-title[_ngcontent-%COMP%]{border-bottom:1px solid #e5e5e5}.list-item[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-direction:column;justify-content:space-between;align-items:flex-start;gap:4px;padding:4px;border-radius:8px}.list-item[_ngcontent-%COMP%]:hover{background:linear-gradient(315deg,#181f2b,#485c80)}.list-item.selected[_ngcontent-%COMP%]{outline:1px solid #e5e5e5;background:linear-gradient(315deg,#181f2b,#485c80)}.list-item[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:600}.list-item[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{font-size:.8rem}.empty[_ngcontent-%COMP%]{background:#0003;padding:12px;border-radius:8px;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:6px;text-align:center}.empty[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]{font-family:MedievalSharp,cursive;color:#e5e5e5;font-size:1.2rem}.empty[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{font-family:MedievalSharp,cursive;color:#888;font-size:1.1rem;font-style:italic}"],changeDetection:0})};var Be=(i,t)=>t.Item.Id;function Ye(i,t){if(i&1){let e=x();r(0,"button",16),p("click",function(){let a=g(e).$implicit,s=c();return u(s.ToggleSlot(a))}),f(1,"app-icon",17),d(2),o()}if(i&2){let e=t.$implicit,n=c();M("is-active",n.IsSlotSelected(e)),l(),m("gear",n.DefaultSlotIcons[e]),l(),y(" ",e.toUpperCase()," ")}}function We(i,t){if(i&1){let e=x();r(0,"button",16),p("click",function(){let a=g(e).$implicit,s=c();return u(s.ToggleTier(a))}),d(1),o()}if(i&2){let e=t.$implicit,n=c();M("is-active",n.IsTierSelected(e)),l(),y(" TIER ",e," ")}}function Ke(i,t){if(i&1){let e=x();r(0,"button",16),p("click",function(){let a=g(e).$implicit,s=c();return u(s.ToggleRarity(a))}),d(1),o()}if(i&2){let e=t.$implicit,n=c();M("is-active",n.IsRaritySelected(e)),l(),y(" ",e.toUpperCase()," ")}}function Xe(i,t){i&1&&(r(0,"div",14)(1,"div",18),d(2,"Nothing to show"),o(),r(3,"div",19),d(4,"Adjust your filters or craft new gear."),o()())}function Qe(i,t){if(i&1){let e=x();r(0,"button",26),p("click",function(){g(e);let a=c().$implicit,s=c(2);return u(s.EquipItem(a.Item))}),d(1," EQUIP "),o()}}function Je(i,t){i&1&&(f(0,"app-loading-spinner",27),d(1," CONFIRM ")),i&2&&m("size",16)("color","#fff")}function Ze(i,t){i&1&&d(0," DISMANTLE ")}function et(i,t){if(i&1){let e=x();r(0,"div",20)(1,"app-item-preview",21),f(2,"separator",22),r(3,"div",23),b(4,Qe,2,0,"button",24),r(5,"button",25),p("click",function(){let a=g(e).$implicit,s=c(2);return u(s.IsDismantlingItem()?s.DismantleItem(a.Item):s.StartDismantling(a.Item))}),b(6,Je,2,2)(7,Ze,1,0),o()()()()}if(i&2){let e=t.$implicit,n=c(2);l(),m("Item",e.Item)("Variant",e.Variant),l(3),C(n.IsDismantlingItem()!==e.Item?4:-1),l(2),C(n.IsDismantlingItem()===e.Item?6:7)}}function tt(i,t){if(i&1&&(r(0,"div",15),k(1,et,8,4,"div",20,Be),o()),i&2){let e=c();l(),I(e.FilteredItemCards())}}var Z=class i{Inventory=_(G);ItemManagement=_(xe);IsDismantlingItem=v(void 0);timeout=0;ngOnDestroy(){clearTimeout(this.timeout)}AllSlots=["Weapon","OffHand","Head","Chest","Legs","Feet"];AllTiers=["I","II","III"];AllRarities=["Common","Magic","Rare","Epic","Legendary"];DefaultSlotIcons={Weapon:P.DEFAULT_WEAPON,OffHand:P.DEFAULT_OFFHAND,Head:P.DEFAULT_HEAD,Chest:P.DEFAULT_CHEST,Legs:P.DEFAULT_LEGS,Feet:P.DEFAULT_FEET};Capacity=this.Inventory.Capacity;SlotsUsed=this.Inventory.SlotsUsed;SlotsFree=this.Inventory.SlotsFree;FilteredSlots=v(new Set);FilteredTiers=v(new Set);FilteredRarities=v(new Set);SlotOrder=new Map(this.AllSlots.map((t,e)=>[t,e]));TierOrder=new Map(this.AllTiers.map((t,e)=>[t,e]));TotalItems=S(()=>this.Inventory.Items().length);FilteredItemCards=S(()=>{let t=this.FilteredSlots(),e=this.FilteredTiers(),n=this.FilteredRarities();return this.Inventory.Items().map(a=>({Item:a,Variant:H(a.DefinitionId)})).filter(a=>{let s=!0,w=!0,R=!0;if(t.size>0&&(s=t.has(a.Item.Slot)),e.size>0&&(w=e.has(a.Item.Tier)),n.size>0){let j=$(a.Item.Level);R=n.has(j)}return s&&w&&R}).sort((a,s)=>{let w=this.SlotOrder.get(a.Item.Slot)??999,R=this.SlotOrder.get(s.Item.Slot)??999;if(w!==R)return w-R;let j=this.TierOrder.get(a.Item.Tier)??999,oe=this.TierOrder.get(s.Item.Tier)??999;return j!==oe?j-oe:a.Item.Level!==s.Item.Level?s.Item.Level-a.Item.Level:a.Item.Name.localeCompare(s.Item.Name)})});FilteredCount=S(()=>this.FilteredItemCards().length);HasActiveFilters=S(()=>this.FilteredSlots().size>0||this.FilteredTiers().size>0||this.FilteredRarities().size>0);IsSlotSelected(t){return this.FilteredSlots().has(t)}IsTierSelected(t){return this.FilteredTiers().has(t)}IsRaritySelected(t){return this.FilteredRarities().has(t)}ToggleSlot(t){let e=new Set(this.FilteredSlots());if(e.has(t)?e.delete(t):e.add(t),e.size===this.AllSlots.length){this.FilteredSlots.set(new Set);return}this.FilteredSlots.set(e)}ToggleTier(t){let e=new Set(this.FilteredTiers());if(e.has(t)?e.delete(t):e.add(t),e.size===this.AllTiers.length){this.FilteredTiers.set(new Set);return}this.FilteredTiers.set(e)}ToggleRarity(t){let e=new Set(this.FilteredRarities());if(e.has(t)?e.delete(t):e.add(t),e.size===this.AllRarities.length){this.FilteredRarities.set(new Set);return}this.FilteredRarities.set(e)}ResetFilters(){this.FilteredSlots.set(new Set),this.FilteredTiers.set(new Set),this.FilteredRarities.set(new Set)}EquipItem(t){t&&this.ItemManagement.EquipItem(t.Id)}DismantleItem(t){t&&this.ItemManagement.DismantleItem(t.Id)}StartDismantling(t){clearTimeout(this.timeout),this.IsDismantlingItem.set(t),this.timeout=setTimeout(()=>{this.IsDismantlingItem.set(void 0)},1500)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=h({type:i,selectors:[["app-inventory-area"]],decls:36,vars:6,consts:[[1,"inventory"],[1,"header"],[1,"title"],[1,"meta"],[1,"count"],[1,"separator"],[1,"capacity"],[1,"actions"],["type","button",1,"ih-button-secondary",3,"click","disabled"],[1,"filters"],[1,"filter-group"],[1,"filter-title"],[1,"chip-row"],["type","button",1,"chip",3,"is-active"],[1,"empty"],[1,"grid"],["type","button",1,"chip",3,"click"],["size","sm",3,"gear"],[1,"headline"],[1,"hint"],[1,"grid-cell"],[3,"Item","Variant"],[1,"ih-separator"],[1,"item-preview-actions"],[1,"ih-button-tertiary","button-equip"],[1,"ih-button-tertiary","button-dismantle",3,"click"],[1,"ih-button-tertiary","button-equip",3,"click"],[3,"size","color"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),d(4,"BAG"),o(),r(5,"div",3)(6,"span",4),d(7),o(),r(8,"span",5),d(9,"\u2022"),o(),r(10,"span",6),d(11),o()()(),r(12,"div",7)(13,"button",8),p("click",function(){return n.ResetFilters()}),d(14," RESET FILTERS "),o()()(),r(15,"div",9)(16,"div",10)(17,"div",11),d(18,"SLOTS"),o(),r(19,"div",12),k(20,Ye,3,4,"button",13,A),o()(),r(22,"div",10)(23,"div",11),d(24,"TIERS"),o(),r(25,"div",12),k(26,We,2,3,"button",13,A),o()(),r(28,"div",10)(29,"div",11),d(30,"RARITY"),o(),r(31,"div",12),k(32,Ke,2,3,"button",13,A),o()()(),b(34,Xe,5,0,"div",14)(35,tt,3,0,"div",15),o()),e&2&&(l(7),D("",n.FilteredCount()," / ",n.TotalItems()," Items"),l(4),D("",n.SlotsUsed()," / ",n.Capacity()," Capacity"),l(2),m("disabled",!n.HasActiveFilters()),l(7),I(n.AllSlots),l(6),I(n.AllTiers),l(6),I(n.AllRarities),l(2),C(n.FilteredItemCards().length===0?34:35))},dependencies:[W,T,Se,he],styles:["@-webkit-keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.common--border[_ngcontent-%COMP%]{border-color:#a0a0a0}.magic--border[_ngcontent-%COMP%]{border-color:#3b82f6}.rare--border[_ngcontent-%COMP%]{border-color:#eee000}.epic--border[_ngcontent-%COMP%]{border-color:#8b5cf6}.legendary--border[_ngcontent-%COMP%]{border-color:#f80}.common--font[_ngcontent-%COMP%]{color:#e5e5e5}.magic--font[_ngcontent-%COMP%]{color:#3b82f6}.rare--font[_ngcontent-%COMP%]{color:#eee000}.epic--font[_ngcontent-%COMP%]{color:#8b5cf6}.legendary--font[_ngcontent-%COMP%]{color:#f80}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}.inventory[_ngcontent-%COMP%]{background:linear-gradient(315deg,#181f2b,#202939);padding:12px;border-radius:8px;border:2px solid #e5e5e5;box-shadow:0 8px 20px #02020699;display:flex;flex-direction:column;justify-content:flex-start;align-items:stretch;gap:12px}.header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;gap:12px}.title[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:flex-start;gap:12px}.title[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:#888;font-size:.95rem;font-weight:500}.title[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{margin:0 12px}.filters[_ngcontent-%COMP%]{background:#0003;padding:12px;border-radius:8px;display:flex;flex-direction:column;justify-content:flex-start;align-items:stretch;gap:12px}.filter-group[_ngcontent-%COMP%]{display:grid;grid-template-columns:65px 1fr;align-items:start;gap:12px}.filter-title[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-family:MedievalSharp,cursive;font-size:1rem;font-weight:700;align-self:center}.chip-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px}.chip[_ngcontent-%COMP%]{font-family:MedievalSharp,cursive;font-weight:700;letter-spacing:.1em;word-spacing:0em;text-shadow:1px 1px 2px rgba(0,0,0,.5);font-size:.9rem;min-width:auto;padding:8px 10px;cursor:pointer;color:#e5e5e5;background:#00000040;border-radius:8px;border:1px solid #e5e5e5;display:inline-flex;align-items:center;gap:6px;min-height:40px;transition:transform .12s ease,background-color .18s ease,border-color .18s ease}.chip[_ngcontent-%COMP%]:focus-visible{outline:2px solid #d4af37;outline-offset:2px}.chip[_ngcontent-%COMP%]:hover{background:linear-gradient(315deg,#181f2b,#485c80);transform:translateY(-1px)}.chip.is-active[_ngcontent-%COMP%]{border-color:#be0000;background:#2e0000}.grid[_ngcontent-%COMP%]{min-height:65vh;display:flex;max-height:65vh;overflow-y:auto;scroll-behavior:smooth;flex-wrap:wrap;align-content:flex-start;gap:12px;padding:12px}.grid[_ngcontent-%COMP%]::-webkit-scrollbar{width:1rem;height:1rem;background:#181f2b;border-radius:1rem}.grid[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:1rem;box-shadow:inset 0 0 5px #181f2b}.grid[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(270deg,#9a0000,#5c0000);border-radius:1rem}.grid[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(90deg,#9a0000,#e10000)}.empty[_ngcontent-%COMP%]{background:#0003;padding:12px;border-radius:8px;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:6px;text-align:center}.empty[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]{font-family:MedievalSharp,cursive;color:#e5e5e5;font-size:1.2rem}.empty[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{font-family:MedievalSharp,cursive;color:#888;font-size:1.1rem;font-style:italic}.item-preview-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:12px}.item-preview-actions[_ngcontent-%COMP%]   .button-equip[_ngcontent-%COMP%]{width:110px}.item-preview-actions[_ngcontent-%COMP%]   .button-dismantle[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;gap:12px;background-color:#0f0f0f;color:#e5e5e5}"],changeDetection:0})};function nt(i,t){if(i&1&&(r(0,"span"),d(1),o()),i&2){let e=c();l(),D("[",e.skill().Level," / ",e.skill().MaxLevel,"]")}}function it(i,t){if(i&1&&(r(0,"div",4),d(1),o()),i&2){let e=c();l(),y("Next: ",e.skill().GetDescription(e.skill().Level+1))}}function ot(i,t){if(i&1&&(r(0,"div",5),d(1),o()),i&2){let e=c();l(),y("Requires: ",e.skillDependencies)}}function rt(i,t){if(i&1){let e=x();r(0,"button",9),p("click",function(){g(e);let a=c();return u(a.unlockSkill.emit(a.skill()))}),f(1,"app-icon",10),o()}if(i&2){let e=c();m("disabled",!e.canUnlock())}}function at(i,t){if(i&1){let e=x();r(0,"button",11),p("click",function(){g(e);let a=c();return u(a.upgradeSkill.emit(a.skill()))}),f(1,"app-icon",12),o()}if(i&2){let e=c();m("disabled",!e.canLevel())}}var ee=class i{skill=O.required();unlockable=O.required();canUnlock=O.required();canLevel=O.required();unlockSkill=V();upgradeSkill=V();get unlocked(){return this.skill().Level>0}get isMaxed(){return this.skill().Level>=this.skill().MaxLevel}get hasDependencies(){return this.skill().Dependencies.length>0}get skillDependencies(){return this.skill().Dependencies.join(", ")}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=h({type:i,selectors:[["app-skill-area"]],inputs:{skill:[1,"skill"],unlockable:[1,"unlockable"],canUnlock:[1,"canUnlock"],canLevel:[1,"canLevel"]},outputs:{unlockSkill:"unlockSkill",upgradeSkill:"upgradeSkill"},decls:15,vars:15,consts:[[1,"skill"],[1,"skill-main"],[1,"skill-title"],[1,"skill-title__name"],[1,"skill-description"],[1,"skill-dependencies"],[1,"skill-actions"],["title","Unlock Skill",1,"ih-button-icon","ih-button-icon-border",3,"disabled"],["title","Upgrade Skill",1,"ih-button-icon","ih-button-icon-border",3,"disabled"],["title","Unlock Skill",1,"ih-button-icon","ih-button-icon-border",3,"click","disabled"],["symbol","padlockopen","size","sm"],["title","Upgrade Skill",1,"ih-button-icon","ih-button-icon-border",3,"click","disabled"],["symbol","growth","size","sm"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"span"),d(4),o(),r(5,"strong",3),d(6),o(),b(7,nt,2,2,"span"),o(),r(8,"div",4),d(9),o(),b(10,it,2,1,"div",4),b(11,ot,2,1,"div",5),o(),r(12,"div",6),b(13,rt,2,1,"button",7)(14,at,2,1,"button",8),o()()),e&2&&(M("unlockable",n.unlockable())("unlocked",n.unlocked)("locked",!n.unlockable())("maxed",n.isMaxed),l(4),E(n.skill().Id),l(2),E(n.skill().Name),l(),C(n.unlocked?7:-1),l(2),E(n.skill().GetDescription(n.skill().Level)),l(),C(n.isMaxed?-1:10),l(),C(!n.unlocked&&n.hasDependencies?11:-1),l(2),C(n.unlockable()&&n.skill().Level===0?13:n.unlocked&&n.skill().Level<n.skill().MaxLevel?14:-1))},dependencies:[T],styles:["@-webkit-keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.common--border[_ngcontent-%COMP%]{border-color:#a0a0a0}.magic--border[_ngcontent-%COMP%]{border-color:#3b82f6}.rare--border[_ngcontent-%COMP%]{border-color:#eee000}.epic--border[_ngcontent-%COMP%]{border-color:#8b5cf6}.legendary--border[_ngcontent-%COMP%]{border-color:#f80}.common--font[_ngcontent-%COMP%]{color:#e5e5e5}.magic--font[_ngcontent-%COMP%]{color:#3b82f6}.rare--font[_ngcontent-%COMP%]{color:#eee000}.epic--font[_ngcontent-%COMP%]{color:#8b5cf6}.legendary--font[_ngcontent-%COMP%]{color:#f80}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}.skill[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;gap:12px;padding:.5rem;align-items:center;border-width:2px;border-style:solid;border-radius:8px}.skill.unlockable[_ngcontent-%COMP%]{border-style:dashed;border-color:#7a7a7a}.skill.unlocked[_ngcontent-%COMP%]{border-style:solid;border-color:#e5e5e5}.skill.locked[_ngcontent-%COMP%]{opacity:.5}.skill.maxed[_ngcontent-%COMP%]{border-color:#d4af37}.skill-title[_ngcontent-%COMP%], .skill-description[_ngcontent-%COMP%], .skill-dependencies[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.skill-title[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:1rem;font-size:1.1rem}.skill-title__name[_ngcontent-%COMP%]{font-family:MedievalSharp,cursive}.skill-description[_ngcontent-%COMP%]{font-family:MedievalSharp,cursive;font-size:.9rem}.skill-dependencies[_ngcontent-%COMP%]{font-size:.85rem}"]})};var lt=["*"];function ct(i,t){if(i&1&&(r(0,"div",2)(1,"div",6),d(2),f(3,"app-icon",7),o(),f(4,"app-gold",8),o()),i&2){let e=c();l(2),y(" ",e.tier().RequiredLevel," "),l(2),m("amount",e.tier().GoldCost)}}function dt(i,t){if(i&1){let e=x();r(0,"button",9),p("click",function(){g(e);let a=c();return u(a.unlockTier.emit(a.tier()))}),f(1,"app-icon",10),o()}if(i&2){let e=c();m("disabled",!e.canUnlock())}}function st(i,t){i&1&&(r(0,"span",5),d(1,"UNLOCKED"),o())}var te=class i{tier=O.required();isUnlocked=O.required();canUnlock=O.required();unlockTier=V();static \u0275fac=function(e){return new(e||i)};static \u0275cmp=h({type:i,selectors:[["app-skill-tier-area"]],inputs:{tier:[1,"tier"],isUnlocked:[1,"isUnlocked"],canUnlock:[1,"canUnlock"]},outputs:{unlockTier:"unlockTier"},ngContentSelectors:lt,decls:9,vars:7,consts:[[1,"tier"],[1,"tier-header"],[1,"requirements"],[1,"tier-actions"],["title","Unlock Tier",1,"ih-button-icon","ih-button-icon-border",3,"disabled"],[1,"badge"],["title","Required Level",1,"level-requirement"],["symbol","levelfour","size","sm"],["title","Gold Requirement","fontSize","1.1rem","size","sm",3,"amount"],["title","Unlock Tier",1,"ih-button-icon","ih-button-icon-border",3,"click","disabled"],["symbol","padlockopen","size","sm"]],template:function(e,n){e&1&&(ae(),r(0,"div",0)(1,"div",1)(2,"h3"),d(3),o(),b(4,ct,5,2,"div",2),r(5,"div",3),b(6,dt,2,1,"button",4)(7,st,2,0,"span",5),o()(),le(8),o()),e&2&&(M("unlocked",n.isUnlocked())("locked",!n.isUnlocked()),l(3),y("TIER ",n.tier().Id),l(),C(n.isUnlocked()?-1:4),l(2),C(n.isUnlocked()?7:6))},dependencies:[T,z],styles:["@-webkit-keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.common--border[_ngcontent-%COMP%]{border-color:#a0a0a0}.magic--border[_ngcontent-%COMP%]{border-color:#3b82f6}.rare--border[_ngcontent-%COMP%]{border-color:#eee000}.epic--border[_ngcontent-%COMP%]{border-color:#8b5cf6}.legendary--border[_ngcontent-%COMP%]{border-color:#f80}.common--font[_ngcontent-%COMP%]{color:#e5e5e5}.magic--font[_ngcontent-%COMP%]{color:#3b82f6}.rare--font[_ngcontent-%COMP%]{color:#eee000}.epic--font[_ngcontent-%COMP%]{color:#8b5cf6}.legendary--font[_ngcontent-%COMP%]{color:#f80}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}.tier[_ngcontent-%COMP%]{border:1px solid #e5e5e5;border-radius:8px;padding:12px 6px}.tier-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;gap:12px;min-height:45px;margin-bottom:12px}.tier-header[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{margin-left:12px;color:#d4af37}.requirements[_ngcontent-%COMP%]{display:flex;gap:12px}.level-requirement[_ngcontent-%COMP%]{font-family:Cinzel Decorative,serif;align-self:baseline;justify-self:baseline;font-size:1.1rem;color:#f80}.tier-actions[_ngcontent-%COMP%]{margin-right:10px}.badge[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background:#d4af37;color:#0f0f0f;border-radius:8px;padding:3px 12px;font-family:MedievalSharp,cursive;font-weight:600}"]})};var ne=class i{levelService=_(se);goldService=_(N);skillsService=_(Y);CanUnlockTier(t){let e=this.skillsService.GetTier(t);if(!e)return!1;let n=this.skillsService.GetTier(t-1);return(n?this.skillsService.IsUnlocked(n.Id):!0)&&this.levelService.Level()>=e.RequiredLevel&&this.goldService.CanAfford(e.GoldCost)}SkillAvailable(t){let e=this.skillsService.IsUnlocked(t.Tier);if(!e)return!1;let n=this.skillsService.GetSkill(t);if(!n)return!1;let a=(n.Dependencies??[]).every(s=>this.skillsService.GetSkillLevel(s)>=1);return e&&a}CanUnlockSkill(t){return this.SkillAvailable(t)}CanLevelSkill(t){let e=this.skillsService.GetSkill(t);if(!e)return!1;let n=this.SkillAvailable(t),a=this.skillsService.GetSkillLevel(t),s=a>0,w=a<e.MaxLevel;return n&&s&&w}static \u0275fac=function(e){return new(e||i)};static \u0275prov=re({token:i,factory:i.\u0275fac,providedIn:"root"})};var ke=(i,t)=>t.Id;function mt(i,t){if(i&1){let e=x();r(0,"app-skill-area",6),p("unlockSkill",function(a){g(e);let s=c(2);return u(s.unlockSkill(a))})("upgradeSkill",function(a){g(e);let s=c(2);return u(s.upgradeSkill(a))}),o()}if(i&2){let e=t.$implicit,n=c(2).getSkillState(e);m("skill",e)("unlockable",n.available)("canUnlock",n.canUnlock)("canLevel",n.canLevel)}}function pt(i,t){if(i&1){let e=x();r(0,"app-skill-tier-area",3),p("unlockTier",function(a){g(e);let s=c();return u(s.unlockTier(a))}),r(1,"div",4),k(2,mt,1,4,"app-skill-area",5,ke),o()()}if(i&2){let e=t.$implicit,n=c().getTierState(e);m("tier",e)("isUnlocked",n.isUnlocked)("canUnlock",n.canUnlock),l(2),I(e.Skills)}}var ie=class i{skillsService=_(Y);skillsSpecifications=_(ne);availableSkillPoints=O(100);get SkillTree(){return this.skillsService.SkillTree()}getTierState(t){let e=this.skillsService.IsUnlocked(t.Id),n=!e&&this.skillsSpecifications.CanUnlockTier(t.Id);return{isUnlocked:e,canUnlock:n}}getSkillState(t){let e=this.skillsSpecifications.SkillAvailable(t.Id),n=this.skillsSpecifications.CanUnlockSkill(t.Id),a=this.skillsSpecifications.CanLevelSkill(t.Id);return{available:e,canUnlock:n,canLevel:a}}unlockTier(t){this.skillsSpecifications.CanUnlockTier(t.Id)&&this.skillsService.UnlockTier(t.Id)}unlockSkill(t){this.skillsSpecifications.CanUnlockSkill(t.Id)&&this.skillsService.UnlockSkill(t.Id)}upgradeSkill(t){this.skillsSpecifications.CanLevelSkill(t.Id)&&this.skillsService.UpgradeSkill(t.Id)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=h({type:i,selectors:[["app-skill-tree"]],inputs:{availableSkillPoints:[1,"availableSkillPoints"]},decls:4,vars:0,consts:[[1,"container"],[1,"tiers"],[3,"tier","isUnlocked","canUnlock"],[3,"unlockTier","tier","isUnlocked","canUnlock"],[1,"skills"],[3,"skill","unlockable","canUnlock","canLevel"],[3,"unlockSkill","upgradeSkill","skill","unlockable","canUnlock","canLevel"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"div",1),k(2,pt,4,3,"app-skill-tier-area",2,ke),o()()),e&2&&(l(2),I(n.SkillTree))},dependencies:[te,ee],styles:["@-webkit-keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.common--border[_ngcontent-%COMP%]{border-color:#a0a0a0}.magic--border[_ngcontent-%COMP%]{border-color:#3b82f6}.rare--border[_ngcontent-%COMP%]{border-color:#eee000}.epic--border[_ngcontent-%COMP%]{border-color:#8b5cf6}.legendary--border[_ngcontent-%COMP%]{border-color:#f80}.common--font[_ngcontent-%COMP%]{color:#e5e5e5}.magic--font[_ngcontent-%COMP%]{color:#3b82f6}.rare--font[_ngcontent-%COMP%]{color:#eee000}.epic--font[_ngcontent-%COMP%]{color:#8b5cf6}.legendary--font[_ngcontent-%COMP%]{color:#f80}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}.container[_ngcontent-%COMP%], .tiers[_ngcontent-%COMP%], .skills[_ngcontent-%COMP%]{display:grid;gap:12px}"],changeDetection:0})};function ft(i,t){i&1&&f(0,"app-inventory-area")}function gt(i,t){i&1&&f(0,"app-crafting-area")}function ut(i,t){i&1&&f(0,"app-skill-tree")}var Ie=class i{get Tabs(){return[{id:"inventory",label:"INVENTORY",disabled:!1},{id:"crafting",label:"BLACKSMITH",disabled:!1},{id:"skills",label:"SKILL TREE",disabled:!0}]}SelectedTab=v("inventory");onTabSelected(t){this.SelectedTab.set(t)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=h({type:i,selectors:[["app-game-town"]],decls:6,vars:3,consts:[[1,"town-area"],[3,"selectedChange","tabs","selected"],[1,"tab-content"]],template:function(e,n){if(e&1&&(r(0,"div",0)(1,"app-tab-strip",1),p("selectedChange",function(s){return n.onTabSelected(s)}),o(),r(2,"div",2),b(3,ft,1,0,"app-inventory-area")(4,gt,1,0,"app-crafting-area")(5,ut,1,0,"app-skill-tree"),o()()),e&2){let a;l(),m("tabs",n.Tabs)("selected",n.SelectedTab()),l(2),C((a=n.SelectedTab())==="inventory"?3:a==="crafting"?4:a==="skills"?5:-1)}},dependencies:[K,Z,ie,J],styles:["@-webkit-keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.common--border[_ngcontent-%COMP%]{border-color:#a0a0a0}.magic--border[_ngcontent-%COMP%]{border-color:#3b82f6}.rare--border[_ngcontent-%COMP%]{border-color:#eee000}.epic--border[_ngcontent-%COMP%]{border-color:#8b5cf6}.legendary--border[_ngcontent-%COMP%]{border-color:#f80}.common--font[_ngcontent-%COMP%]{color:#e5e5e5}.magic--font[_ngcontent-%COMP%]{color:#3b82f6}.rare--font[_ngcontent-%COMP%]{color:#eee000}.epic--font[_ngcontent-%COMP%]{color:#8b5cf6}.legendary--font[_ngcontent-%COMP%]{color:#f80}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}"]})};export{Ie as GameTown};
