import{$a as B,Aa as g,Ba as W,Ca as h,Da as v,Ea as d,Eb as Z,Fa as a,Ga as r,Ha as s,Jb as F,Kb as ee,La as E,Ma as D,Na as l,S as _,Sa as k,Ta as H,Ua as c,Va as f,W as P,Wa as u,X as O,Xa as T,Xb as A,a as q,ab as N,ba as x,bb as y,eb as I,fb as S,ha as i,ic as te,kb as b,kc as M,mb as J,mc as ne,oa as C,oc as oe,rb as K,rc as ie,tc as V,xb as z,yb as Q,za as m,zb as X}from"./chunk-Z46LSLCZ.js";var ae=(n,t)=>t.Id;function ce(n,t){if(n&1){let e=E();a(0,"div",4),s(1,"app-icon",5),a(2,"div",6)(3,"div",7),c(4),r(),a(5,"div",8),c(6),r(),a(7,"div",9)(8,"span"),c(9),r()(),a(10,"div",9)(11,"span"),c(12),r()()(),a(13,"button",10),D("click",function(){let p=P(e).$implicit,w=l();return O(w.EnterDungeon(p.Id))}),c(14," ENTER "),r()()}if(n&2){let e=t.$implicit,o=l();i(),d("creatures",e.Icon),i(3),T("",e.Id," \u2022 ",e.Title.toUpperCase()),i(2),f(e.Description),i(3),T("Stages: ",e.StagesBase," - ",e.StagesMax),i(3),u("Elites: ",e.MidStages.join(" | ")),i(),d("disabled",!o.CanEnter(e.Id))}}function se(n,t){if(n&1){let e=E();a(0,"div",4),s(1,"app-icon",5),a(2,"div",6)(3,"div",7),c(4),r(),a(5,"div",8),c(6),r(),a(7,"div",9)(8,"span"),c(9),r()(),a(10,"div",9)(11,"span"),c(12),r()()(),a(13,"button",10),D("click",function(){let p=P(e).$implicit,w=l();return O(w.EnterDungeon(p.Id))}),c(14," ENTER "),r()()}if(n&2){let e=t.$implicit,o=l();i(),d("creatures",e.Icon),i(3),T("",e.Id," \u2022 ",e.Title.toUpperCase()),i(2),f(e.Description),i(3),T("Stages: ",e.StagesBase," - ",e.StagesMax),i(3),u("Elites: ",e.MidStages.join(" | ")),i(),d("disabled",!o.CanEnter(e.Id))}}var $=class n{dungeonRoom=_(A);Dungeons=Q();NormalDungeons=b(()=>this.Dungeons.filter(t=>t.Type==="Normal"));CapstoneDungeons=b(()=>this.Dungeons.filter(t=>t.Type==="Capstone"));EnterDungeon(t){this.dungeonRoom.EnterDungeon(t)}CanEnter(t){return this.dungeonRoom.CanEnter(t)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=C({type:n,selectors:[["app-dungeon-rooms"]],decls:13,vars:1,consts:[[3,"title"],[1,"dungeon-list"],[1,"dungeon-group"],[1,"group-title"],[1,"dungeon-card"],["size","lg",3,"creatures"],[1,"dungeon-info"],[1,"dungeon-title"],[1,"dungeon-desc"],[1,"dungeon-meta"],[1,"ih-button",3,"click","disabled"]],template:function(e,o){e&1&&(a(0,"section"),s(1,"app-panel-header",0),a(2,"div",1)(3,"div",2)(4,"h3",3),c(5,"DUNGEONS"),r(),h(6,ce,15,8,"div",4,ae),r(),a(8,"div",2)(9,"h3",3),c(10,"CAPSTONE DUNGEONS"),r(),h(11,se,15,8,"div",4,ae),r()()()),e&2&&(i(),d("title","DUNGEONS"),i(5),v(o.NormalDungeons()),i(5),v(o.CapstoneDungeons()))},dependencies:[V,M],styles:["@-webkit-keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.common--border[_ngcontent-%COMP%]{border-color:#a0a0a0}.magic--border[_ngcontent-%COMP%]{border-color:#3b82f6}.rare--border[_ngcontent-%COMP%]{border-color:#eee000}.epic--border[_ngcontent-%COMP%]{border-color:#8b5cf6}.legendary--border[_ngcontent-%COMP%]{border-color:#f80}.common--font[_ngcontent-%COMP%]{color:#e5e5e5}.magic--font[_ngcontent-%COMP%]{color:#3b82f6}.rare--font[_ngcontent-%COMP%]{color:#eee000}.epic--font[_ngcontent-%COMP%]{color:#8b5cf6}.legendary--font[_ngcontent-%COMP%]{color:#f80}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}.dungeon-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.dungeon-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.group-title[_ngcontent-%COMP%]{color:#e5e5e5;margin:8px 0;text-align:center}.dungeon-card[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr auto;align-items:center;gap:12px;padding:12px;border:1px solid #e5e5e5;border-radius:8px;background:#181f2b}.dungeon-title[_ngcontent-%COMP%]{font-weight:600;color:#e5e5e5}.dungeon-desc[_ngcontent-%COMP%]{font-size:.9rem;color:#e5e5e5}.dungeon-meta[_ngcontent-%COMP%]{font-size:.8rem;color:#888}"]})};function le(n,t){if(n&1&&s(0,"app-icon",0),n&2){let e=l();d("character",e.HeroIcon)("size",e.Size())}}function de(n,t){if(n&1&&s(0,"app-icon",1),n&2){let e=l();d("creatures",e.BossIcon)("size",e.Size())("rotate",e.Rotate)}}var G=class n{Actor=J.required();Size=J("sm");get ActorIsHero(){return this.Actor().HeroIcon!==void 0}get HeroIcon(){return this.Actor().HeroIcon||void 0}get ActorIsBoss(){return this.Actor().BossIcon!==void 0}get BossIcon(){return this.Actor().BossIcon.Icon||void 0}get Rotate(){return this.Actor()?.BossIcon?.Rotate||!1}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=C({type:n,selectors:[["app-combat-actor-icon"]],inputs:{Actor:[1,"Actor"],Size:[1,"Size"]},decls:2,vars:1,consts:[[3,"character","size"],[3,"creatures","size","rotate"]],template:function(e,o){e&1&&m(0,le,1,2,"app-icon",0)(1,de,1,3,"app-icon",1),e&2&&g(o.ActorIsHero?0:o.ActorIsBoss?1:-1)},dependencies:[M],encapsulation:2})};function me(n,t){n&1&&s(0,"separator",1),n&2&&d("margin",!1)}function ge(n,t){if(n&1&&(a(0,"span",4),c(1),r()),n&2){let e=l().$implicit;i(),f(e.Message)}}function pe(n,t){if(n&1&&(s(0,"app-icon",6),a(1,"div",7)(2,"div",8)(3,"span"),c(4),r()(),a(5,"div",9)(6,"span",10),c(7),I(8,"number"),s(9,"app-icon",11),r(),a(10,"span",12),c(11),I(12,"number"),s(13,"app-icon",13),r()()()),n&2){let e=l().$implicit;i(4),u("Completed Stage ",e.Stage),i(3),u(" +",S(8,3,e.Rewards.Gold,"1.0-0")," "),i(4),u(" +",S(12,6,e.Rewards.Experience,"1.0-0")," ")}}function ue(n,t){if(n&1&&(a(0,"span",17),c(1),I(2,"number"),r()),n&2){let e=t.$implicit;k("log-multi",!e.IsCritical)("log-critical",e.IsCritical),i(),u(" ",S(2,5,e.Amount,"1.0-0")," ")}}function fe(n,t){if(n&1&&(c(0," [ "),h(1,ue,3,8,"span",19,W),c(3," ] ")),n&2){let e=l(2).$implicit;i(),v(e.Damage)}}function _e(n,t){if(n&1&&(a(0,"div",5)(1,"div",14),s(2,"app-combat-actor-icon",15),a(3,"span"),c(4),r(),s(5,"app-combat-actor-icon",16),r(),a(6,"div")(7,"span",17),c(8),r()(),a(9,"div",18)(10,"span",17),c(11),I(12,"number"),r(),m(13,fe,4,0),r()()),n&2){let e=l().$implicit,o=l().DamageLogEntryExtended(e);i(2),H(o.ActorClass),d("Actor",e.Actor),i(2),f(o.ActionContent),i(),d("Actor",e.Target),i(2),H(o.ActorClass),i(),u(" ",o.DamageDetails," "),i(2),H(o.ActorClass),i(),u(" ",S(12,12,o.TotalDamage,"1.0-0")," "),i(2),g(e.IsMultiHit?13:-1)}}function Ce(n,t){if(n&1&&(a(0,"div",5)(1,"div",14),s(2,"app-icon",20)(3,"app-combat-actor-icon",16),a(4,"span",21),c(5),r()(),a(6,"span",21),c(7),I(8,"number"),r()()),n&2){let e=l().$implicit;i(3),d("Actor",e.Target),i(2),T(" [",e.Tick," / ",e.TotalTicks,"] "),i(2),u(" ",S(8,4,e.Damage.Amount,"1.0-0")," ")}}function be(n,t){if(n&1&&(s(0,"app-combat-actor-icon",22),a(1,"span",23),c(2,"MISS"),r()),n&2){let e=l().$implicit;d("Actor",e.Actor)}}function xe(n,t){if(n&1&&(s(0,"app-icon",24)(1,"app-combat-actor-icon",25),a(2,"span",26),c(3),I(4,"number"),r()),n&2){let e=l().$implicit;i(),d("Actor",e.Target),i(2),u("+",S(4,2,e.Amount,"1.0-0")," LIFE")}}function Me(n,t){if(n&1&&s(0,"app-icon",27)(1,"app-combat-actor-icon",28),n&2){let e=l().$implicit;i(),d("Actor",e.Actor)}}function he(n,t){if(n&1&&(s(0,"separator",1),m(1,me,1,1,"separator",1),a(2,"div",2)(3,"span",3),c(4),r(),m(5,ge,2,1,"span",4)(6,pe,14,9)(7,_e,14,15,"div",5)(8,Ce,9,7,"div",5)(9,be,3,1)(10,xe,5,5)(11,Me,2,1),r()),n&2){let e,o=t.$implicit,p=l();d("margin",!1),i(),g(o.Type=="Rewards"?1:-1),i(3),f(p.FormatTimestamp(o.TimestampMs)),i(),g((e=o.Type)==="Info"?5:e==="Rewards"?6:e==="Damage"?7:e==="Bleed"?8:e==="Miss"?9:e==="Heal"?10:e==="Death"?11:-1)}}var j=class n{Log=_(Z);Entries=this.Log.Entries;VisibleEntries=b(()=>this.Entries());get Separator(){return"\u2013"}DamageLogEntryExtended(t){let e=t.Damage.reduce((o,p)=>o+p.Amount,0);return{ActorClass:this.DamageActorClass(t),ActionContent:this.ActionContent(t),TotalDamage:e,DamageDetails:this.DamageDetails(t)}}DamageActorClass(t){let e=t.Damage.some(o=>o.IsCritical);return e&&t.IsMultiHit?"log-critical-multi":t.IsMultiHit?"log-multi":e?"log-critical":""}ActionContent(t){let e=t.Damage.some(o=>o.IsCritical);return e&&t.IsMultiHit?"\u26A1\u2694\uFE0F":t.IsMultiHit?"\u2694\uFE0F":e?"\u26A1":"\u{1F5E1}\uFE0F"}DamageDetails(t){let e="HIT";return t.Damage.length>1&&(e="MULTI "+e+" [x"+t.Damage.length+"]"),t.Damage.some(o=>o.IsCritical)&&(e="CRITICAL "+e),e==="HIT"?"":e}FormatTimestamp(t){return X.FormatTimestamp(t)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=C({type:n,selectors:[["app-combat-log"]],decls:3,vars:0,consts:[[1,"log-list"],[1,"ih-separator",3,"margin"],[1,"log-entry"],[1,"log-time"],[1,"log-info"],[1,"log-damage-entry"],["symbol","lockedchest","size","md",1,"log-rewards"],[1,"log-rewards-entry"],[1,"log-rewards-header"],[1,"log-rewards-values"],[1,"log-rewards-gold"],["symbol","twocoins","size","sm"],[1,"log-rewards-xp"],["symbol","starsstack","size","sm"],[1,"log-damage-header"],["Size","md",3,"Actor"],["Size","md",1,"log-damage",3,"Actor"],[1,"log-damage"],[1,"log-damage-values"],[1,"log-damage",3,"log-multi","log-critical"],["combat","bleedingwound","size","sm",1,"log-bleed"],[1,"log-bleed"],["Size","md",1,"log-miss",3,"Actor"],[1,"log-miss"],["combat","heartplus","size","sm",1,"log-heal"],["Size","md",1,"log-heal",3,"Actor"],[1,"log-heal"],["combat","hastygrave","size","sm",1,"log-death"],["Size","md",1,"log-death",3,"Actor"]],template:function(e,o){e&1&&(a(0,"div",0),h(1,he,12,4,null,null,W),r()),e&2&&(i(),v(o.VisibleEntries()))},dependencies:[G,M,oe,K],styles:["@-webkit-keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.common--border[_ngcontent-%COMP%]{border-color:#a0a0a0}.magic--border[_ngcontent-%COMP%]{border-color:#3b82f6}.rare--border[_ngcontent-%COMP%]{border-color:#eee000}.epic--border[_ngcontent-%COMP%]{border-color:#8b5cf6}.legendary--border[_ngcontent-%COMP%]{border-color:#f80}.common--font[_ngcontent-%COMP%]{color:#e5e5e5}.magic--font[_ngcontent-%COMP%]{color:#3b82f6}.rare--font[_ngcontent-%COMP%]{color:#eee000}.epic--font[_ngcontent-%COMP%]{color:#8b5cf6}.legendary--font[_ngcontent-%COMP%]{color:#f80}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}.log-list[_ngcontent-%COMP%]{background:linear-gradient(315deg,#181f2b,#202939);padding:12px;border-radius:8px;border:2px solid #e5e5e5;box-shadow:0 8px 20px #02020699;max-height:78vh;overflow-y:auto;scroll-behavior:smooth;display:flex;flex-direction:column;gap:6px}.log-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:25px;height:25px;background:#181f2b;border-radius:1rem}.log-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:1rem;box-shadow:inset 0 0 5px #181f2b}.log-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(270deg,#9a0000,#5c0000);border-radius:1rem}.log-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(90deg,#9a0000,#e10000)}@media (max-width: 1920px){.log-list[_ngcontent-%COMP%]{display:flex;max-height:44vh;overflow-y:auto}}.log-entry[_ngcontent-%COMP%], .log-damage-entry[_ngcontent-%COMP%], .log-rewards-entry[_ngcontent-%COMP%], .log-damage-header[_ngcontent-%COMP%], .log-rewards-header[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-wrap:wrap;gap:6px;align-items:center;justify-items:center;font-size:1.2rem}.log-damage-entry[_ngcontent-%COMP%], .log-rewards-entry[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.log-damage-values[_ngcontent-%COMP%], .log-rewards-values[_ngcontent-%COMP%]{display:flex;gap:6px}.log-time[_ngcontent-%COMP%]{color:#e5e5e5;min-width:65px}.log-info[_ngcontent-%COMP%]{color:#6fc072;font-weight:700}.log-rewards[_ngcontent-%COMP%], .log-rewards-header[_ngcontent-%COMP%]{color:#d4af37}.log-rewards-gold[_ngcontent-%COMP%]{color:#ddbf5f;font-weight:700}.log-rewards-xp[_ngcontent-%COMP%]{color:#2196f3;font-weight:700}.log-damage[_ngcontent-%COMP%]{color:#e44}.log-bleed[_ngcontent-%COMP%]{color:#8a0303;font-weight:700}.log-miss[_ngcontent-%COMP%]{color:#888}.log-heal[_ngcontent-%COMP%]{color:#22c55e;font-weight:700}.log-death[_ngcontent-%COMP%]{color:#ff2929;font-weight:700}.log-critical[_ngcontent-%COMP%]{color:#eee000;font-weight:700}.log-multi[_ngcontent-%COMP%]{color:#8b5cf6;font-weight:700}.log-critical-multi[_ngcontent-%COMP%]{color:#f80;font-weight:700}.level-up[_ngcontent-%COMP%], .log-dungeon-cleared[_ngcontent-%COMP%]{color:#0af;font-weight:700}"],changeDetection:0})};var ve=(n,t)=>t.Tick;function ye(n,t){if(n&1&&(a(0,"h2",5),c(1),r()),n&2){l(2);let e=y(2);i(),u("ELITE ",e.Name)}}function Pe(n,t){if(n&1&&(a(0,"h2",5),c(1),r()),n&2){l(2);let e=y(2);i(),u("END BOSS ",e.Name)}}function Oe(n,t){if(n&1&&(a(0,"h2",5),c(1),r()),n&2){l(2);let e=y(2);i(),f(e.Name)}}function De(n,t){if(n&1&&s(0,"div",14),n&2){let e=t.$implicit;k("active",e.IsActive)}}function Te(n,t){if(n&1&&(a(0,"div",7)(1,"div",10),s(2,"app-icon",11),r(),a(3,"div",12),h(4,De,1,2,"div",13,ve),r()()),n&2){let e=l(2);i(4),v(e.BleedingTicks())}}function Ie(n,t){if(n&1&&(a(0,"div",4),m(1,ye,2,1,"h2",5)(2,Pe,2,1,"h2",5)(3,Oe,2,1,"h2",5),s(4,"app-health-bar",6),m(5,Te,6,0,"div",7),r(),a(6,"div",8),s(7,"app-icon",9),r()),n&2){let e=l(),o=y(2);i(),g(o.IsElite?1:o.IsEndboss?2:3),i(3),d("currentHealth",o.Life.Hp)("maxHealth",o.Life.MaxHp)("showHealthValues",!0),i(),g(o.State.IsBleeding?5:-1),i(),k("taking-hit",e.isBossTakingHit())("defeated",e.isBossDefeated()),i(),d("creatures",o.BossIcon.Icon)("rotate",o.BossIcon.Rotate)}}function Se(n,t){n&1&&(a(0,"div",2)(1,"div",15),c(2,"VS"),r()())}function Ee(n,t){if(n&1&&(a(0,"div",16),s(1,"app-icon",17),r(),a(2,"div",18)(3,"h2",19),c(4),r(),s(5,"app-charge-bar",20),r()),n&2){let e=l(),o=y(6);k("attack",e.isAttacking())("crit",e.isCrit())("multi",e.isMulti())("crit-multi",e.isCritMulti()),i(),d("character",o.HeroIcon),i(3),f(o.Name),i(),d("current",o.Charge.Current)("max",o.Charge.Max)("charged",o.Charge.Charged)("showValues",!0)}}var Y=class n{eventSub;heroSub;bossSub;combat=_(F);Hero=x(void 0);Boss=x(void 0);BleedingTicks=b(()=>{let t=this.Boss();if(!t)return[];if(!t.State.IsBleeding||!t.State.BleedingState)return[];let e=[];for(let o=1;o<=t.State.BleedingState.TotalTicks;o++)e.push({Tick:o,IsActive:o>t.State.BleedingState.Tick});return e.reverse()});RotateBossIcon=b(()=>this.Boss()?.BossIcon?.Rotate??!1);isAttacking=x(!1);isCrit=x(!1);isMulti=x(!1);isCritMulti=x(!1);isBossTakingHit=x(!1);isBossDefeated=x(!1);attackTimer=null;critTimer=null;multiTimer=null;critMultiTimer=null;isBossTakingHitTimer=null;bossDefeatedTimer=null;constructor(){this.heroSub=this.combat.Hero$.subscribe(t=>{if(!t){this.Hero.set(void 0);return}this.Hero.set(q({},t))}),this.bossSub=this.combat.Boss$.subscribe(t=>{if(!t){this.Boss.set(void 0);return}this.Boss.set(q({},t))}),this.eventSub=this.combat.Events$.subscribe(t=>{if(t.Type==="Attack"&&(this.isAttacking.set(!0),this.attackTimer&&clearTimeout(this.attackTimer),this.attackTimer=setTimeout(()=>this.isAttacking.set(!1),300)),t.Type==="Damage"){let e=t;this.isBossTakingHit.set(!0),this.isBossTakingHitTimer&&clearTimeout(this.isBossTakingHitTimer),this.isBossTakingHitTimer=setTimeout(()=>this.isBossTakingHit.set(!1),500),e.Damage.some(o=>o.IsCritical)&&(this.isCrit.set(!0),this.critTimer&&clearTimeout(this.critTimer),this.critTimer=setTimeout(()=>this.isCrit.set(!1),500)),e.IsMultiHit&&(this.isMulti.set(!0),this.multiTimer&&clearTimeout(this.multiTimer),this.multiTimer=setTimeout(()=>this.isMulti.set(!1),500))}t.Type==="Death"&&t.Actor&&(this.isBossDefeated.set(!0),this.bossDefeatedTimer&&clearTimeout(this.bossDefeatedTimer),this.bossDefeatedTimer=setTimeout(()=>this.isBossDefeated.set(!1),z.BOSS_RESPAWN_ANIMATION_MS*1.5))})}ngOnDestroy(){this.heroSub?.unsubscribe(),this.bossSub?.unsubscribe(),this.eventSub?.unsubscribe(),this.attackTimer&&clearTimeout(this.attackTimer),this.critTimer&&clearTimeout(this.critTimer),this.multiTimer&&clearTimeout(this.multiTimer),this.critMultiTimer&&clearTimeout(this.critMultiTimer),this.isBossTakingHitTimer&&clearTimeout(this.isBossTakingHitTimer),this.bossDefeatedTimer&&clearTimeout(this.bossDefeatedTimer)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=C({type:n,selectors:[["app-dungeon-arena"]],decls:8,vars:5,consts:[[1,"combat"],[1,"boss"],[1,"arena"],[1,"hero"],[1,"actor-info"],[1,"actor-name"],[3,"currentHealth","maxHealth","showHealthValues"],[1,"bleed-info"],[1,"boss-icon"],["size","5x",1,"icon",3,"creatures","rotate"],["title","Bleeding",1,"bleeding-icon"],["combat","bleedingwound","size","md"],[1,"bleeding-ticks"],[1,"bleed-tick",3,"active"],[1,"bleed-tick"],[1,"vs"],[1,"hero-icon"],["size","4x",1,"icon",3,"character"],[1,"actor-info","bottom"],[1,"actor-name","right"],[3,"current","max","charged","showValues"]],template:function(e,o){if(e&1&&(a(0,"section",0)(1,"div",1),B(2),m(3,Ie,8,11),r(),m(4,Se,3,0,"div",2),a(5,"div",3),B(6),m(7,Ee,6,14),r()()),e&2){i(2);let p=N(o.Boss());i(),g(p?3:-1),i(),g(p?4:-1),i(2);let w=N(o.Hero());i(),g(w?7:-1)}},dependencies:[ne,M,te],styles:["@-webkit-keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.common--border[_ngcontent-%COMP%]{border-color:#a0a0a0}.magic--border[_ngcontent-%COMP%]{border-color:#3b82f6}.rare--border[_ngcontent-%COMP%]{border-color:#eee000}.epic--border[_ngcontent-%COMP%]{border-color:#8b5cf6}.legendary--border[_ngcontent-%COMP%]{border-color:#f80}.common--font[_ngcontent-%COMP%]{color:#e5e5e5}.magic--font[_ngcontent-%COMP%]{color:#3b82f6}.rare--font[_ngcontent-%COMP%]{color:#eee000}.epic--font[_ngcontent-%COMP%]{color:#8b5cf6}.legendary--font[_ngcontent-%COMP%]{color:#f80}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}.combat[_ngcontent-%COMP%]{background:linear-gradient(315deg,#181f2b,#202939);padding:12px;border-radius:8px;border:2px solid #e5e5e5;box-shadow:0 8px 20px #02020699;display:flex;flex-direction:column;gap:12px}.actor-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;padding:0 6px}.actor-name[_ngcontent-%COMP%]{color:#d4af37}.right[_ngcontent-%COMP%]{margin:0 0 0 auto;padding-right:6px}.bottom[_ngcontent-%COMP%]{margin:auto 0 0}.boss[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr;gap:6px}.hero[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr;gap:6px}.hero-icon[_ngcontent-%COMP%], .boss-icon[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:6px}.arena[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center}.vs[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:#d4af37;font-family:Cinzel Decorative,serif;font-size:2rem;font-weight:900}.bleed-info[_ngcontent-%COMP%]{display:inline-flex;gap:12px}.bleed-info[_ngcontent-%COMP%]   .bleeding-icon[_ngcontent-%COMP%]{color:#8a0303;border-radius:50%;border-style:solid;border-color:#8a0303;padding:4px;background-color:#e5e5e5}.bleed-info[_ngcontent-%COMP%]   .bleeding-ticks[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:3px}.bleed-info[_ngcontent-%COMP%]   .bleeding-ticks[_ngcontent-%COMP%]   .bleed-tick[_ngcontent-%COMP%]{width:50px;height:25px;border-radius:12px;border-style:solid;border-color:#0f0f0f;background-color:#8a0303;opacity:.5}.bleed-info[_ngcontent-%COMP%]   .bleeding-ticks[_ngcontent-%COMP%]   .bleed-tick.active[_ngcontent-%COMP%]{opacity:1}.icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_idle-bob 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_idle-bob{0%{transform:translateY(0)}50%{transform:translateY(-6px)}to{transform:translateY(0)}}.hero-icon.attack[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_hero-attack .24s ease-out}.hero-icon.crit[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{filter:drop-shadow(0 0 10px #eee000)}.hero-icon.multi[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_hero-multi-attack .3s ease-out;filter:drop-shadow(0 0 15px #8b5cf6)}.hero-icon.crit-multi[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{filter:drop-shadow(0 0 20px #ff8800)}@keyframes _ngcontent-%COMP%_hero-attack{0%{transform:translate(0) scale(1)}40%{transform:translate(10px) scale(1.05)}to{transform:translate(0) scale(1)}}@keyframes _ngcontent-%COMP%_hero-multi-attack{0%{transform:translate(0) scale(1)}25%{transform:translate(20px) scale(1.2)}70%{transform:translate(-10px) scale(1.2)}to{transform:translate(0) scale(1)}}.boss-icon.taking-hit[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_boss-hit .3s ease-out;filter:drop-shadow(0 0 5px rgb(255,41.4,41.4))}.boss-icon.defeated[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_boss-defeat .6s ease-in forwards;filter:grayscale(100%) brightness(50%)}@keyframes _ngcontent-%COMP%_boss-hit{0%{transform:translate(0) scale(1)}50%{transform:translate(10px) scale(.95)}to{transform:translate(0) scale(1)}}@keyframes _ngcontent-%COMP%_boss-defeat{0%{transform:translateY(0) rotate(0) scale(1);opacity:1}to{transform:translateY(50%) rotate(360deg) scale(0);opacity:0}}"]})};function ke(n,t){if(n&1&&(a(0,"div",6),c(1,"STAGE"),r(),a(2,"div",7),c(3),r()),n&2){let e=l(2);i(3),f(e.CurrentStage())}}function Ae(n,t){if(n&1){let e=E();a(0,"button",11),D("click",function(){P(e);let p=l(2);return O(p.Prestige())}),c(1,"PRESTIGE"),r()}}function we(n,t){n&1&&(a(0,"button",10),s(1,"app-loading-spinner"),a(2,"h3"),c(3,"LEAVING..."),r()())}function Be(n,t){if(n&1){let e=E();a(0,"button",11),D("click",function(){P(e);let p=l(2);return O(p.StartBattle())}),c(1,"BATTLE"),r(),a(2,"button",12),D("click",function(){P(e);let p=l(2);return O(p.ExitDungeon())}),c(3,"LEAVE"),r()}}function Ne(n,t){if(n&1&&(a(0,"div",2),s(1,"app-icon",4),a(2,"div",5)(3,"div",6),c(4,"DUNGEON ROOM"),r(),a(5,"div",7),c(6),r()(),a(7,"div",5),m(8,ke,4,1),r(),a(9,"div",8),m(10,Ae,2,0,"button",9)(11,we,4,0,"button",10)(12,Be,4,0),r()()),n&2){let e=l(),o=y(2);i(),d("creatures",o.Icon),i(5),f(o.Title),i(2),g(e.IsInArena()?8:-1),i(2),g(e.IsInArena()?10:e.RestartDelay()?11:12)}}function Le(n,t){n&1&&(a(0,"div",3),s(1,"app-dungeon-arena")(2,"app-combat-log"),r())}var U=class n{restartTimer;combat=_(F);engine=_(ee);dungeonRoom=_(A);RestartDelay=x(!1);CurrentDungeon=this.dungeonRoom.CurrentDungeon;CurrentStage=this.dungeonRoom.CurrentStage;InCombat=this.combat.InProgress;IsInArena=b(()=>this.InCombat());ngOnDestroy(){this.restartTimer&&clearTimeout(this.restartTimer)}StartBattle(){let t=this.CurrentDungeon();t&&(this.combat.SetupCombat(t.Id),this.engine.Start())}Prestige(){this.DelayRestart(),this.engine.Stop()}ExitDungeon(){this.dungeonRoom.ExitDungeon()}DelayRestart(){this.RestartDelay.set(!0),this.restartTimer&&clearTimeout(this.restartTimer),this.restartTimer=setTimeout(()=>{this.RestartDelay.set(!1)},z.BATTLE_RESTART_MS)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=C({type:n,selectors:[["app-inner-dungeon"]],decls:5,vars:4,consts:[[3,"title"],[1,"dungeon"],[1,"top-bar"],[1,"inner-dungeon"],["size","lg",3,"creatures"],[1,"room-info"],[1,"room-label"],[1,"room-value"],[1,"dungeon-actions"],[1,"ih-button"],["disabled","",1,"ih-button-secondary","button-leaving"],[1,"ih-button",3,"click"],[1,"ih-button-secondary",3,"click"]],template:function(e,o){if(e&1&&(s(0,"app-panel-header",0),a(1,"main",1),B(2),m(3,Ne,13,4,"div",2),m(4,Le,3,0,"div",3),r()),e&2){d("title",o.IsInArena()?"DUNGEON ARENA":"DUNGEON ENTRANCE"),i(2);let p=N(o.CurrentDungeon());i(),g(p?3:-1),i(),g(o.IsInArena()?4:-1)}},dependencies:[V,M,Y,j,ie],styles:["@-webkit-keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.common--border[_ngcontent-%COMP%]{border-color:#a0a0a0}.magic--border[_ngcontent-%COMP%]{border-color:#3b82f6}.rare--border[_ngcontent-%COMP%]{border-color:#eee000}.epic--border[_ngcontent-%COMP%]{border-color:#8b5cf6}.legendary--border[_ngcontent-%COMP%]{border-color:#f80}.common--font[_ngcontent-%COMP%]{color:#e5e5e5}.magic--font[_ngcontent-%COMP%]{color:#3b82f6}.rare--font[_ngcontent-%COMP%]{color:#eee000}.epic--font[_ngcontent-%COMP%]{color:#8b5cf6}.legendary--font[_ngcontent-%COMP%]{color:#f80}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}.dungeon[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.inner-dungeon[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr;gap:12px}@media (max-width: 1920px){.inner-dungeon[_ngcontent-%COMP%]{grid-template-columns:1fr}}.top-bar[_ngcontent-%COMP%]{background:linear-gradient(315deg,#181f2b,#202939);padding:12px;border-radius:8px;border:2px solid #e5e5e5;box-shadow:0 8px 20px #02020699;display:flex;flex-direction:row;justify-content:flex-start;align-items:center;gap:12px}.room-info[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-weight:800;font-size:1.3rem;min-width:175px}.room-label[_ngcontent-%COMP%], .room-value[_ngcontent-%COMP%]{font-family:MedievalSharp,cursive}.room-label[_ngcontent-%COMP%]{color:#e1c773;text-align:center}.room-value[_ngcontent-%COMP%]{text-align:center}.dungeon-actions[_ngcontent-%COMP%]{display:flex;gap:12px;flex:1;justify-content:flex-end}.button-leaving[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:1rem}"]})};function Re(n,t){n&1&&s(0,"app-inner-dungeon")}function He(n,t){n&1&&s(0,"app-dungeon-rooms")}var re=class n{dungeonRoom=_(A);CurrentDungeon=this.dungeonRoom.CurrentDungeon;IsInDungeon=b(()=>this.CurrentDungeon()!==null);EnterDungeon(t){this.dungeonRoom.EnterDungeon(t)}CanEnter(t){return this.dungeonRoom.CanEnter(t)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=C({type:n,selectors:[["app-game-dungeon"]],decls:2,vars:1,template:function(e,o){e&1&&m(0,Re,1,0,"app-inner-dungeon")(1,He,1,0,"app-dungeon-rooms"),e&2&&g(o.IsInDungeon()?0:1)},dependencies:[$,U],styles:["@-webkit-keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.common--border[_ngcontent-%COMP%]{border-color:#a0a0a0}.magic--border[_ngcontent-%COMP%]{border-color:#3b82f6}.rare--border[_ngcontent-%COMP%]{border-color:#eee000}.epic--border[_ngcontent-%COMP%]{border-color:#8b5cf6}.legendary--border[_ngcontent-%COMP%]{border-color:#f80}.common--font[_ngcontent-%COMP%]{color:#e5e5e5}.magic--font[_ngcontent-%COMP%]{color:#3b82f6}.rare--font[_ngcontent-%COMP%]{color:#eee000}.epic--font[_ngcontent-%COMP%]{color:#8b5cf6}.legendary--font[_ngcontent-%COMP%]{color:#f80}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}"]})};export{re as GameDungeon};
