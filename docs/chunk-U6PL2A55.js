import{Aa as f,Ab as re,Ba as ce,Ca as T,Cb as P,Cc as O,Da as I,Db as me,Ea as k,Ec as Ae,Fa as m,Fb as pe,Fc as K,Ga as o,Gb as ge,Gc as De,Ha as r,Hb as N,Hc as Ue,Ia as p,Ib as H,Ic as Re,Jb as fe,Kb as B,Lb as ue,Lc as Ve,Ma as x,Mb as _e,Na as u,Nb as Ce,Nc as Q,Oa as c,Ob as ae,Pa as de,Pb as xe,Qa as se,Qb as be,Rb as ve,S as v,Sb as Se,Ta as M,Tb as ye,Ub as he,Va as d,Vb as Ie,W as _,Wa as w,Wb as ke,X as C,Xa as h,Ya as A,_b as Me,a as j,ac as Pe,ba as S,cc as Y,fc as Oe,ha as l,jb as $,jc as L,kc as G,lb as b,lc as Te,mb as F,nb as E,nc as we,oa as y,vc as D,xc as W,yc as Ee,za as g}from"./chunk-4JWPBNUP.js";var Ne=(i,t)=>t.Id;function Le(i,t){if(i&1&&(o(0,"span",9),d(1," Unlocked by clearing "),p(2,"app-icon",11),o(3,"span",12),d(4),r()()),i&2){let e=c();l(2),m("creatures",e.DungeonIcon),l(2),A(" [",e.ClearedStage," / ",e.RequiredStage,"] ")}}function Ge(i,t){if(i&1){let e=x();o(0,"div",10),p(1,"app-gold",13),o(2,"button",14),u("click",function(){_(e);let a=c(2);return C(a.Craft())}),d(3," CRAFT "),r()()}if(i&2){let e=c(2);l(),m("amount",e.CraftCost()),l(),m("disabled",e.CraftCost()>e.GoldBalance()||!e.SelectedVariant()||!e.CanCraftSelectedTier())}}function ze(i,t){i&1&&g(0,Le,5,3,"span",9)(1,Ge,4,2,"div",10),i&2&&f(t.IsUnlocked?1:0)}function qe(i,t){if(i&1){let e=x();o(0,"button",15),u("click",function(){let a=_(e).$implicit,s=c();return C(s.SelectSlot(a))}),p(1,"app-icon",16),d(2),r()}if(i&2){let e=t.$implicit,n=c();M("active",n.SelectedSlot()===e),l(),m("gear",n.SlotIcons[e]),l(),h(" ",e.toUpperCase()," ")}}function je(i,t){if(i&1){let e=x();o(0,"button",17),u("click",function(){let a=_(e).$implicit,s=c();return C(s.SelectTier(a))}),o(1,"span"),d(2,"TIER"),r(),o(3,"span",18),d(4),r()()}if(i&2){let e=t.$implicit,n=c();M("active",n.SelectedTier()===e),l(4),w(e)}}function $e(i,t){if(i&1){let e=x();o(0,"div",8)(1,"app-item-variant-preview",19),u("OnSelectVariant",function(a){_(e);let s=c();return C(s.SelectVariant(a))}),r()()}if(i&2){let e=t.$implicit,n=c();l(),m("Variant",e)("Selected",n.SelectedVariantId()===e.Id)}}var X=class i{crafting=v(Y);cost=v(L);gold=v(N);inventory=v(G);statistics=v(Oe);Slots=["Weapon","OffHand","Head","Chest","Legs","Feet"];Tiers=["I","II","III"];SlotIcons={Weapon:P.DEFAULT_WEAPON,OffHand:P.DEFAULT_OFFHAND,Head:P.DEFAULT_HEAD,Chest:P.DEFAULT_CHEST,Legs:P.DEFAULT_LEGS,Feet:P.DEFAULT_FEET};SelectedSlot=S("Weapon");SelectedTier=S("I");SelectedVariantId=S(null);SelectedVariant=b(()=>{let t=this.SelectedVariantId(),e=this.VariantsForSlot();return t?e.find(n=>n.Id===t)??null:null});TierUnlockRequirements=b(()=>{let t=this.statistics.DungeonStatistics().Dungeon;return{I:{Tier:"I",DungeonId:"D1",DungeonIcon:re("D1")?.Icon??"slime",RequiredStage:1,ClearedStage:Math.min(t.D1??0,1),IsUnlocked:!0},II:this.CreateTierRequirement("II","D1",t.D1??0),III:this.CreateTierRequirement("III","D2",t.D2??0)}});SelectedTierRequirement=b(()=>this.TierUnlockRequirements()[this.SelectedTier()]);CanCraftSelectedTier=b(()=>{let t=this.SelectedTierRequirement();return t?t.IsUnlocked:!0});GoldBalance=this.gold.Balance;VariantsForSlot=b(()=>me.filter(t=>t.Slot===this.SelectedSlot()&&t.Tier===this.SelectedTier()));CraftCost=b(()=>{let t=this.SelectedVariant();return t?this.cost.GetCraftItemCost(t,_e(t.Tier)):0});SelectSlot(t){this.SelectedSlot.set(t),this.SelectedVariantId.set(null)}SelectTier(t){this.SelectedTier.set(t),this.SelectedVariantId.set(null)}IsTierUnlocked(t){let e=this.TierUnlockRequirements()[t];return e?e.IsUnlocked:!0}SelectVariant(t){this.SelectedVariantId.set(t)}Craft(){let t=this.SelectedVariant();if(!t||!this.CanCraftSelectedTier())return;let e=this.crafting.CraftNewItem(t,this.cost);e.Success&&this.inventory.Add(e.Item)}CreateTierRequirement(t,e,n){let a=re(e),s=a?.StagesMax??0;return{Tier:t,DungeonId:e,DungeonIcon:a?.Icon??"slime",RequiredStage:s,ClearedStage:Math.min(n,s),IsUnlocked:n>=s}}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=y({type:i,selectors:[["app-crafting"]],decls:16,vars:1,consts:[[1,"panel"],[1,"panel-header"],[1,"panel-body"],[1,"slots"],[1,"slot",3,"active"],[1,"tiers"],[1,"tier",3,"active"],[1,"variants"],[1,"variant"],[1,"tier-lock-info"],[1,"actions"],["size","mini",3,"creatures"],[1,"tier-stages"],["size","sm","fontSize","1.3rem",3,"amount"],[1,"ih-button-secondary","action",3,"click","disabled"],[1,"slot",3,"click"],["size","md",3,"gear"],[1,"tier",3,"click"],[1,"tier-id"],[3,"OnSelectVariant","Variant","Selected"]],template:function(e,n){if(e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h3"),d(4,"ITEM CRAFTING"),r()(),g(5,ze,2,1),r(),o(6,"div",2)(7,"div",3),I(8,qe,3,4,"button",4,T),r(),o(10,"div",5),I(11,je,5,3,"button",6,T),r(),o(13,"div",7),I(14,$e,2,2,"div",8,Ne),r()()()),e&2){let a;l(5),f((a=n.SelectedTierRequirement())?5:-1,a),l(3),k(n.Slots),l(3),k(n.Tiers),l(3),k(n.VariantsForSlot())}},dependencies:[O,D,De],styles:['@-webkit-keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.common--border[_ngcontent-%COMP%]{border-color:#a0a0a0}.magic--border[_ngcontent-%COMP%]{border-color:#3b82f6}.rare--border[_ngcontent-%COMP%]{border-color:#eee000}.epic--border[_ngcontent-%COMP%]{border-color:#8b5cf6}.legendary--border[_ngcontent-%COMP%]{border-color:#f80}.common--font[_ngcontent-%COMP%]{color:#e5e5e5}.magic--font[_ngcontent-%COMP%]{color:#3b82f6}.rare--font[_ngcontent-%COMP%]{color:#eee000}.epic--font[_ngcontent-%COMP%]{color:#8b5cf6}.legendary--font[_ngcontent-%COMP%]{color:#f80}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}.panel[_ngcontent-%COMP%]{background:linear-gradient(315deg,#181f2b,#202939);padding:12px;border-radius:8px;border:2px solid #e5e5e5;box-shadow:0 8px 20px #02020699;display:flex;flex-direction:column;justify-content:center;align-items:stretch;gap:12px}.panel-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;border-bottom:1px solid #e5e5e5;padding:6px;min-height:50px}.actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;gap:6px}.action[_ngcontent-%COMP%]{font-size:1.1rem;min-width:80px}.panel-body[_ngcontent-%COMP%]{display:grid;grid:"slots tiers" auto "slots variants" 1fr/auto 1fr;gap:12px}.slot[_ngcontent-%COMP%], .tier[_ngcontent-%COMP%]{font-family:MedievalSharp,cursive;font-weight:700;letter-spacing:.1em;word-spacing:0em;text-shadow:1px 1px 2px rgba(0,0,0,.5);font-size:.9rem;min-width:auto;cursor:pointer;color:#e5e5e5;background:#00000040;border:1px solid #e5e5e5;display:flex;flex-direction:column;justify-content:center;align-items:center;background:#181f2b;padding:12px;border-radius:8px;box-shadow:0 8px 20px #02020699}.slot[_ngcontent-%COMP%]:focus-visible, .tier[_ngcontent-%COMP%]:focus-visible{outline:2px solid #d4af37;outline-offset:2px}.slot.active[_ngcontent-%COMP%], .tier.active[_ngcontent-%COMP%]{background:linear-gradient(315deg,#181f2b,#485c80)}.slots[_ngcontent-%COMP%]{grid-area:slots;display:grid;justify-content:start;align-content:start;gap:12px}.slot[_ngcontent-%COMP%]{gap:6px;height:80px;width:80px}.tiers[_ngcontent-%COMP%]{grid-area:tiers;display:inline-flex;align-items:center;gap:12px;height:45px}.tier[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;gap:6px;min-width:80px;align-items:baseline}.tier[_ngcontent-%COMP%]   .tier-id[_ngcontent-%COMP%]{font-family:Cinzel Decorative,serif}.tier-lock-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;color:#888;font-family:MedievalSharp,cursive;font-size:1rem;font-weight:500;gap:4px}.tier-lock-info[_ngcontent-%COMP%]   .tier-stages[_ngcontent-%COMP%]{font-size:.9rem}.variants[_ngcontent-%COMP%]{grid-area:variants;display:flex;max-height:68vh;overflow-y:auto;scroll-behavior:smooth;flex-wrap:wrap;align-content:flex-start;gap:6px;padding:4px}.variants[_ngcontent-%COMP%]::-webkit-scrollbar{width:.8rem;height:.8rem;background:#181f2b;border-radius:1rem}.variants[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:1rem;box-shadow:inset 0 0 5px #181f2b}.variants[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(270deg,#9a0000,#5c0000);border-radius:1rem}.variants[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(90deg,#9a0000,#e10000)}']})};function He(i,t){if(i&1&&(o(0,"div",8)(1,"span"),d(2,"Upgrade Item"),r(),p(3,"app-gold",14),r()),i&2){let e=c();l(3),m("amount",e.UpgradeCost())("size","md")("fontSize","1rem")}}function Be(i,t){if(i&1&&(o(0,"div",8)(1,"span"),d(2,"Enchant Affix"),r(),p(3,"app-gold",14),r()),i&2){let e=c(2);l(3),m("amount",e.EnchantCost(e.SelectedAffixIndex()))("size","md")("fontSize","1rem")}}function Ye(i,t){if(i&1&&(g(0,Be,4,3,"div",8),o(1,"div",8)(2,"span"),d(3,"Reroll Affix"),r(),p(4,"app-gold",14),r()),i&2){let e=c();f(e.IsMaxedSlot(e.SelectedAffixIndex())?-1:0),l(4),m("amount",e.RerollCost(e.SelectedAffixIndex()))("size","md")("fontSize","1rem")}}function We(i,t){if(i&1){let e=x();o(0,"div",15)(1,"button",17),u("click",function(){_(e);let a=c(2);return C(a.UpgradeItem())}),p(2,"app-icon",18),r(),o(3,"div",19)(4,"span"),d(5),r(),d(6," > "),o(7,"span"),d(8),r()()()}if(i&2){let e=c(2),n=e.Rarity(),a=e.NextItemRarity();l(4),M("common--font",n==="Common")("magic--font",n==="Magic")("rare--font",n==="Rare")("epic--font",n==="Epic")("legendary--font",n==="Legendary"),l(),h(" ",n.toUpperCase()," "),l(2),M("common--font",a==="Common")("magic--font",a==="Magic")("rare--font",a==="Rare")("epic--font",a==="Epic")("legendary--font",a==="Legendary"),l(),h(" ",a.toUpperCase()," ")}}function Ke(i,t){if(i&1){let e=x();o(0,"button",20),u("click",function(){_(e);let a=c(2);return C(a.UpgradeItem())}),d(1," UPGRADE ITEM "),r()}if(i&2){let e=c(2);m("disabled",!e.EnoughGoldForUpgrade())}}function Qe(i,t){if(i&1&&g(0,We,9,22,"div",15)(1,Ke,2,1,"button",16),i&2){let e=c();f(e.Item().Level===e.MaxItemLevel()?0:1)}}function Xe(i,t){i&1&&(o(0,"div",13)(1,"span",6),d(2,"This item rarity cannot have affixes."),r()())}function Je(i,t){if(i&1){let e=x();o(0,"button",27),u("click",function(){_(e);let a=c().$implicit,s=c(2);return C(s.RerollSlot(a))}),p(1,"app-icon",28),r()}if(i&2){let e=c().$implicit,n=c(2);m("disabled",!n.EnoughGoldForReroll(e))}}function Ze(i,t){if(i&1&&(o(0,"div",29),p(1,"app-icon",30),o(2,"div",31),d(3),r()(),o(4,"div",32),d(5),o(6,"span",33),d(7," [ "),o(8,"span"),d(9),r(),d(10," - "),o(11,"span"),d(12),r(),d(13," ] "),r()()),i&2){let e=c().$implicit,n=c(2).GetAffixInfo(e);M("common--font",n.Tier==="Common")("magic--font",n.Tier==="Magic")("rare--font",n.Tier==="Rare")("epic--font",n.Tier==="Epic")("legendary--font",n.Tier==="Legendary"),l(3),h("",n.Tier.toUpperCase()," AFFIX"),l(2),h(" ",n.Label," "),l(4),w(n.MinRoll),l(3),w(n.MaxRoll)}}function et(i,t){if(i&1){let e=x();o(0,"div",25),p(1,"app-gold",14),o(2,"button",20),u("click",function(){_(e);let a=c(3);return C(a.AddAffixSlot())}),d(3," ADD AFFIX "),r()()}if(i&2){let e=c(3);l(),m("amount",e.AddAffixCost())("size","md")("fontSize","1rem"),l(),m("disabled",!e.CanAddAffixSlot())}}function tt(i,t){if(i&1){let e=x();o(0,"button",34),u("click",function(){_(e);let a=c().$implicit,s=c(2);return C(s.UpgradeSlot(a))}),p(1,"app-icon",18),r()}if(i&2){let e=c().$implicit,n=c(2);m("disabled",!n.CanUpgradeSlot(e))}}function nt(i,t){if(i&1){let e=x();o(0,"div",21),g(1,Je,2,1,"button",22),r(),o(2,"div",23)(3,"button",24),u("click",function(){let a=_(e).$implicit,s=c(2);return C(s.SelectSlot(a))}),g(4,Ze,14,14)(5,et,4,4,"div",25),r()(),o(6,"div",21),g(7,tt,2,1,"button",26),r()}if(i&2){let e=t.$implicit,n=c(2);l(),f(n.SelectedAffixIndex()===e&&n.HasAffix(e)?1:-1),l(2),M("selected",n.SelectedAffixIndex()===e),l(),f(n.HasAffix(e)?4:5),l(3),f(n.SelectedAffixIndex()===e&&n.HasAffix(e)&&!n.IsMaxedSlot(e)?7:-1)}}function it(i,t){if(i&1&&I(0,nt,8,5,null,null,T),i&2){let e=c();k(e.VisibleSlotIndices())}}var J=class i{locale=v($);craftingService=v(Y);goldCostProvider=v(L);itemLevel=v(be);itemAffix=v(xe);Item=E.required();ItemChange=F();Variant=b(()=>H(this.Item().DefinitionId));Rarity=b(()=>B(this.Item().Level));Rules=b(()=>fe(this.Rarity()));MaxItemLevel=b(()=>Ce(this.Rarity()));EnchantedAffixes=b(()=>this.Item().Affixes.filter(t=>t.Improved).length);MaxAffixSlots=b(()=>this.Rules().MaxAffixes);NextItemRarity=b(()=>ue(this.Item()));VisibleSlotIndices=b(()=>{let t=this.Item(),e=this.MaxAffixSlots(),n=t.Affixes.length,a=Math.min(n+1,e);return Array.from({length:a},(s,V)=>V)});SelectedAffixIndex=S(null);SelectSlot(t){this.SelectedAffixIndex.set(t)}UpgradeCost(){return this.goldCostProvider.GetLevelUpCost(this.Item())}AddAffixCost(){return this.goldCostProvider.GetAddAffixCost(this.Item())}EnchantCost(t){return this.goldCostProvider.GetEnchantAffixCost(this.Item(),t)}RerollCost(t){return this.goldCostProvider.GetRerollAffixCost(this.Item(),t)}HasAffix(t){return t>=0&&t<this.Item().Affixes.length}GetAffixInfo(t){let e=this.Item().Affixes[t];return ve(e,this.locale)}CanUpgradeItem(){let t=this.Item();return this.itemLevel.CanLevelUp(t)}EnoughGoldForUpgrade(){let t=this.UpgradeCost();return this.goldCostProvider.CanAfford(t)}UpgradeItem(){let t=this.Item(),e=this.craftingService.LevelUp(t,this.goldCostProvider);e.Success&&this.ItemChange.emit(e.Item)}CanAddAffixSlot(){let t=this.Item();return this.itemAffix.CanAddAffix(t)&&this.EnoughGoldForAddingAffix()}EnoughGoldForAddingAffix(){let t=this.AddAffixCost();return this.goldCostProvider.CanAfford(t)}AddAffixSlot(){if(!this.CanAddAffixSlot())return;let t=this.Item(),e=this.craftingService.AddAffix(t,this.goldCostProvider);if(!e.Success)return;let n=e.Item;this.ItemChange.emit(j({},n))}IsMaxedSlot(t){if(!this.HasAffix(t))return!1;let e=this.Item();return Se(e,t)}EnoughGoldForEnchant(t){let e=this.EnchantCost(t);return this.goldCostProvider.CanAfford(e)}CanUpgradeSlot(t){return this.HasAffix(t)?this.itemAffix.CanEnchant(this.Item(),t)&&this.EnoughGoldForEnchant(t):!1}UpgradeSlot(t){if(!this.CanUpgradeSlot(t))return;let e=this.Item(),n=this.craftingService.EnchantAffix(e,t,this.goldCostProvider);if(!n.Success)return;let a=n.Item;this.ItemChange.emit(j({},a))}EnoughGoldForReroll(t){let e=this.RerollCost(t);return this.goldCostProvider.CanAfford(e)}RerollSlot(t){if(!this.HasAffix(t))return;let e=this.Item(),n=this.craftingService.RerollAffix(e,t,this.goldCostProvider);n.Success&&(e=n.Item,this.ItemChange.emit(j({},e)))}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=y({type:i,selectors:[["app-enchanting"]],inputs:{Item:[1,"Item"]},outputs:{ItemChange:"ItemChange"},decls:26,vars:11,consts:[[1,"panel"],[1,"panel-header"],[1,"title"],[1,"subtitle"],[1,"rarity"],[1,"dot"],[1,"muted"],[1,"actions"],[1,"action-info"],[1,"panel-body"],[1,"preview"],[3,"Item","Variant"],[1,"affixes"],[1,"empty-state"],[3,"amount","size","fontSize"],[1,"item-rarity-upgrade"],[1,"ih-button-tertiary",3,"disabled"],["title","Upgrade Item Rarity",1,"ih-button-icon","ih-button-icon-border",3,"click"],["ui","arrow","size","sm",1,"rotate-180"],[1,"item-rarity-upgrade-info"],[1,"ih-button-tertiary",3,"click","disabled"],[1,"affix-actions"],["title","Reroll Affix",1,"ih-button-icon","ih-button-icon-border",3,"disabled"],[1,"affix-content"],[1,"affix",3,"click"],[1,"empty-slot"],["title","Enchant Affix",1,"ih-button-icon","ih-button-icon-border",3,"disabled"],["title","Reroll Affix",1,"ih-button-icon","ih-button-icon-border",3,"click","disabled"],["ui","cycle","size","sm"],[1,"affix-header"],["symbol","polarstar","size","sm"],[1,"affix-title"],[1,"affix-label"],[1,"affix-range"],["title","Enchant Affix",1,"ih-button-icon","ih-button-icon-border",3,"click","disabled"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),d(4,"ITEM ENCHANTING"),r(),o(5,"div",3)(6,"span",4),d(7),r(),o(8,"span",5),d(9,"\u2022"),r(),o(10,"span",6),d(11),r(),o(12,"span",5),d(13,"\u2022"),r(),o(14,"span",6),d(15),r()()(),o(16,"div",7),g(17,He,4,3,"div",8),g(18,Ye,5,4),r()(),o(19,"div",9)(20,"div",10),p(21,"app-item-preview",11),g(22,Qe,2,1),r(),o(23,"div",12),g(24,Xe,3,0,"div",13)(25,it,2,0),r()()()),e&2&&(l(7),h("",n.Rarity()," Item"),l(4),A("Level: ",n.Item().Level,"/",n.MaxItemLevel()),l(4),A("Affixes: ",n.Item().Affixes.length,"/",n.MaxAffixSlots()),l(2),f(n.CanUpgradeItem()?17:-1),l(),f(n.SelectedAffixIndex()!==null&&n.HasAffix(n.SelectedAffixIndex())?18:-1),l(3),m("Item",n.Item())("Variant",n.Variant()),l(),f(n.CanUpgradeItem()?22:-1),l(2),f(n.MaxAffixSlots()===0?24:25))},dependencies:[K,O,D],styles:["@-webkit-keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.common--border[_ngcontent-%COMP%]{border-color:#a0a0a0}.magic--border[_ngcontent-%COMP%]{border-color:#3b82f6}.rare--border[_ngcontent-%COMP%]{border-color:#eee000}.epic--border[_ngcontent-%COMP%]{border-color:#8b5cf6}.legendary--border[_ngcontent-%COMP%]{border-color:#f80}.common--font[_ngcontent-%COMP%]{color:#e5e5e5}.magic--font[_ngcontent-%COMP%]{color:#3b82f6}.rare--font[_ngcontent-%COMP%]{color:#eee000}.epic--font[_ngcontent-%COMP%]{color:#8b5cf6}.legendary--font[_ngcontent-%COMP%]{color:#f80}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}.panel[_ngcontent-%COMP%]{background:linear-gradient(315deg,#181f2b,#202939);padding:12px;border-radius:8px;border:2px solid #e5e5e5;box-shadow:0 8px 20px #02020699;display:flex;flex-direction:column;justify-content:center;align-items:stretch;gap:12px}.panel-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;border-bottom:1px solid #e5e5e5;gap:12px;padding:6px}.title[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:flex-start;gap:3px}.title[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-direction:row;justify-content:center;align-items:center;gap:6px;font-size:.9rem}.title[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{opacity:.6}.actions[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-direction:row;justify-content:center;align-items:flex-end;gap:12px;margin-right:50px}.actions[_ngcontent-%COMP%]   .action-info[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px}.actions[_ngcontent-%COMP%]   .action-info[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:1rem;color:#e5e5e5;font-family:MedievalSharp,cursive}.muted[_ngcontent-%COMP%]{color:#888}.panel-body[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr;gap:12px}.preview[_ngcontent-%COMP%]{align-self:start;display:grid;gap:12px}.preview[_ngcontent-%COMP%]   .item-rarity-upgrade[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:grid;grid-template-columns:auto 1fr;gap:12px}.preview[_ngcontent-%COMP%]   .item-rarity-upgrade[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{color:#d4af37}.preview[_ngcontent-%COMP%]   .item-rarity-upgrade[_ngcontent-%COMP%]   .item-rarity-upgrade-info[_ngcontent-%COMP%]{background:linear-gradient(315deg,#181f2b,#202939);padding:12px;border-radius:8px;border:1px solid #e5e5e5;box-shadow:0 8px 20px #02020699;font-weight:700;text-align:center;margin-right:54px}.affixes[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr auto;gap:12px;align-items:center}.affix-content[_ngcontent-%COMP%]{display:grid}.affix[_ngcontent-%COMP%]{transition:background-color .3s;background:#0003;padding:12px;border-radius:8px;border:1px solid #e5e5e5;box-shadow:0 8px 20px #02020699;display:grid;gap:4px;text-align:left;min-width:360px}.affix[_ngcontent-%COMP%]:hover{background:#283347;outline:none}.affix[_ngcontent-%COMP%]:active{background:#485c80;outline:none}.affix[_ngcontent-%COMP%]:focus-visible{outline:2px solid #d4af37;outline-offset:2px}.affix[_ngcontent-%COMP%]:hover{transform:scale(1.01);transition:transform .2s}.affix.selected[_ngcontent-%COMP%]{background:linear-gradient(135deg,#181f2b,#485c80)}.affix[_ngcontent-%COMP%]   .affix-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center;gap:12px}.affix[_ngcontent-%COMP%]   .affix-header[_ngcontent-%COMP%]   .affix-title[_ngcontent-%COMP%]{font-family:MedievalSharp,cursive;font-weight:700;font-size:1.2rem}.affix[_ngcontent-%COMP%]   .affix-label[_ngcontent-%COMP%]{color:#e5e5e5;font-size:1.1rem;font-weight:700}.affix[_ngcontent-%COMP%]   .affix-range[_ngcontent-%COMP%]{font-size:1rem;color:#888}.affix[_ngcontent-%COMP%]   .empty-slot[_ngcontent-%COMP%]{display:inline-flex;justify-content:center;gap:12px}.affix-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:flex-end;gap:12px;min-width:42px}.empty-state[_ngcontent-%COMP%]{background:#0003;border-radius:8px;border:2px solid #e5e5e5;box-shadow:0 8px 20px #02020699;padding:12px}"],changeDetection:0})};function ot(i,t){i&1&&d(0," UPGRADE AMULET ")}function rt(i,t){i&1&&d(0," UNLOCK AMULET ")}function at(i,t){i&1&&(o(0,"h3"),d(1,"UPGRADE COST"),r())}function lt(i,t){i&1&&(o(0,"h3"),d(1,"UNLOCK COST"),r())}function ct(i,t){if(i&1){let e=x();o(0,"div",9)(1,"button",12),u("click",function(){_(e);let a=c();return C(a.UpgradeAmulet())}),g(2,ot,1,0)(3,rt,1,0),r(),o(4,"div",13),g(5,at,2,0,"h3")(6,lt,2,0,"h3"),p(7,"app-gold",14),r()()}if(i&2){let e=c();l(),m("disabled",!e.CanUpgradeAmulet()),l(),f(e.Unlocked()?2:3),l(3),f(e.Unlocked()?5:6),l(2),m("amount",e.AmuletUpgradeCost())}}var Z=class i{locale=v($);AmuletState=v(ke);RuneState=v(we);Amulet=b(()=>this.AmuletState.GetState());Unlocked=b(()=>this.AmuletState.IsUnlocked());AmuletUpgradeCost=b(()=>this.Unlocked()?this.AmuletState.GetUpgradeCost():this.AmuletState.GetUnlockCost());ShowUpgradeAmuletButton(){if(this.Unlocked()){if(pe(this.Amulet().Quality)!==null)return!0}else return!0;return!1}CanUpgradeAmulet(){return this.AmuletState.CanUnlock()||this.AmuletState.CanUpgrade()}UpgradeAmulet(){this.Unlocked()?this.AmuletState.Upgrade():this.AmuletState.Unlock()}RuneSlotsInfo=b(()=>{let t=this.RuneState.SlotsById(),e=[];for(let n in t){let a=t[n],s=ge(n,a,this.locale);e.push(s)}return e});UnsockableRuneSlots=b(()=>{let t=[];return this.AmuletState.GetState().Slots.forEach((n,a)=>{n!=null&&this.AmuletState.CanUnsocket(a)&&t.push(a)}),t});RuneSocketCost(){return this.AmuletState.GetSocketCost()}RuneUnsocketCost(){return this.AmuletState.GetUnsocketCost()}CanUnsocketRune(t){return this.AmuletState.CanUnsocket(t)}UnsocketRune(t){this.AmuletState.Unsocket(t)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=y({type:i,selectors:[["app-socketing"]],decls:20,vars:10,consts:[[1,"container"],[1,"panel-header"],[1,"title"],[1,"actions"],[1,"action-info"],[3,"amount","size","fontSize"],[1,"panel-body"],[1,"amulet_display"],[3,"OnUnsocket","Amulet","UnsockableRuneSlots"],[1,"amulet_upgrade"],[1,"runes_list"],[3,"RuneSlotsInfo"],[1,"ih-button-tertiary",3,"click","disabled"],[1,"amulet_upgrade_cost"],[3,"amount"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),d(4,"RUNE SOCKETING"),r()(),o(5,"div",3)(6,"div",4)(7,"span"),d(8,"Socket Rune"),r(),p(9,"app-gold",5),r(),o(10,"div",4)(11,"span"),d(12,"Unsocket Rune"),r(),p(13,"app-gold",5),r()()(),o(14,"div",6)(15,"div",7)(16,"app-amulet-preview",8),u("OnUnsocket",function(s){return n.UnsocketRune(s)}),r(),g(17,ct,8,4,"div",9),r(),o(18,"div",10),p(19,"app-runes-list",11),r()()()),e&2&&(l(9),m("amount",n.RuneSocketCost())("size","md")("fontSize","1rem"),l(4),m("amount",n.RuneUnsocketCost())("size","md")("fontSize","1rem"),l(3),m("Amulet",n.Amulet())("UnsockableRuneSlots",n.UnsockableRuneSlots()),l(),f(n.ShowUpgradeAmuletButton()?17:-1),l(2),m("RuneSlotsInfo",n.RuneSlotsInfo()))},dependencies:[Ee,O,Ve],styles:['@-webkit-keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.common--border[_ngcontent-%COMP%]{border-color:#a0a0a0}.magic--border[_ngcontent-%COMP%]{border-color:#3b82f6}.rare--border[_ngcontent-%COMP%]{border-color:#eee000}.epic--border[_ngcontent-%COMP%]{border-color:#8b5cf6}.legendary--border[_ngcontent-%COMP%]{border-color:#f80}.common--font[_ngcontent-%COMP%]{color:#e5e5e5}.magic--font[_ngcontent-%COMP%]{color:#3b82f6}.rare--font[_ngcontent-%COMP%]{color:#eee000}.epic--font[_ngcontent-%COMP%]{color:#8b5cf6}.legendary--font[_ngcontent-%COMP%]{color:#f80}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}.container[_ngcontent-%COMP%]{background:linear-gradient(315deg,#181f2b,#202939);padding:12px;border-radius:8px;border:2px solid #e5e5e5;box-shadow:0 8px 20px #02020699;display:flex;flex-direction:column;justify-content:center;align-items:stretch;gap:12px}@media (max-height: 1080px){.runes_list[_ngcontent-%COMP%]{display:flex;max-height:69vh;overflow-y:auto;scroll-behavior:smooth;width:524px}.runes_list[_ngcontent-%COMP%]::-webkit-scrollbar{width:.75rem;height:.75rem;background:#181f2b;border-radius:1rem}.runes_list[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:1rem;box-shadow:inset 0 0 5px #181f2b}.runes_list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(270deg,#9a0000,#5c0000);border-radius:1rem}.runes_list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(90deg,#9a0000,#e10000)}}.panel-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;border-bottom:1px solid #e5e5e5;gap:12px;padding:6px}.panel-header[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-direction:row;justify-content:center;align-items:flex-end;gap:12px}.panel-header[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .action-info[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px}.panel-header[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .action-info[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:1rem;color:#e5e5e5;font-family:MedievalSharp,cursive}.panel-body[_ngcontent-%COMP%]{display:grid;grid:"amulet runes" auto/auto 1fr;gap:12px}.amulet_display[_ngcontent-%COMP%]{grid-area:amulet;display:flex;flex-direction:column;gap:12px}.amulet_display[_ngcontent-%COMP%]   .amulet_upgrade[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:12px}.amulet_display[_ngcontent-%COMP%]   .amulet_upgrade[_ngcontent-%COMP%]   .amulet_upgrade_cost[_ngcontent-%COMP%]{display:inline-flex;align-items:baseline;justify-content:center;gap:12px}.runes_list[_ngcontent-%COMP%]{grid-area:runes}']})};function dt(i,t){if(i&1){let e=x();o(0,"div",4),p(1,"app-crafting"),o(2,"app-inventory",5),u("ItemSelected",function(a){_(e);let s=c();return C(s.onInventoryItemSelected(a))}),r()()}i&2&&(l(2),m("ShowEquipped",!0))}function st(i,t){if(i&1){let e=x();o(0,"app-enchanting",8),u("ItemChange",function(a){_(e);let s=c(2);return C(s.OnEnchantingItemChange(a))}),r()}if(i&2){let e=c(2);m("Item",e.SelectedItem())}}function mt(i,t){i&1&&(o(0,"div",7)(1,"div",9),d(2,"Nothing to show"),r(),o(3,"div",10),d(4,"Select an item in your inventory to enchant."),r()())}function pt(i,t){if(i&1){let e=x();o(0,"div",4),g(1,st,1,1,"app-enchanting",6)(2,mt,5,0,"div",7),o(3,"app-inventory",5),u("ItemSelected",function(a){_(e);let s=c();return C(s.onInventoryItemSelected(a))}),r()()}if(i&2){let e=c();l(),f(e.SelectedItem()?1:2),l(2),m("ShowEquipped",!0)}}function gt(i,t){i&1&&p(0,"app-socketing")}var ee=class i{cost=v(L);inventory=v(G);gear=v(Pe);gold=v(N);get Tabs(){return[{id:"crafting",label:"CRAFTING",disabled:!1},{id:"enchanting",label:"ENCHANTING",disabled:!1},{id:"socketing",label:"SOCKETING",disabled:!1}]}SelectedTab=S("crafting");onTabSelected(t){this.SelectedTab.set(t)}SelectedItemContext=S(null);onInventoryItemSelected(t){this.SelectedItemContext.set(t)}Slots=["Weapon","OffHand","Head","Chest","Legs","Feet"];Rarities=["Common","Magic","Rare","Epic","Legendary"];SelectedSlot=S("Weapon");SelectedRarity=S("Magic");SelectedVariantId=S(null);SelectedItem=b(()=>{let t=this.SelectedItemContext();return t?t.source==="Inventory"?this.InventoryItems().find(n=>n.Id===t.itemId)||null:this.EquippedItems().find(n=>n.Id===t.itemId)||null:null});SelectedAffixIndex=S(null);SelectedAffixDefinitionId=S(null);SelectedRuneIndex=S(null);GoldBalance=this.gold.Balance;InventoryItems=this.inventory.Items;EquippedItems=this.gear.EquippedItems;OnEnchantingItemChange(t){let e=this.SelectedItemContext();e&&(e.source==="Inventory"?(this.inventory.Update(t),this.SelectedItemContext.set({itemId:t.Id,source:"Inventory"})):(this.gear.Equip(t),this.SelectedItemContext.set({itemId:t.Id,source:"Equipped"})))}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=y({type:i,selectors:[["app-crafting-area"]],decls:7,vars:3,consts:[[1,"blacksmith-area"],[3,"selectedChange","tabs","selected"],[1,"area"],[1,"tab__area"],[1,"area_with_inventory"],[3,"ItemSelected","ShowEquipped"],[3,"Item"],[1,"empty"],[3,"ItemChange","Item"],[1,"headline"],[1,"hint"]],template:function(e,n){if(e&1&&(o(0,"section",0)(1,"app-tab-strip",1),u("selectedChange",function(s){return n.onTabSelected(s)}),r(),o(2,"div",2)(3,"div",3),g(4,dt,3,1,"div",4)(5,pt,4,2,"div",4)(6,gt,1,0,"app-socketing"),r()()()),e&2){let a;l(),m("tabs",n.Tabs)("selected",n.SelectedTab()),l(3),f((a=n.SelectedTab())==="crafting"?4:a==="enchanting"?5:a==="socketing"?6:-1)}},dependencies:[Q,X,J,Ae,Z],styles:["@-webkit-keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.common--border[_ngcontent-%COMP%]{border-color:#a0a0a0}.magic--border[_ngcontent-%COMP%]{border-color:#3b82f6}.rare--border[_ngcontent-%COMP%]{border-color:#eee000}.epic--border[_ngcontent-%COMP%]{border-color:#8b5cf6}.legendary--border[_ngcontent-%COMP%]{border-color:#f80}.common--font[_ngcontent-%COMP%]{color:#e5e5e5}.magic--font[_ngcontent-%COMP%]{color:#3b82f6}.rare--font[_ngcontent-%COMP%]{color:#eee000}.epic--font[_ngcontent-%COMP%]{color:#8b5cf6}.legendary--font[_ngcontent-%COMP%]{color:#f80}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}.area_with_inventory[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 500px;gap:12px}@media (max-width: 1920px){.area_with_inventory[_ngcontent-%COMP%]{grid-template-columns:1fr}}.empty[_ngcontent-%COMP%]{background:#0003;padding:12px;border-radius:8px;border:2px solid #e5e5e5;box-shadow:0 8px 20px #02020699;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:6px;text-align:center}.empty[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]{font-family:MedievalSharp,cursive;color:#e5e5e5;font-size:1.2rem}.empty[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{font-family:MedievalSharp,cursive;color:#888;font-size:1.1rem;font-style:italic}"],changeDetection:0})};var ft=(i,t)=>t.Item.Id;function ut(i,t){if(i&1){let e=x();o(0,"button",16),u("click",function(){let a=_(e).$implicit,s=c();return C(s.ToggleSlot(a))}),p(1,"app-icon",17),d(2),r()}if(i&2){let e=t.$implicit,n=c();M("is-active",n.IsSlotSelected(e)),l(),m("gear",n.DefaultSlotIcons[e]),l(),h(" ",e.toUpperCase()," ")}}function _t(i,t){if(i&1){let e=x();o(0,"button",16),u("click",function(){let a=_(e).$implicit,s=c();return C(s.ToggleTier(a))}),d(1),r()}if(i&2){let e=t.$implicit,n=c();M("is-active",n.IsTierSelected(e)),l(),h(" TIER ",e," ")}}function Ct(i,t){if(i&1){let e=x();o(0,"button",16),u("click",function(){let a=_(e).$implicit,s=c();return C(s.ToggleRarity(a))}),d(1),r()}if(i&2){let e=t.$implicit,n=c();M("is-active",n.IsRaritySelected(e)),l(),h(" ",e.toUpperCase()," ")}}function xt(i,t){i&1&&(o(0,"div",14)(1,"div",18),d(2,"Nothing to show"),r(),o(3,"div",19),d(4,"Adjust your filters or craft new gear."),r()())}function bt(i,t){if(i&1){let e=x();o(0,"button",26),u("click",function(){_(e);let a=c().$implicit,s=c(2);return C(s.EquipItem(a.Item))}),d(1," EQUIP "),r()}}function vt(i,t){if(i&1){let e=x();o(0,"button",27),u("click",function(){_(e);let a=c().$implicit,s=c(2);return C(s.StartDismantling(a.Item))}),d(1," DISMANTLE "),r()}}function St(i,t){if(i&1&&(o(0,"div",29)(1,"span"),d(2,"Refund:"),r(),p(3,"app-gold",30),r()),i&2){let e=c(2).$implicit,n=c(2);l(3),m("amount",n.DismantleRefund(e.Item))}}function yt(i,t){if(i&1){let e=x();o(0,"button",27),u("click",function(){_(e);let a=c(3);return C(a.DismantleItem())}),p(1,"app-loading-spinner",28),d(2," CONFIRM "),r(),g(3,St,4,1,"div",29)}if(i&2){let e=c().$implicit,n=c(2);l(),m("size",16)("color","#fff"),l(2),f(n.IsDismantlingItem()===e.Item?3:-1)}}function ht(i,t){if(i&1&&(o(0,"div",20)(1,"app-item-preview",21),p(2,"separator",22),o(3,"div",23),g(4,bt,2,0,"button",24),g(5,vt,2,0,"button",25)(6,yt,4,3),r()()()),i&2){let e=t.$implicit,n=c(2);l(),m("Item",e.Item)("Variant",e.Variant),l(3),f(n.IsDismantlingItem()!==e.Item?4:-1),l(),f(!n.IsDismantlingItem()||n.IsDismantlingItem()!==e.Item?5:6)}}function It(i,t){if(i&1&&(o(0,"div",15),I(1,ht,7,4,"div",20,ft),r()),i&2){let e=c();l(),k(e.FilteredItemCards())}}var te=class i{Inventory=v(G);ItemManagement=v(Te);Gold=v(N);IsDismantlingItem=S(void 0);timeout=0;ngOnDestroy(){clearTimeout(this.timeout)}AllSlots=["Weapon","OffHand","Head","Chest","Legs","Feet"];AllTiers=["I","II","III"];AllRarities=["Common","Magic","Rare","Epic","Legendary"];DefaultSlotIcons={Weapon:P.DEFAULT_WEAPON,OffHand:P.DEFAULT_OFFHAND,Head:P.DEFAULT_HEAD,Chest:P.DEFAULT_CHEST,Legs:P.DEFAULT_LEGS,Feet:P.DEFAULT_FEET};Capacity=this.Inventory.Capacity;SlotsUsed=this.Inventory.SlotsUsed;SlotsFree=this.Inventory.SlotsFree;FilteredSlots=S(new Set);FilteredTiers=S(new Set);FilteredRarities=S(new Set);SlotOrder=new Map(this.AllSlots.map((t,e)=>[t,e]));TierOrder=new Map(this.AllTiers.map((t,e)=>[t,e]));TotalItems=b(()=>this.Inventory.Items().length);FilteredItemCards=b(()=>{let t=this.FilteredSlots(),e=this.FilteredTiers(),n=this.FilteredRarities();return this.Inventory.Items().map(a=>({Item:a,Variant:H(a.DefinitionId)})).filter(a=>{let s=!0,V=!0,z=!0;if(t.size>0&&(s=t.has(a.Variant.Slot)),e.size>0&&(V=e.has(a.Variant.Tier)),n.size>0){let q=B(a.Item.Level);z=n.has(q)}return s&&V&&z}).sort((a,s)=>{let V=this.SlotOrder.get(a.Variant.Slot)??999,z=this.SlotOrder.get(s.Variant.Slot)??999;if(V!==z)return V-z;let q=this.TierOrder.get(a.Variant.Tier)??999,le=this.TierOrder.get(s.Variant.Tier)??999;return q!==le?q-le:a.Item.Level!==s.Item.Level?s.Item.Level-a.Item.Level:a.Variant.Name.localeCompare(s.Variant.Name)})});FilteredCount=b(()=>this.FilteredItemCards().length);HasActiveFilters=b(()=>this.FilteredSlots().size>0||this.FilteredTiers().size>0||this.FilteredRarities().size>0);IsSlotSelected(t){return this.FilteredSlots().has(t)}IsTierSelected(t){return this.FilteredTiers().has(t)}IsRaritySelected(t){return this.FilteredRarities().has(t)}ToggleSlot(t){let e=new Set(this.FilteredSlots());if(e.has(t)?e.delete(t):e.add(t),e.size===this.AllSlots.length){this.FilteredSlots.set(new Set);return}this.FilteredSlots.set(e)}ToggleTier(t){let e=new Set(this.FilteredTiers());if(e.has(t)?e.delete(t):e.add(t),e.size===this.AllTiers.length){this.FilteredTiers.set(new Set);return}this.FilteredTiers.set(e)}ToggleRarity(t){let e=new Set(this.FilteredRarities());if(e.has(t)?e.delete(t):e.add(t),e.size===this.AllRarities.length){this.FilteredRarities.set(new Set);return}this.FilteredRarities.set(e)}ResetFilters(){this.FilteredSlots.set(new Set),this.FilteredTiers.set(new Set),this.FilteredRarities.set(new Set)}EquipItem(t){t&&this.ItemManagement.EquipItem(t.Id)}DismantleRefund(t){return ae(t)}DismantleItem(){let t=this.IsDismantlingItem();if(!t)return;let e=ae(t);this.Gold.Add(e),this.ItemManagement.DismantleItem(t.Id),this.IsDismantlingItem.set(void 0)}StartDismantling(t){clearTimeout(this.timeout),this.IsDismantlingItem.set(t),this.timeout=setTimeout(()=>{this.IsDismantlingItem.set(void 0)},1500)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=y({type:i,selectors:[["app-inventory-area"]],decls:36,vars:6,consts:[[1,"inventory"],[1,"header"],[1,"title"],[1,"meta"],[1,"count"],[1,"separator"],[1,"capacity"],[1,"actions"],["type","button",1,"ih-button-secondary",3,"click","disabled"],[1,"filters"],[1,"filter-group"],[1,"filter-title"],[1,"chip-row"],["type","button",1,"chip",3,"is-active"],[1,"empty"],[1,"grid"],["type","button",1,"chip",3,"click"],["size","sm",3,"gear"],[1,"headline"],[1,"hint"],[1,"grid-cell"],[3,"Item","Variant"],[1,"ih-separator"],[1,"item-preview-actions"],[1,"ih-button-tertiary","button-equip"],[1,"ih-button-tertiary","button-dismantle"],[1,"ih-button-tertiary","button-equip",3,"click"],[1,"ih-button-tertiary","button-dismantle",3,"click"],[3,"size","color"],[1,"refund-info"],[3,"amount"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),d(4,"BAG"),r(),o(5,"div",3)(6,"span",4),d(7),r(),o(8,"span",5),d(9,"\u2022"),r(),o(10,"span",6),d(11),r()()(),o(12,"div",7)(13,"button",8),u("click",function(){return n.ResetFilters()}),d(14," RESET FILTERS "),r()()(),o(15,"div",9)(16,"div",10)(17,"div",11),d(18,"SLOTS"),r(),o(19,"div",12),I(20,ut,3,4,"button",13,T),r()(),o(22,"div",10)(23,"div",11),d(24,"TIERS"),r(),o(25,"div",12),I(26,_t,2,3,"button",13,T),r()(),o(28,"div",10)(29,"div",11),d(30,"RARITY"),r(),o(31,"div",12),I(32,Ct,2,3,"button",13,T),r()()(),g(34,xt,5,0,"div",14)(35,It,3,0,"div",15),r()),e&2&&(l(7),A("",n.FilteredCount()," / ",n.TotalItems()," Items"),l(4),A("",n.SlotsUsed()," / ",n.Capacity()," Capacity"),l(2),m("disabled",!n.HasActiveFilters()),l(7),k(n.AllSlots),l(6),k(n.AllTiers),l(6),k(n.AllRarities),l(2),f(n.FilteredItemCards().length===0?34:35))},dependencies:[K,D,W,Re,O],styles:["@-webkit-keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.common--border[_ngcontent-%COMP%]{border-color:#a0a0a0}.magic--border[_ngcontent-%COMP%]{border-color:#3b82f6}.rare--border[_ngcontent-%COMP%]{border-color:#eee000}.epic--border[_ngcontent-%COMP%]{border-color:#8b5cf6}.legendary--border[_ngcontent-%COMP%]{border-color:#f80}.common--font[_ngcontent-%COMP%]{color:#e5e5e5}.magic--font[_ngcontent-%COMP%]{color:#3b82f6}.rare--font[_ngcontent-%COMP%]{color:#eee000}.epic--font[_ngcontent-%COMP%]{color:#8b5cf6}.legendary--font[_ngcontent-%COMP%]{color:#f80}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}.inventory[_ngcontent-%COMP%]{background:linear-gradient(315deg,#181f2b,#202939);padding:12px;border-radius:8px;border:2px solid #e5e5e5;box-shadow:0 8px 20px #02020699;display:flex;flex-direction:column;justify-content:flex-start;align-items:stretch;gap:6px}.header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;gap:12px}.title[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:flex-start;gap:12px}.title[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:#888;font-size:.95rem;font-weight:500}.title[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{margin:0 12px}.filters[_ngcontent-%COMP%]{background:#0003;padding:12px;border-radius:8px;display:flex;flex-direction:column;justify-content:flex-start;align-items:stretch;gap:12px}.filter-group[_ngcontent-%COMP%]{display:grid;grid-template-columns:65px 1fr;align-items:start;gap:12px}.filter-title[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-family:MedievalSharp,cursive;font-size:1rem;font-weight:700;align-self:center}.chip-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px}.chip[_ngcontent-%COMP%]{font-family:MedievalSharp,cursive;font-weight:700;letter-spacing:.1em;word-spacing:0em;text-shadow:1px 1px 2px rgba(0,0,0,.5);font-size:.9rem;min-width:auto;padding:8px 10px;cursor:pointer;color:#e5e5e5;background:#00000040;border-radius:8px;border:1px solid #e5e5e5;display:inline-flex;align-items:center;gap:6px;min-height:40px;transition:transform .12s ease,background-color .18s ease,border-color .18s ease}.chip[_ngcontent-%COMP%]:focus-visible{outline:2px solid #d4af37;outline-offset:2px}.chip[_ngcontent-%COMP%]:hover{background:linear-gradient(315deg,#181f2b,#485c80);transform:translateY(-1px)}.chip.is-active[_ngcontent-%COMP%]{border-color:#be0000;background:#2e0000}.grid[_ngcontent-%COMP%]{min-height:65vh;display:flex;max-height:65vh;overflow-y:auto;scroll-behavior:smooth;flex-wrap:wrap;align-content:flex-start;gap:6px;padding:6px}.grid[_ngcontent-%COMP%]::-webkit-scrollbar{width:1rem;height:1rem;background:#181f2b;border-radius:1rem}.grid[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:1rem;box-shadow:inset 0 0 5px #181f2b}.grid[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(270deg,#9a0000,#5c0000);border-radius:1rem}.grid[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(90deg,#9a0000,#e10000)}@media (max-height: 1080px){.grid[_ngcontent-%COMP%]{min-height:56vh;display:flex;max-height:56vh;overflow-y:auto;scroll-behavior:smooth}.grid[_ngcontent-%COMP%]::-webkit-scrollbar{width:1rem;height:1rem;background:#181f2b;border-radius:1rem}.grid[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:1rem;box-shadow:inset 0 0 5px #181f2b}.grid[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(270deg,#9a0000,#5c0000);border-radius:1rem}.grid[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(90deg,#9a0000,#e10000)}}.empty[_ngcontent-%COMP%]{background:#0003;padding:12px;border-radius:8px;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:6px;text-align:center}.empty[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]{font-family:MedievalSharp,cursive;color:#e5e5e5;font-size:1.2rem}.empty[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{font-family:MedievalSharp,cursive;color:#888;font-size:1.1rem;font-style:italic}.item-preview-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:12px}.item-preview-actions[_ngcontent-%COMP%]   .button-equip[_ngcontent-%COMP%]{width:110px}.item-preview-actions[_ngcontent-%COMP%]   .button-dismantle[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;gap:12px;background-color:#0f0f0f;color:#e5e5e5}.item-preview-actions[_ngcontent-%COMP%]   .refund-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;gap:12px}.item-preview-actions[_ngcontent-%COMP%]   .refund-info[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-family:MedievalSharp,cursive;color:#888}"],changeDetection:0})};function kt(i,t){i&1&&(o(0,"strong",9),d(1,"MAX"),r())}function Mt(i,t){if(i&1&&(o(0,"span",10),d(1,"Level"),r(),o(2,"strong",9),d(3),r()),i&2){let e=c(2);l(3),A(" ",e.skill().Level," / ",e.skill().MaxLevel," ")}}function Pt(i,t){if(i&1&&(o(0,"span",4),d(1,"\u2022"),r(),g(2,kt,2,0,"strong",9)(3,Mt,4,2)),i&2){let e=c();l(2),f(e.isMaxed?2:3)}}function Ot(i,t){if(i&1&&(o(0,"div",14)(1,"span"),d(2),r()()),i&2){let e=c().$index,n=c(2);l(2),h("[\u{1F852} ",n.skill().NextEffects[e],"]")}}function Tt(i,t){if(i&1&&(o(0,"div",7)(1,"div",11),p(2,"app-icon",12),r(),o(3,"div",13),d(4),g(5,Ot,3,1,"div",14),r()()),i&2){let e=t.$implicit,n=t.$index,a=c(2);l(4),h(" ",e," "),l(),f(!a.isMaxed&&a.skill().NextEffects[n]?5:-1)}}function wt(i,t){if(i&1&&I(0,Tt,6,2,"div",7,T),i&2){let e=c();k(e.skill().Effects)}}function Et(i,t){if(i&1&&(o(0,"div",7)(1,"div",11),p(2,"app-icon",15),r(),o(3,"div",13),d(4),r(),o(5,"span",4),d(6,"\u2022"),r(),o(7,"div",11),p(8,"app-icon",15),r(),o(9,"div",13),d(10),r()()),i&2){let e=c();l(4),h("Duration: ",e.skill().Duration.Duration,"s"),l(6),h("Cooldown: ",e.skill().Duration.Cooldown,"s")}}function At(i,t){if(i&1){let e=x();p(0,"app-gold",16),o(1,"button",17),u("click",function(){_(e);let a=c();return C(a.unlockSkill.emit(a.skill()))}),p(2,"app-icon",18),r()}if(i&2){let e=c();m("amount",e.UnlockCost),l(),m("disabled",!e.canUnlock())}}function Dt(i,t){if(i&1){let e=x();p(0,"app-gold",16),o(1,"button",19),u("click",function(){_(e);let a=c();return C(a.upgradeSkill.emit(a.skill()))}),p(2,"app-icon",20),r()}if(i&2){let e=c();m("amount",e.UpgradeCost),l(),m("disabled",!e.canLevel())}}var ne=class i{skill=E.required();unlockable=E.required();canUnlock=E.required();canLevel=E.required();unlockSkill=F();upgradeSkill=F();get unlocked(){return this.skill().IsUnlocked}get isMaxed(){let t=this.skill();return t.Level>=t.MaxLevel}get MetaInfo(){let t=this.skill();return ye(t.Definition)}get UnlockCost(){let t=this.skill();return he(t.Definition.Tier)}get UpgradeCost(){let t=this.skill();return Ie(t.Definition.Tier,t.Level)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=y({type:i,selectors:[["app-skill-area"]],inputs:{skill:[1,"skill"],unlockable:[1,"unlockable"],canUnlock:[1,"canUnlock"],canLevel:[1,"canLevel"]},outputs:{unlockSkill:"unlockSkill",upgradeSkill:"upgradeSkill"},decls:17,vars:15,consts:[[1,"skill"],[1,"skill-main"],[1,"skill-title"],[1,"skill-title__name"],[1,"dot"],[1,"skill-title__type"],[1,"skill-description"],[1,"skill-effect"],[1,"skill-actions"],[1,"skill-title__level"],[1,"skill-title__level-label"],[1,"skill-effect__icon"],["symbol","beveledstar","size","mini"],[1,"skill-effect-label"],[1,"next-level-effect"],["symbol","stopwatch","size","mini"],["size","sm",3,"amount"],["title","Unlock Skill",1,"ih-button-icon","ih-button-icon-border",3,"click","disabled"],["symbol","padlockopen","size","sm"],["title","Upgrade Skill",1,"ih-button-icon","ih-button-icon-border",3,"click","disabled"],["symbol","growth","size","sm"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"strong",3),d(4),r(),g(5,Pt,4,1),o(6,"span",4),d(7,"\u2022"),r(),o(8,"span",5),d(9),r()(),o(10,"div",6),d(11),r(),g(12,wt,2,0),g(13,Et,11,2,"div",7),r(),o(14,"div",8),g(15,At,3,2)(16,Dt,3,2),r()()),e&2&&(M("unlockable",n.unlockable())("unlocked",n.unlocked)("locked",!n.unlockable())("maxed",n.isMaxed),l(4),w(n.skill().Definition.Name.toUpperCase()),l(),f(n.unlocked&&n.skill().MaxLevel>1?5:-1),l(4),w(n.MetaInfo.toUpperCase()),l(2),w(n.skill().Definition.Description),l(),f(n.unlocked&&n.skill().Effects.length>0?12:-1),l(),f(n.unlocked&&n.skill().Duration?13:-1),l(2),f(n.unlockable()&&n.skill().Level===0?15:n.unlocked&&!n.isMaxed?16:-1))},dependencies:[D,O],styles:["@-webkit-keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.common--border[_ngcontent-%COMP%]{border-color:#a0a0a0}.magic--border[_ngcontent-%COMP%]{border-color:#3b82f6}.rare--border[_ngcontent-%COMP%]{border-color:#eee000}.epic--border[_ngcontent-%COMP%]{border-color:#8b5cf6}.legendary--border[_ngcontent-%COMP%]{border-color:#f80}.common--font[_ngcontent-%COMP%]{color:#e5e5e5}.magic--font[_ngcontent-%COMP%]{color:#3b82f6}.rare--font[_ngcontent-%COMP%]{color:#eee000}.epic--font[_ngcontent-%COMP%]{color:#8b5cf6}.legendary--font[_ngcontent-%COMP%]{color:#f80}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}.skill[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;gap:12px;padding:6px 12px;align-items:center;border-width:2px;border-style:solid;border-radius:8px}.skill.unlockable[_ngcontent-%COMP%]{border-style:dashed;border-color:#7a7a7a}.skill.unlocked[_ngcontent-%COMP%]{border-style:solid;border-color:#e5e5e5}.skill.locked[_ngcontent-%COMP%]{opacity:.5}.skill.maxed[_ngcontent-%COMP%]{border-color:#d4af37}.skill-title[_ngcontent-%COMP%], .skill-description[_ngcontent-%COMP%], .skill-dependencies[_ngcontent-%COMP%], .skill-effect[_ngcontent-%COMP%], .next-level-effect[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.skill-title[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:6px;font-size:1.1rem}.skill-title[_ngcontent-%COMP%]   .skill-title__name[_ngcontent-%COMP%]{font-family:MedievalSharp,cursive;color:#d4af37}.skill-title[_ngcontent-%COMP%]   .skill-title__level-label[_ngcontent-%COMP%]{font-family:MedievalSharp,cursive}.skill-title[_ngcontent-%COMP%]   .skill-title__level[_ngcontent-%COMP%]{font-family:MedievalSharp,cursive;color:#d4af37}.skill-title[_ngcontent-%COMP%]   .skill-title__type[_ngcontent-%COMP%]{font-family:MedievalSharp,cursive;color:#888;font-size:.9rem}.skill-description[_ngcontent-%COMP%]{font-family:MedievalSharp,cursive;font-size:1rem}.skill-effect[_ngcontent-%COMP%]{display:flex;gap:6px;font-size:1rem}.skill-effect[_ngcontent-%COMP%]   .skill-effect__icon[_ngcontent-%COMP%]{display:flex;align-self:center}.skill-effect[_ngcontent-%COMP%]   .skill-effect-label[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px;font-weight:700;text-align:center;align-self:center}.skill-effect[_ngcontent-%COMP%]   .skill-effect-label[_ngcontent-%COMP%]   .next-level-effect[_ngcontent-%COMP%]{font-weight:400;color:#888}.skill-actions[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}"],changeDetection:0})};var Ut=["*"];function Rt(i,t){if(i&1&&(o(0,"div",3),p(1,"app-level",7)(2,"app-gold",8),r()),i&2){let e=c();l(),m("level",e.tier().RequiredLevel),l(),m("amount",e.tier().UnlockGoldCost)}}function Vt(i,t){if(i&1){let e=x();o(0,"button",9),u("click",function(){_(e);let a=c();return C(a.unlockTier.emit(a.tier()))}),p(1,"app-icon",10),r()}if(i&2){let e=c();m("disabled",!e.canUnlock())}}function Ft(i,t){i&1&&(o(0,"span",6),d(1,"UNLOCKED"),r())}var ie=class i{tier=E.required();isUnlocked=E.required();canUnlock=E.required();unlockTier=F();get isMaxed(){return this.isUnlocked()&&this.tier().Skills.every(t=>t.IsUnlocked&&t.Level>=t.MaxLevel)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=y({type:i,selectors:[["app-skill-tier-area"]],inputs:{tier:[1,"tier"],isUnlocked:[1,"isUnlocked"],canUnlock:[1,"canUnlock"]},outputs:{unlockTier:"unlockTier"},ngContentSelectors:Ut,decls:11,vars:9,consts:[[1,"tier"],[1,"tier-header"],[1,"tier-number"],[1,"requirements"],[1,"tier-actions"],["title","Unlock Tier",1,"ih-button-icon","ih-button-icon-border",3,"disabled"],[1,"badge"],["fontSize","1.1rem","size","sm","title","Required Level",3,"level"],["fontSize","1.1rem","size","sm","title","Required Gold",3,"amount"],["title","Unlock Tier",1,"ih-button-icon","ih-button-icon-border",3,"click","disabled"],["symbol","padlockopen","size","sm"]],template:function(e,n){e&1&&(de(),o(0,"div",0)(1,"div",1)(2,"h3"),d(3," SKILL TIER "),o(4,"span",2),d(5),r()(),g(6,Rt,3,2,"div",3),o(7,"div",4),g(8,Vt,2,1,"button",5)(9,Ft,2,0,"span",6),r()(),se(10),r()),e&2&&(M("unlocked",n.isUnlocked())("locked",!n.isUnlocked())("maxed",n.isMaxed),l(5),w(n.tier().Tier),l(),f(n.isUnlocked()?-1:6),l(2),f(n.isUnlocked()?9:8))},dependencies:[D,O,Ue],styles:["@-webkit-keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.common--border[_ngcontent-%COMP%]{border-color:#a0a0a0}.magic--border[_ngcontent-%COMP%]{border-color:#3b82f6}.rare--border[_ngcontent-%COMP%]{border-color:#eee000}.epic--border[_ngcontent-%COMP%]{border-color:#8b5cf6}.legendary--border[_ngcontent-%COMP%]{border-color:#f80}.common--font[_ngcontent-%COMP%]{color:#e5e5e5}.magic--font[_ngcontent-%COMP%]{color:#3b82f6}.rare--font[_ngcontent-%COMP%]{color:#eee000}.epic--font[_ngcontent-%COMP%]{color:#8b5cf6}.legendary--font[_ngcontent-%COMP%]{color:#f80}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}.tier[_ngcontent-%COMP%]{border-width:2px;border-style:solid;border-radius:8px;padding:6px}.tier.locked[_ngcontent-%COMP%]{border-color:#888}.tier.unlocked[_ngcontent-%COMP%]{border-color:#e5e5e5}.tier.maxed[_ngcontent-%COMP%]{border-color:#d4af37}.tier-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;gap:12px;min-height:45px;margin-bottom:6px}.tier-header[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{margin-left:12px;color:#d4af37}.tier-header[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]   .tier-number[_ngcontent-%COMP%]{font-family:Cinzel Decorative,serif;color:#9a0000;text-shadow:-1px -1px 0 rgba(0,0,0,.5),1px -1px 0 rgba(0,0,0,.5),-1px 1px 0 rgba(0,0,0,.5),1px 1px 0 rgba(0,0,0,.5)}.requirements[_ngcontent-%COMP%]{display:flex;gap:12px}.tier-actions[_ngcontent-%COMP%]{margin-right:10px}.tier-actions[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background:#d4af37;color:#0f0f0f;border-radius:8px;padding:3px 12px;font-family:MedievalSharp,cursive;font-weight:600}"],changeDetection:0})};var Nt=(i,t)=>t.Definition.Id;function Lt(i,t){if(i&1){let e=x();o(0,"app-skill-area",6),u("unlockSkill",function(a){_(e);let s=c(2);return C(s.UnlockSkill(a))})("upgradeSkill",function(a){_(e);let s=c(2);return C(s.UpgradeSkill(a))}),r()}if(i&2){let e=t.$implicit,n=c().$implicit;m("skill",e)("unlockable",n.IsUnlocked)("canUnlock",e.CanUnlock)("canLevel",e.CanUpgrade)}}function Gt(i,t){i&1&&p(0,"separator",5)}function zt(i,t){if(i&1){let e=x();o(0,"app-skill-tier-area",2),u("unlockTier",function(a){_(e);let s=c();return C(s.UnlockTier(a))}),o(1,"div",3),I(2,Lt,1,4,"app-skill-area",4,Nt),r()(),g(4,Gt,1,0,"separator",5)}if(i&2){let e=t.$implicit,n=t.$index,a=t.$count;m("tier",e)("isUnlocked",e.IsUnlocked)("canUnlock",e.CanUnlock),l(2),k(e.Skills),l(2),f(n!==a-1?4:-1)}}var oe=class i{SkillsService=v(Me);SkillTreeState=this.SkillsService.SkillTree;UnlockTier(t){this.SkillsService.UnlockTier(t.Tier)}UnlockSkill(t){this.SkillsService.UnlockSkill(t.Definition.Id)}UpgradeSkill(t){this.SkillsService.UpgradeSkill(t.Definition.Id)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=y({type:i,selectors:[["app-skill-tree"]],decls:4,vars:0,consts:[[1,"container"],[1,"tiers"],[3,"unlockTier","tier","isUnlocked","canUnlock"],[1,"skills"],[3,"skill","unlockable","canUnlock","canLevel"],[1,"ih-separator"],[3,"unlockSkill","upgradeSkill","skill","unlockable","canUnlock","canLevel"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"div",1),I(2,zt,5,4,null,null,ce),r()()),e&2&&(l(2),k(n.SkillTreeState()))},dependencies:[ie,ne,W],styles:["@-webkit-keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.common--border[_ngcontent-%COMP%]{border-color:#a0a0a0}.magic--border[_ngcontent-%COMP%]{border-color:#3b82f6}.rare--border[_ngcontent-%COMP%]{border-color:#eee000}.epic--border[_ngcontent-%COMP%]{border-color:#8b5cf6}.legendary--border[_ngcontent-%COMP%]{border-color:#f80}.common--font[_ngcontent-%COMP%]{color:#e5e5e5}.magic--font[_ngcontent-%COMP%]{color:#3b82f6}.rare--font[_ngcontent-%COMP%]{color:#eee000}.epic--font[_ngcontent-%COMP%]{color:#8b5cf6}.legendary--font[_ngcontent-%COMP%]{color:#f80}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}.container[_ngcontent-%COMP%]{max-height:85vh;overflow-y:auto;scroll-behavior:smooth;display:grid;gap:12px}.container[_ngcontent-%COMP%]::-webkit-scrollbar{width:.75rem;height:.75rem;background:#181f2b;border-radius:1rem}.container[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:1rem;box-shadow:inset 0 0 5px #181f2b}.container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(270deg,#9a0000,#5c0000);border-radius:1rem}.container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(90deg,#9a0000,#e10000)}.tiers[_ngcontent-%COMP%]{display:grid;gap:12px;margin-right:12px}@media (max-height: 1080px){.container[_ngcontent-%COMP%]{display:grid;max-height:82vh;overflow-y:auto}}.skills[_ngcontent-%COMP%]{display:grid;gap:12px}"],changeDetection:0})};function qt(i,t){i&1&&p(0,"app-inventory-area")}function jt(i,t){i&1&&p(0,"app-crafting-area")}function $t(i,t){i&1&&p(0,"app-skill-tree")}var Fe=class i{get Tabs(){return[{id:"inventory",label:"INVENTORY",disabled:!1},{id:"crafting",label:"BLACKSMITH",disabled:!1},{id:"skills",label:"SKILL TREE",disabled:!1}]}SelectedTab=S("inventory");onTabSelected(t){this.SelectedTab.set(t)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=y({type:i,selectors:[["app-game-town"]],decls:6,vars:3,consts:[[1,"town-area"],[3,"selectedChange","tabs","selected"],[1,"tab-content"]],template:function(e,n){if(e&1&&(o(0,"div",0)(1,"app-tab-strip",1),u("selectedChange",function(s){return n.onTabSelected(s)}),r(),o(2,"div",2),g(3,qt,1,0,"app-inventory-area")(4,jt,1,0,"app-crafting-area")(5,$t,1,0,"app-skill-tree"),r()()),e&2){let a;l(),m("tabs",n.Tabs)("selected",n.SelectedTab()),l(2),f((a=n.SelectedTab())==="inventory"?3:a==="crafting"?4:a==="skills"?5:-1)}},dependencies:[Q,te,oe,ee],styles:["@-webkit-keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.common--border[_ngcontent-%COMP%]{border-color:#a0a0a0}.magic--border[_ngcontent-%COMP%]{border-color:#3b82f6}.rare--border[_ngcontent-%COMP%]{border-color:#eee000}.epic--border[_ngcontent-%COMP%]{border-color:#8b5cf6}.legendary--border[_ngcontent-%COMP%]{border-color:#f80}.common--font[_ngcontent-%COMP%]{color:#e5e5e5}.magic--font[_ngcontent-%COMP%]{color:#3b82f6}.rare--font[_ngcontent-%COMP%]{color:#eee000}.epic--font[_ngcontent-%COMP%]{color:#8b5cf6}.legendary--font[_ngcontent-%COMP%]{color:#f80}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}"]})};export{Fe as GameTown};
